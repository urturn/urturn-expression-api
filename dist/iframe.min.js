function FastClick(t){"use strict";var e,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)},FastClick.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}var UT={},WD=UT;UT.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),n="x"==t?e:8|3&e;return n.toString(16)})},UT.UUID=UT.uuid;var supportGetSet=function(){try{!Object.prototype.__defineGetter__&&Object.defineProperty({},"x",{get:function(){return!0}}).x&&(Object.defineProperty(Object.prototype,"__defineGetter__",{enumerable:!1,configurable:!0,value:function(t,e){Object.defineProperty(this,t,{get:e,enumerable:!0,configurable:!0})}}),Object.defineProperty(Object.prototype,"__defineSetter__",{enumerable:!1,configurable:!0,value:function(t,e){Object.defineProperty(this,t,{set:e,enumerable:!0,configurable:!0})}}))}catch(t){throw Error("Simple Storage API not Supported")}};supportGetSet(),function(){"use strict";UT.Collection=function(t){var e,n,i,r,o,s,a,c,l,u,d=this;this.length=0,this.name=null,this.isPublic=function(){return!1};var h=this.setItem=function(t,e){if(!t)throw Error("InvalidKey",t);if(UT.Collection.isReservedKey(t))throw Error("ReservedKey",t);var n=r[t],i=v(t,e);return i||r[t]?(!n||null!==i&&void 0!==i?!n&&i?(l++,s.push(t),r[t]=i):r[t]=i:(s.splice(s.indexOf(t),1),l--,delete r[t]),-1==a.indexOf(t)&&a.push(t),d.length=s.length,o[t]=e,e):i},f=function(t){return-1===c.indexOf(t)&&void 0!==d[t]?d[t]:void 0},p=this.getItem=function(t,e){if(!t)return null;var n=o[t];return n||(n=UT.Collection.buildItem(r[t]),void 0===n&&(n=f(t)),void 0===n&&(n=e),o[t]=n),n};this.key=function(t){return t>=s.length?null:s[t]},this.count=function(){return l},this.toString=function(){return'<Collection @name="'+d.name+'">'},this.save=function(){C();var t={};if(a.length>0){for(var e=0;a.length>e;e++)t[a[e]]=UT.Collection.marshallItem(r[a[e]]);n.save(d.name,t),a=[]}},this.getCurrentData=function(){var t={name:d.name,count:l,definition:i.definition,operations:[],items:[],"public":!1};if(i.operations)for(var e=0;i.operations.length>e;e++){var n={operation:i.operations[e].operation,field:i.operations[e].field};opsToolbox[n.operation].toJsonData(u[n.field],n),t.operations.push(n)}for(var o in r){var s=r[o];s._key=o,t.items.push(s)}return t},this.refresh=function(t){m.call(d,{currentUserId:e,delegate:n,data:t})};var v=UT.Collection.sanitizeItem,m=function(t){UT.Collection.validateOptions(t),u={},s=[],a=[],c=[],e=t.currentUserId,n=t.delegate,i=t.data,d.name=i.name,l=i.count,g(i.items)},g=function(t){if(r={},o={},t){for(var e=0;t.length>e;e++){var n=t[e],i=n._key;r[i]=n,y(i,n),s.push(i)}d.length=s.length}},y=function(t){-1!=c.indexOf(t)||UT.Collection.isReservedKey(t)||(c.push(t),d.__defineGetter__(t,function(){return p.call(d,t)}),d.__defineSetter__(t,function(e){return h.call(d,t,e)}))},C=function(){for(var t=Object.keys(d),e=t.length-1;e>=0;e--){var n=t[e];UT.Collection.isReservedKey(n)||-1!=c.indexOf(n)||(h(n,d[n]),y(n,d[n]))}};m(t)},UT.Collection.RESERVED_KEYS=["refresh","setItem","getItem","count","sum","key","isPublic","getUserItem","setUserItem","average","toString","size","length","name","save","fieldDefs","sanitizedItem","getCurrentData"],UT.Collection.isReservedKey=function(t){return UT.Collection.RESERVED_KEYS.indexOf(t)>=0},UT.Collection.validateOptions=function(t){if(!t.data)throw Error("ArgumentError","missing data");if(!t.data.name)throw Error("ArgumentError","no name in data");if(void 0===t.data.count)throw Error("ArgumentError","no count in data")},UT.Collection.marshallItem=function(t){return t&&t.marshall?t.marshall():void 0!==t&&null!==t?t:null},UT.Collection.sanitizeItem=function(t,e){if("function"==typeof e)throw Error("ArgumentError cannot serialize function");var n=UT.Collection.marshallItem(e);if(null!==n){if(("object"!=typeof n||[].constructor===n.constructor)&&(n={_type:"literal",value:n}),n._key=t,!n||n.constructor!=={}.constructor)throw Error("Unserialisable object");return JSON.parse(JSON.stringify(n))}return null},UT.Collection.buildItem=function(t){return t&&t._type&&UT.Collection.ItemBuilders[t._type]?UT.Collection.ItemBuilders[t._type](t):t},UT.Collection.ItemBuilders={image:function(t){return new UT.Image(t)},sound:function(t){return new UT.Sound(t)},video:function(t){return new UT.Video(t)},literal:function(t){return t.value}}}(),UT.CollectionStore=function(t){this.data=t.data;var e=t.delegate;e.store=this;for(var n={},i=0;this.data.length>i;i++){var r=this.data[i],o=r.name;if(!o)throw Error("ArgumentError","data contains unamed collections.");n[o]=r.public?new UT.PublicCollection({data:r,postMessageApi:t.postMessageApi,currentUserId:t.currentUserId,delegate:e}):new UT.Collection({data:r,postMessageApi:t.postMessageApi,currentUserId:t.currentUserId,delegate:e})}this.get=function(t){return n[t]},this.set=function(t){n[t.name]=t},this.each=function(t){for(var e in n)t(n[e])},this.flush=function(){e.flush()},this.getCurrentData=function(){r=[];for(var t in n)r.push(n[t].getCurrentData());return r},this.refresh=function(t,n){e.refreshCollections(t,n)}},function(){"use strict";var t=["recent","friends"];UT.PublicCollection=function(e){this.length=0,this.name=null;var n=null,i=!1;this.isPublic=function(){return!0},this.setUserItem=function(t){if(!s)throw a.authenticate(),Error("ArgumentError","No currentUserId defined");var e=s,r=o(e,t),c=n;return r||c?(h(c,r),!c||null!==r&&void 0!==r?!c&&r?(u++,n=r):n=r:(u--,n=null),i=!0,n):r};var r=this.getUserItem=function(){return s?n:void 0};this.average=function(t){return l[t]?l[t].average:void 0},this.sum=function(t){return l[t]?l[t].sum:void 0};var o=function(t,e){var n=UT.Collection.sanitizeItem(t,e),i=c.definition.fields;if(e&&i&&i.length>0){for(var r=!1,o=0;i.length>o;o++){var s=i[o];if(void 0!==e[s.name])if(r=!0,"string"==s.type)n[s.name]=e[s.name];else if("number"==s.type){var a=parseFloat(e[s.name]);if(isNaN(a)||!isFinite(e[s.name]))throw Error("TypeError","Wrong value for field note");n[s.name]=a}else{if("boolean"!=s.type)throw Error("TypeError","Unkown type "+s.type);n[s.name]=!!e[s.name]}}if(!r)throw Error("InvalidItemError no valid field specified")}return n};this.count=function(t){if(!t)return u;if(l[t])return l[t]?l[t].count:void 0},this.toString=function(){return'<PublicCollection @name="'+this.name+'">'},this.save=function(){if(i){var t={};t[s]=UT.Collection.marshallItem(n),a.save(this.name,t),i=!1}},this.getCurrentData=function(){var t={name:this.name,count:u,definition:c.definition,operations:[],items:[],"public":!0};if(c.operations)for(var e=0;c.operations.length>e;e++){var i={operation:c.operations[e].operation,field:c.operations[e].field};d[i.operation].toJsonData(l[i.field],i),t.operations.push(i)}r()&&(n._key=s,t.items.push(r()));for(var o=0;c.items.length>o;o++)c.items[o]._key&&c.items[o]._key!=s&&t.items.push(c.items[o]);return t},this.find=function(e,n){if("function"==typeof e&&(n=e,e={filters:{recent:!0}}),"string"==typeof e){if(-1===t.indexOf(e))throw Error("invalid filter ("+e+")");var i={};i[e]=!0,e={filters:i}}if(!n||"function"!=typeof n)throw Error("missing callback argument");a.find(this.name,e,n)},this.refresh=function(t){f.call(this,{currentUserId:s,delegate:a,data:t})};var s,a,c,l,u,d={_transfer:function(t,e){for(var n=Array.prototype.slice.call(arguments,2),i=n.length-1;i>=0;i--)e[n[i]]=t[n[i]]},average:{fromJsonData:function(t,e){void 0===e.average||void 0===e.average_count?(t.average=-1,t.average_count=0):d._transfer(e,t,"average","average_count")},toJsonData:function(t,e){d._transfer(t,e,"average","average_count")},recompute:function(t,e,n,i){var r=t.average_count;n&&void 0!==n[e.field]&&(t.average=1===r?-1:(t.average*r-n[e.field])/parseFloat(r-1),r--),i&&void 0!==i[e.field]&&(t.average=(t.average*r+i[e.field])/parseFloat(r+1),r++),t.average_count=r}},count:{fromJsonData:function(t,e){void 0===e.count?t.count=0:d._transfer(e,t,"count")},toJsonData:function(t,e){d._transfer(t,e,"count")},recompute:function(t,e,n,i){n&&n[e.field]&&void 0!==n[e.field]&&(t.count=t.count-1),i&&i[e.field]&&void 0!==i[e.field]&&t.count++}},sum:{fromJsonData:function(t,e){void 0===e.sum?t.sum=0:d._transfer(e,t,"sum")},toJsonData:function(t,e){d._transfer(t,e,"sum")},recompute:function(t,e,n,i){n&&n[e.field]&&void 0!==n[e.field]&&(t.sum=t.sum-n[e.field]),i&&i[e.field]&&void 0!==i[e.field]&&(t.sum=t.sum+i[e.field])}}},h=function(t,e){if(c.operations)for(var n=0;c.operations.length>n;n++){var i=c.operations[n];(e&&void 0!==e[i.field]||t&&void 0!==t[i.field])&&d[i.operation].recompute(l[i.field],i,t,e)}},f=function(t){if(UT.Collection.validateOptions(t),l={},s=t.currentUserId,a=t.delegate,c=t.data,this.name=c.name,u=c.count,c.operations)for(var e=0;c.operations.length>e;e++){var n=c.operations[e];l[n.field]=l[n.field]||{},d[n.operation].fromJsonData(l[n.field],n)}p.call(this,c.items)},p=function(t){if(t)for(var e=0;t.length>e;e++){var i=t[e],r=i._key;r==s&&(n=i)}};f.call(this,e)}}(),function(){var t,e,n=[],i={},r=!1;UT.Expression=function(){throw Error("StaticClass")},UT.Expression.ready=function(e){-1==n.indexOf(e)&&n.push(e),r&&(e.call(this,t),o("changeCurrentState",["initialized"]))},UT.Expression.apiVersion=function(){return"0.8.0-alpha"};var o=UT.Expression._callAPI=function(t,n,r){var o={type:"ExpAPICall",methodName:t,args:n,expToken:e?e.expToken:null};if(r){var s=""+UT.uuid();i[s]=r,o.callbackId=s}var a=JSON.stringify(o);window.parent.postMessage(a,"*")},s=function(t,e){var n=i[t];n&&(e&&e instanceof Array||window.console&&console.error&&console.error("received result is not an array.",e),n.apply(this,e),delete i[t])},a=function(i){e=i,r=!0,e.readyToPost=!1,t=new UT.Post(e),t.on("scrollChanged",function(t){e.scrollValues=t});for(var s=0;n.length>s;s++)n[s].apply(t,[t]);n=[],o("changeCurrentState",["initialized"])},c=function(){t.fire("publish"),o("posted")},l=function(){t.fire("pause")};UT.Expression._dispatch=function(e){switch(e.type){case"ready":a(e.options);break;case"triggerEvent":t.fire.apply(t,[e.eventName].concat(e.eventArgs));break;case"callback":s(e.callbackId,e.result);break;case"post":c();break;case"pause":l();break;case"media":t.fire("media",e.eventArgs[0]);break;default:window.console&&console.log&&console.log("Unkown event "+e.type)}},UT.Expression._reset=function(){n=[],i=[],t=null,r=!1},UT.Expression._postInstance=function(){return t=t}}(),function(){"use strict";UT.User=function(t){this.username=t.username,this.avatar=function(){return t.avatar},this.uuid=t.uuid,this.numberOfPost=t.numberOfPost,this.numberOfUse=t.numberOfUse},UT.User.prototype.marshall=function(){return{_type:"user",uuid:this.uuid}}}(),function(){"use strict";UT.Post=function(t){if(!t||!t.collections)throw Error("ArgumentError","Missing collections in state arguments");var e,n=this,i={height:0,width:0},r={},o={},s=new UT.CollectionStore({data:t.collections,currentUserId:t.currentUserId,delegate:{save:function(t,e,n){UT.Expression._callAPI("collections.save",[t,e],n)},authenticate:function(){UT.Expression._callAPI("authenticate")},find:function(t,e,n){UT.Expression._callAPI("collections.find",[t,e],n)}}});if(t.parentData){var a=[];for(var c in t.parentData){try{t.parentData[c]._key=c}catch(l){window.console&&console.log&&console.log("Unexpected Error: "+l)}a.push(t.parentData[c])}e=new UT.Collection({data:{name:"parent",items:a,count:a.length},delegate:{save:function(){throw Error("ReadOnly collection")},authenticate:function(){throw Error("ReadOnly collection")}},currentUserId:t.currentUserId})}var u=function(t,e,n,i){window.console&&console.log&&console.log(t+" has been deprecated since "+e+" and will be removed in version "+n+"."+" Use "+i+" instead.")},d=function(e){return t.note=e,UT.Expression._callAPI("document.setNote",[t.note]),e};this.__defineGetter__("note",function(){return t.note}),this.__defineSetter__("note",function(t){return d(t)});var h=this.context={player:!1,editor:!1,sandbox:!1,thumbnail:!1,privacy:null};"edit"==t.mode?h.editor=!0:"view"==t.mode&&(h.player=!0),t.sandbox===!0&&(h.sandbox=!0),h.privacy=t.documentPrivacy,this.url=t.documentURL;var f=this.node=document.querySelector(".webdoc_expression_wrapper");if(!f)throw Error("Missing wrapper node");var p=function(t,e){"function"==typeof t&&(e=t,t={}),UT.Expression._callAPI("document.textInput",[t.value||null,t.max||null,t.multiline||!1],e)},v=function(t,e){UT.Expression._callAPI("medias.openImageChooser",[t],function(t){if(null===t)return e(null),void 0;var i=new UT.Image;i.init(t),e.call(n,i)})},m=function(t,e){UT.Expression._callAPI("medias.openSoundChooser",[t],function(t){if(null===t)return e(null),void 0;var i=new UT.Sound(t);e.call(n,i)}),UT.Expression._callAPI("medias.openSoundChooser",[t],e)},g=function(t,e){UT.Expression._callAPI("medias.openVideoChooser",[t],function(t){if(null===t)return e(null),void 0;var i=new UT.Video(t);e.call(n,i)})},y=function(t,e){t.image.descriptor&&(t.image=t.image.descriptor),UT.Expression._callAPI("medias.crop",[t],function(i){var r=null;t.image.init?(t.image.init(i),r=t.image):(r=new UT.Image,r.init(i)),e.call(n,r)})},C={text:p,image:v,sound:m,video:g,crop:y},T=this.fire=function(t){var e,i,r,s,a,c,l=o[t],u=[];if(l){switch(s=Array.prototype.slice.call(arguments,1),a=0!==s.length?s[0]:n,t){case"scrollChanged":T.apply(this,["scroll"].concat(s))}for(l=l.slice(0),e=l.length,i=-1;e>++i;)r=l[i],c=r.apply(a,s),c&&"function"==typeof c.then&&u.push(c);var d="after"+t.charAt(0).toUpperCase()+t.slice(1);u.length>0?when.all(u).then(function(){T(d)}):T(d)}},k=this.on=function(t,e){var n=o[t]||(o[t]=[]);"function"==typeof e&&n.push(e)};this.off=function(t,e){var n,i=o[t];if(i){if(!e)return delete o[t],void 0;for(n=i?i.indexOf(e):-1;-1!==n;)i.splice(n,1),n=i.indexOf(e)}},this.valid=function(e){return void 0!==e&&e!=t.readyToPost&&(t.readyToPost=!!e,UT.Expression._callAPI("document.readyToPost",[t.readyToPost])),t.readyToPost},this.scollChanged=function(t){u("post.scrollChanged","0.7.0","1.0.0",'post.on("scroll", callback)'),k("scrollChanged",t)},this.imageAdded=function(t){k("imageAdded",t)},this.dialog=function(t,e,n){if(void 0===n&&"function"==typeof e&&(n=e,e={}),!C[t])throw Error("InvalidArgument","unknown dialog type "+t);C[t](e,n)},this.resize=function(t){u("post.resize()","0.8.0","1.0.0","post.size(sizeInfo)"),E(t)};var E=this.size=function(t){if(t){var e;return"number"==typeof t?e=t:t&&"auto"==t?e=f.offsetHeight:t&&t.height&&(e="string"==typeof t.height&&t.height.match&&t.height.match(/^[0-9]+px$/)?t.height.substring(0,t.height.length-2):t.height),UT.Expression._callAPI("container.resizeHeight",[e]),this}return{width:i.width,height:i.height}};this.scroll=function(t,e){UT.Expression._callAPI("container.scroll",[t.scrollTop||t.scrollBottom,t.scrollTop?"top":"bottom"],e)},this.pushNavigation=function(t,e){UT.Expression._callAPI("container.pushNavigation",[t],e)},this.popNavigation=function(){UT.Expression._callAPI("container.popNavigation")},this.queueUp=function(t,e){return void 0!==r[t]?(e(r[t]),this):(r[t]=-1,UT.Expression._callAPI("document.queueUp",[t],function(n){r[t]=n,e(n)}),this)},this.navigate=function(t){var e={};arguments.length>=2?e=arguments[1]:1===arguments.length&&(e=t,t="browse");var n={app:t,parameters:e};UT.Expression._callAPI("container.navigate",[n])};var U=this.collection=function(t){return"parent"==t?e||null:s.get(t)};this.save=function(){s.each(function(t){t.save()})},this.getUserData=function(t){u("post.getUserData()","0.7.4","1.0.0",'post.users("current", callback)'),I("current",t)};var I=this.users=function(t,e){if("function"==typeof t&&(e=t,t="current"),"current"===t)UT.Expression._callAPI("document.getUserData",[],function(t){var n=t?new UT.User(t):null;e(n,null)});else if("[object Array]"===Object.prototype.toString.call(t)){for(var n=[],i=0;t.length>i;i++)t[i]._key&&n.push(t[i]._key);UT.Expression._callAPI("document.users",[n],function(n){for(var i=[],r=[],o=0;t.length>o;o++)for(var s=0;n.length>s;s++)if(t[o]._key==n[s].uuid){i.push(new UT.User(n[s])),r.push(t[o]);break}e(i,r)})}else UT.Expression._callAPI("document.users",[[t._key]],function(n){var i=n[0];i?e(new UT.User(i),t):e(null,null)})};this.isOwner=function(e){return e.uuid==t.postUserId},this.isCurrentUser=function(e){return e.uuid==t.currentUserId};var w=function(){i.width=window.innerWidth,i.height=window.innerHeight};this.storage=U("default"),window.addEventListener("resize",function(){w(),n.fire("resize",new UT.ResizeEvent(i.width,i.height))},!1),w()}}(),UT.Image=function(t){this.url="",this.info={},this.type="image",this.crop=function(t,e){UT.Expression._callAPI("medias.recrop",[{size:t,image:this.descriptor}],function(t){this.init(t),e.call(this,this)}.bind(this))},this.autocrop=function(t,e,n){UT.Expression._callAPI("medias.crop",[{size:{width:t,height:e,auto:!0},image:this.descriptor}],function(t){this.init(t),n.call(this,this)}.bind(this))},this.filter=function(t,e){UT.Expression._callAPI("medias.applyFilter",[{filter:t,image:this.descriptor}],function(t){this.init(t),e.call(this,this)}.bind(this))},this.editable=function(t){UT.Expression._callAPI("medias.getEditableImage",[this.url],function(e){this.url=e,t.call(this,this)}.bind(this))},this.marshall=function(){return this.descriptor._type="image",this.descriptor},this.init=function(t){"string"==typeof t?(this.url=t,this.descriptor={},this.descriptor.url=t,this.descriptor._type="image"):(this.url=t.url,this.descriptor=t,this.info=t.info,t.center&&(this.info.crop=t.center))},this.descriptor={},t&&this.init(t)},UT.Video=function(t){function e(t){this.url=t.url,n=t}this.url="",this.type="video",this.marshall=function(){return n.url=this.url,n._type="video",n};var n={};e.call(this,t)},UT.Sound=function(t){function e(t){n=t,this.service=t.service,this.url=t.url,this.title=t.title,this.artist=t.artist,this.cover=t.cover,this.artistCover=t.artistCover,this.soundCover=t.soundCover,this.waveFormImage=t.waveFormImage,this.link=t.link,this.appData=t.appData}this.service="",this.url="",this.title="",this.artist="",this.cover="",this.artistCover="",this.soundCover="",this.waveFormImage="",this.link="",this.appData={},this.marshall=function(){return{_type:"sound",service:this.service,url:this.url,title:this.title,artist:this.artist,cover:this.cover,artistCover:this.artistCover,soundCover:this.soundCover,waveFormImage:this.waveFormImage,link:this.link,appData:this.appData}};var n={};e.call(this,t)},function(){UT.ResizeEvent=function(t,e){this.height=e,this.width=t}}(),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,e){"use strict";var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},FastClick.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},FastClick.prototype.updateScrollParent=function(t){"use strict";var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){"use strict";var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,200>t.timeStamp-this.lastClickTime&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0];return Math.abs(e.pageX-this.touchStartX)>10||Math.abs(e.pageY-this.touchStartY)>10?!0:!1},FastClick.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){"use strict";var e,n,i,r,o,s=this.targetElement;if(this.touchHasMoved(t)&&(this.trackingClick=!1,this.targetElement=null),!this.trackingClick)return!0;if(200>t.timeStamp-this.lastClickTime)return this.cancelNextClick=!0,!0;if(this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=t.changedTouches[0],s=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)),i=s.tagName.toLowerCase(),"label"===i){if(e=this.findControl(s)){if(this.focus(s),this.deviceIsAndroid)return!1;s=e}}else if(this.needsFocus(s))return t.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(s),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,t.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(r=s.fastClickScrollParent,r&&r.fastClickLastScrollTop!==r.scrollTop)?!0:(this.needsClick(s)||(t.preventDefault(),this.sendClick(s,t)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){"use strict";return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){"use strict";var e;if(window.ontouchstart===void 0)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]"),e&&-1!==e.content.indexOf("user-scalable=no"))return!0}return"none"===t.style.msTouchAction?!0:!1},FastClick.attach=function(t){"use strict";return new FastClick(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,("ontouchstart"in window||"onmsgesturechange"in window)&&(document.querySelector("html").className=document.querySelector("html").className+" touch",FastClick!==void 0&&window.addEventListener("load",function(){new FastClick(document.body)},!1)),window.addEventListener("message",function(t){try{msgObj=JSON.parse(t.data)}catch(e){console&&console.error&&console.error("received invalid message",t.data,e.message),msgObj={}}UT.Expression._dispatch(msgObj)},!1);