function FastClick(t){"use strict";var e,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(i,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(i,arguments)},FastClick.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var s=Node.prototype.removeEventListener;"click"===e?s.call(t,e,i.hijacked||i,n):s.call(t,e,i,n)},t.addEventListener=function(e,i,n){var s=Node.prototype.addEventListener;"click"===e?s.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):s.call(t,e,i,n)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}function loadJPlayer(){(function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):t.jQuery?e(t.jQuery):e(t.Zepto)})(this,function(t,e){t.fn.jPlayer=function(i){var n="string"==typeof i,s=Array.prototype.slice.call(arguments,1),r=this;return i=!n&&s.length?t.extend.apply(null,[!0,i].concat(s)):i,n&&"_"===i.charAt(0)?r:(n?this.each(function(){var n=t(this).data("jPlayer"),o=n&&t.isFunction(n[i])?n[i].apply(n,s):n;return o!==n&&o!==e?(r=o,!1):void 0}):this.each(function(){var e=t(this).data("jPlayer");e?e.option(i||{}):t(this).data("jPlayer",new t.jPlayer(i,this))}),r)},t.jPlayer=function(e,i){if(arguments.length){this.element=t(i),this.options=t.extend(!0,{},this.options,e);var n=this;this.element.bind("remove.jPlayer",function(){n.destroy()}),this._init()}},"function"!=typeof t.fn.stop&&(t.fn.stop=function(){}),t.jPlayer.emulateMethods="load play pause",t.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",t.jPlayer.emulateOptions="muted volume",t.jPlayer.reservedEvent="ready flashreset resize repeat error warning",t.jPlayer.event={},t.each("ready flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){t.jPlayer.event[this]="jPlayer_"+this}),t.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata loadeddata canplay canplaythrough ratechange".split(" "),t.jPlayer.pause=function(){t.each(t.jPlayer.prototype.instances,function(t,e){e.data("jPlayer").status.srcSet&&e.jPlayer("pause")})},t.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var i=function(){this.init()};i.prototype={init:function(){this.options={timeFormat:t.jPlayer.timeFormat}},time:function(t){var e=new Date(1e3*(t&&"number"==typeof t?t:0)),i=e.getUTCHours();return t=this.options.timeFormat.showHour?e.getUTCMinutes():e.getUTCMinutes()+60*i,e=this.options.timeFormat.showMin?e.getUTCSeconds():e.getUTCSeconds()+60*t,i=this.options.timeFormat.padHour&&10>i?"0"+i:i,t=this.options.timeFormat.padMin&&10>t?"0"+t:t,e=this.options.timeFormat.padSec&&10>e?"0"+e:e,i=""+(this.options.timeFormat.showHour?i+this.options.timeFormat.sepHour:""),i+=this.options.timeFormat.showMin?t+this.options.timeFormat.sepMin:"",i+=this.options.timeFormat.showSec?e+this.options.timeFormat.sepSec:""}};var n=new i;t.jPlayer.convertTime=function(t){return n.time(t)},t.jPlayer.uaBrowser=function(t){t=t.toLowerCase();var e=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(msie) ([\w.]+)/,n=/(mozilla)(?:.*? rv:([\w.]+))?/;return t=/(webkit)[ \/]([\w.]+)/.exec(t)||e.exec(t)||i.exec(t)||0>t.indexOf("compatible")&&n.exec(t)||[],{browser:t[1]||"",version:t[2]||"0"}},t.jPlayer.uaPlatform=function(t){var e=t.toLowerCase(),i=/(android)/,n=/(mobile)/;return t=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(e)||[],e=/(ipad|playbook)/.exec(e)||!n.exec(e)&&i.exec(e)||[],t[1]&&(t[1]=t[1].replace(/\s/g,"_")),{platform:t[1]||"",tablet:e[1]||""}},t.jPlayer.browser={},t.jPlayer.platform={};var s=t.jPlayer.uaBrowser(navigator.userAgent);s.browser&&(t.jPlayer.browser[s.browser]=!0,t.jPlayer.browser.version=s.version),s=t.jPlayer.uaPlatform(navigator.userAgent),s.platform&&(t.jPlayer.platform[s.platform]=!0,t.jPlayer.platform.mobile=!s.tablet,t.jPlayer.platform.tablet=!!s.tablet),t.jPlayer.getDocMode=function(){var e;return t.jPlayer.browser.msie&&(document.documentMode?e=document.documentMode:(e=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(e=7))),e},t.jPlayer.browser.documentMode=t.jPlayer.getDocMode(),t.jPlayer.nativeFeatures={init:function(){var t,e,i=document,n=i.createElement("video"),s={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" ")},r=["w3c","moz","webkit","webkitVideo"];for(this.fullscreen=n={support:{w3c:!!i[s.w3c[0]],moz:!!i[s.moz[0]],webkit:"function"==typeof i[s.webkit[3]],webkitVideo:"function"==typeof n[s.webkitVideo[2]]},used:{}},t=0,e=r.length;e>t;t++){var o=r[t];if(n.support[o]){n.spec=o,n.used[o]=!0;break}}if(n.spec){var a=s[n.spec];n.api={fullscreenEnabled:!0,fullscreenElement:function(t){return t=t?t:i,t[a[1]]},requestFullscreen:function(t){return t[a[2]]()},exitFullscreen:function(t){return t=t?t:i,t[a[3]]()}},n.event={fullscreenchange:a[4],fullscreenerror:a[5]}}else n.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},n.event={}}},t.jPlayer.nativeFeatures.init(),t.jPlayer.focus=null,t.jPlayer.keyIgnoreElementNames="INPUT TEXTAREA";var r=function(e){var i,n=t.jPlayer.focus;n&&(t.each(t.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(t,n){return e.target.nodeName.toUpperCase()===n.toUpperCase()?(i=!0,!1):void 0}),i||t.each(n.options.keyBindings,function(i,s){return s&&e.which===s.key&&t.isFunction(s.fn)?(e.preventDefault(),s.fn(n),!1):void 0}))};t.jPlayer.keys=function(e){t(document.documentElement).unbind("keydown.jPlayer"),e&&t(document.documentElement).bind("keydown.jPlayer",r)},t.jPlayer.keys(!0),t.jPlayer.prototype={count:0,version:{script:"2.4.0",needFlash:"2.4.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:!1,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(e){e.jPlayer.options.loop?t(this).unbind(".jPlayerRepeat").bind(t.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){t(this).jPlayer("play")}):t(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:32,fn:function(t){t.status.paused?t.play():t.pause()}},fullScreen:{key:13,fn:function(t){(t.status.video||t.options.audioFullScreen)&&t._setOption("fullScreen",!t.options.fullScreen)}},muted:{key:8,fn:function(t){t._muted(!t.options.muted)}},volumeUp:{key:38,fn:function(t){t.volume(t.options.volume+.1)}},volumeDown:{key:40,fn:function(t){t.volume(t.options.volume-.1)}}},verticalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var i=this;if(this.element.empty(),this.status=t.extend({},this.status),this.internal=t.extend({},this.internal),this.options.timeFormat=t.extend({},t.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=t.jPlayer.platform.ipad||t.jPlayer.platform.iphone||t.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!t.jPlayer.focus&&(t.jPlayer.focus=this),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),t.each(this.options.supplied.toLowerCase().split(","),function(e,n){var s=n.replace(/^\s+|\s+$/g,"");if(i.format[s]){var r=!1;t.each(i.formats,function(t,e){return s===e?(r=!0,!1):void 0}),r||i.formats.push(s)}}),t.each(this.options.solution.toLowerCase().split(","),function(e,n){var s=n.replace(/^\s+|\s+$/g,"");if(i.solution[s]){var r=!1;t.each(i.solutions,function(t,e){return s===e?(r=!0,!1):void 0}),r||i.solutions.push(s)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=t.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=t.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:e}),this.internal.video=t.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e}),this.internal.flash=t.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf":"")}),this.internal.poster=t.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e}),t.each(t.jPlayer.event,function(t,n){i.options[t]!==e&&(i.element.bind(n+".jPlayer",i.options[t]),i.options[t]=e)}),this.require.audio=!1,this.require.video=!1,t.each(this.formats,function(t,e){i.require[i.format[e].media]=!0}),this.options=this.require.video?t.extend(!0,{},this.optionsVideo,this.options):t.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),t.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!i.status.video||i.status.waitForPlay)&&i.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=t("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){i._trigger(t.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.flash.canPlay={},t.each(this.formats,function(t,e){i.html.canPlay[e]=i.html[i.format[e].media].available&&""!==i.htmlElement[i.format[e].media].canPlayType(i.format[e].codec),i.flash.canPlay[e]=i.format[e].flashCanPlay&&i.flash.available}),this.html.desired=!1,this.flash.desired=!1,t.each(this.solutions,function(e,n){if(0===e)i[n].desired=!0;else{var s=!1,r=!1;t.each(i.formats,function(t,e){i[i.solutions[0]].canPlay[e]&&("video"===i.format[e].media?r=!0:s=!0)}),i[n].desired=i.require.audio&&!s||i.require.video&&!r}}),this.html.support={},this.flash.support={},t.each(this.formats,function(t,e){i.html.support[e]=i.html.canPlay[e]&&i.html.desired,i.flash.support[e]=i.flash.canPlay[e]&&i.flash.desired}),this.html.used=!1,this.flash.used=!1,t.each(this.solutions,function(e,n){t.each(i.formats,function(t,e){return i[n].support[e]?(i[n].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:t.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:t.jPlayer.errorMsg.NO_SOLUTION,hint:t.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var n,s="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(t.jPlayer.browser.msie&&(9>Number(t.jPlayer.browser.version)||9>t.jPlayer.browser.documentMode)){s=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+s+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'],n=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var r=0;s.length>r;r++)n.appendChild(document.createElement(s[r]))}else r=function(t,e,i){var n=document.createElement("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)},n=document.createElement("object"),n.setAttribute("id",this.internal.flash.id),n.setAttribute("name",this.internal.flash.id),n.setAttribute("data",this.internal.flash.swf),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("tabindex","-1"),r(n,"flashvars",s),r(n,"allowscriptaccess","always"),r(n,"bgcolor",this.options.backgroundColor),r(n,"wmode",this.options.wmode);this.element.append(n),this.internal.flash.jq=t(n)}this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=t("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=t("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){i._trigger(t.jPlayer.event.click)}))),this.options.emulateHtml&&this._emulateHtmlBridge(),this.html.used&&!this.flash.used&&setTimeout(function(){i.internal.ready=!0,i.version.flash="n/a",i._trigger(t.jPlayer.event.repeat),i._trigger(t.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),t.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),t.each(this.css.jq,function(t,e){e.length&&e.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===t.jPlayer.focus&&(t.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(t){try{return t.canPlayType(this.format.mp3.codec),!0}catch(e){return!1}},_uaBlocklist:function(e){var i=navigator.userAgent.toLowerCase(),n=!1;return t.each(e,function(t,e){return e&&e.test(i)?(n=!0,!1):void 0}),n},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(e,i){var n=this;e.preload=this.options.preload,e.muted=this.options.muted,e.volume=this.options.volume,e.addEventListener("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.progress))},!1),e.addEventListener("timeupdate",function(){i.gate&&(n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.timeupdate))},!1),e.addEventListener("durationchange",function(){i.gate&&(n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.durationchange))},!1),e.addEventListener("play",function(){i.gate&&(n._updateButtons(!0),n._html_checkWaitForPlay(),n._trigger(t.jPlayer.event.play))},!1),e.addEventListener("playing",function(){i.gate&&(n._updateButtons(!0),n._seeked(),n._trigger(t.jPlayer.event.playing))},!1),e.addEventListener("pause",function(){i.gate&&(n._updateButtons(!1),n._trigger(t.jPlayer.event.pause))},!1),e.addEventListener("waiting",function(){i.gate&&(n._seeking(),n._trigger(t.jPlayer.event.waiting))},!1),e.addEventListener("seeking",function(){i.gate&&(n._seeking(),n._trigger(t.jPlayer.event.seeking))},!1),e.addEventListener("seeked",function(){i.gate&&(n._seeked(),n._trigger(t.jPlayer.event.seeked))},!1),e.addEventListener("volumechange",function(){i.gate&&(n.options.volume=e.volume,n.options.muted=e.muted,n._updateMute(),n._updateVolume(),n._trigger(t.jPlayer.event.volumechange))},!1),e.addEventListener("suspend",function(){i.gate&&(n._seeked(),n._trigger(t.jPlayer.event.suspend))},!1),e.addEventListener("ended",function(){i.gate&&(t.jPlayer.browser.webkit||(n.htmlElement.media.currentTime=0),n.htmlElement.media.pause(),n._updateButtons(!1),n._getHtmlStatus(e,!0),n._updateInterface(),n._trigger(t.jPlayer.event.ended))},!1),e.addEventListener("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(clearTimeout(n.internal.htmlDlyCmdId),n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:t.jPlayer.error.URL,context:n.status.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL})))},!1),t.each(t.jPlayer.htmlEvent,function(s,r){e.addEventListener(this,function(){i.gate&&n._trigger(t.jPlayer.event[r])},!1)})},_getHtmlStatus:function(t,e){var i=0,n=0,s=0,r=0;isFinite(t.duration)&&(this.status.duration=t.duration),i=t.currentTime,n=this.status.duration>0?100*i/this.status.duration:0,"object"==typeof t.seekable&&t.seekable.length>0?(s=this.status.duration>0?100*t.seekable.end(t.seekable.length-1)/this.status.duration:100,r=this.status.duration>0?100*t.currentTime/t.seekable.end(t.seekable.length-1):0):(s=100,r=n),e&&(n=r=i=0),this.status.seekPercent=s,this.status.currentPercentRelative=r,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.videoWidth=t.videoWidth,this.status.videoHeight=t.videoHeight,this.status.readyState=t.readyState,this.status.networkState=t.networkState,this.status.playbackRate=t.playbackRate,this.status.ended=t.ended},_resetStatus:function(){this.status=t.extend({},this.status,t.jPlayer.prototype.status)},_trigger:function(e,i,n){e=t.Event(e),e.jPlayer={},e.jPlayer.version=t.extend({},this.version),e.jPlayer.options=t.extend(!0,{},this.options),e.jPlayer.status=t.extend(!0,{},this.status),e.jPlayer.html=t.extend(!0,{},this.html),e.jPlayer.flash=t.extend(!0,{},this.flash),i&&(e.jPlayer.error=t.extend({},i)),n&&(e.jPlayer.warning=t.extend({},n)),this.element.trigger(e)},jPlayerFlashEvent:function(e,i){if(e===t.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var n=this.status.currentTime,s=this.status.paused;this.setMedia(this.status.media),n>0&&(s?this.pause(n):this.play(n))}this._trigger(t.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=i.version,this.version.needFlash!==this.version.flash&&this._error({type:t.jPlayer.error.VERSION,context:this.version.flash,message:t.jPlayer.errorMsg.VERSION+this.version.flash,hint:t.jPlayer.errorHint.VERSION}),this._trigger(t.jPlayer.event.repeat),this._trigger(e);if(this.flash.gate)switch(e){case t.jPlayer.event.progress:this._getFlashStatus(i),this._updateInterface(),this._trigger(e);break;case t.jPlayer.event.timeupdate:this._getFlashStatus(i),this._updateInterface(),this._trigger(e);break;case t.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(e);break;case t.jPlayer.event.pause:this._updateButtons(!1),this._trigger(e);break;case t.jPlayer.event.ended:this._updateButtons(!1),this._trigger(e);break;case t.jPlayer.event.click:this._trigger(e);break;case t.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:t.jPlayer.error.URL,context:i.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL});break;case t.jPlayer.event.seeking:this._seeking(),this._trigger(e);break;case t.jPlayer.event.seeked:this._seeked(),this._trigger(e);break;case t.jPlayer.event.ready:break;default:this._trigger(e)}return!1},_getFlashStatus:function(t){this.status.seekPercent=t.seekPercent,this.status.currentPercentRelative=t.currentPercentRelative,this.status.currentPercentAbsolute=t.currentPercentAbsolute,this.status.currentTime=t.currentTime,this.status.duration=t.duration,this.status.videoWidth=t.videoWidth,this.status.videoHeight=t.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(t){t===e?t=!this.status.paused:this.status.paused=!t,this.css.jq.play.length&&this.css.jq.pause.length&&(t?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%")),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)),this.css.jq.duration.length&&this.css.jq.duration.text(this._convertTime(this.status.duration))},_convertTime:i.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.flash.active=!1},setMedia:function(e){var i=this,n=!1,s=this.status.media.poster!==e.poster;this._resetMedia(),this._resetGate(),this._resetActive(),t.each(this.formats,function(s,r){var o="video"===i.format[r].media;return t.each(i.solutions,function(t,s){if(i[s].support[r]&&i._validString(e[r])){var a="html"===s;return o?(a?(i.html.video.gate=!0,i._html_setVideo(e),i.html.active=!0):(i.flash.gate=!0,i._flash_setVideo(e),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i.status.video=!0):(a?(i.html.audio.gate=!0,i._html_setAudio(e),i.html.active=!0):(i.flash.gate=!0,i._flash_setAudio(e),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.hide(),i.status.video=!1),n=!0,!1}}),n?!1:void 0}),n?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(e.poster)||(s?this.htmlElement.poster.src=e.poster:this.internal.poster.jq.show()),this.status.srcSet=!0,this.status.media=t.extend({},e),this._updateButtons(!1),this._updateInterface()):this._error({type:t.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:t.jPlayer.errorMsg.NO_SUPPORT,hint:t.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(t.jPlayer.focus=this)},play:function(t){t="number"==typeof t?t:0/0,this.status.srcSet?(this.focus(),this.html.active?this._html_play(t):this.flash.active&&this._flash_play(t)):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(t){t="number"==typeof t?t:0/0,this.status.srcSet?this.html.active?this._html_pause(t):this.flash.active&&this._flash_pause(t):this._urlNotSetError("pause")},pauseOthers:function(){var e=this;t.each(this.instances,function(t,i){e.element!==i&&i.data("jPlayer").status.srcSet&&i.jPlayer("pause")})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(t){t=this._limitValue(t,0,100),this.status.srcSet?this.html.active?this._html_playHead(t):this.flash.active&&this._flash_playHead(t):this._urlNotSetError("playHead")},_muted:function(e){this.options.muted=e,this.html.used&&this._html_mute(e),this.flash.used&&this._flash_mute(e),!this.html.video.gate&&!this.html.audio.gate&&(this._updateMute(e),this._updateVolume(this.options.volume),this._trigger(t.jPlayer.event.volumechange))},mute:function(t){t=t===e?!0:!!t,this._muted(t)},unmute:function(t){t=t===e?!0:!!t,this._muted(!t)},_updateMute:function(t){t===e&&(t=this.options.muted),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):t?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(e){e=this._limitValue(e,0,1),this.options.volume=e,this.html.used&&this._html_volume(e),this.flash.used&&this._flash_volume(e),!this.html.video.gate&&!this.html.audio.gate&&(this._updateVolume(e),this._trigger(t.jPlayer.event.volumechange))},volumeBar:function(e){if(this.css.jq.volumeBar.length){var i=t(e.currentTarget),n=i.offset(),s=e.pageX-n.left,r=i.width();e=i.height()-e.pageY+n.top,i=i.height(),this.options.verticalVolume?this.volume(e/i):this.volume(s/r)}this.options.muted&&this._muted(!1)},volumeBarValue:function(){},_updateVolume:function(t){t===e&&(t=this.options.volume),t=this.options.muted?0:t,this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*t+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(e){var i=this;
this.options.cssSelectorAncestor=e,this._removeUiClass(),this.ancestorJq=e?t(e):[],e&&1!==this.ancestorJq.length&&this._warning({type:t.jPlayer.warning.CSS_SELECTOR_COUNT,context:e,message:t.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:t.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),t.each(this.options.cssSelector,function(t,e){i._cssSelector(t,e)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(e,i){var n=this;"string"==typeof i?t.jPlayer.prototype.options.cssSelector[e]?(this.css.jq[e]&&this.css.jq[e].length&&this.css.jq[e].unbind(".jPlayer"),this.options.cssSelector[e]=i,this.css.cs[e]=this.options.cssSelectorAncestor+" "+i,this.css.jq[e]=i?t(this.css.cs[e]):[],this.css.jq[e].length&&this.css.jq[e].bind("click.jPlayer",function(i){i.preventDefault(),n[e](i),t(this).blur()}),i&&1!==this.css.jq[e].length&&this._warning({type:t.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[e],message:t.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[e].length+" found for "+e+" method.",hint:t.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:t.jPlayer.warning.CSS_SELECTOR_METHOD,context:e,message:t.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:t.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:t.jPlayer.warning.CSS_SELECTOR_STRING,context:i,message:t.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:t.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(e){if(this.css.jq.seekBar.length){var i=t(e.currentTarget),n=i.offset();e=e.pageX-n.left,i=i.width(),this.playHead(100*e/i)}},playBar:function(){},repeat:function(){this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(e){this.options.loop!==e&&(this.options.loop=e,this._updateButtons(),this._trigger(t.jPlayer.event.repeat))},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},option:function(i,n){var s=i;if(0===arguments.length)return t.extend(!0,{},this.options);if("string"==typeof i){var r=i.split(".");if(n===e){for(var s=t.extend(!0,{},this.options),o=0;r.length>o;o++){if(s[r[o]]===e)return this._warning({type:t.jPlayer.warning.OPTION_KEY,context:i,message:t.jPlayer.warningMsg.OPTION_KEY,hint:t.jPlayer.warningHint.OPTION_KEY}),e;s=s[r[o]]}return s}for(var o=s={},a=0;r.length>a;a++)r.length-1>a?(o[r[a]]={},o=o[r[a]]):o[r[a]]=n}return this._setOptions(s),this},_setOptions:function(e){var i=this;return t.each(e,function(t,e){i._setOption(t,e)}),this},_setOption:function(e,i){var n=this;switch(e){case"volume":this.volume(i);break;case"muted":this._muted(i);break;case"cssSelectorAncestor":this._cssSelectorAncestor(i);break;case"cssSelector":t.each(i,function(t,e){n._cssSelector(t,e)});break;case"fullScreen":if(this.options[e]!==i){var s=t.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!s||s&&!this.status.waitForPlay)&&(s||(this.options[e]=i),i?this._requestFullscreen():this._exitFullscreen(),s||this._setOption("fullWindow",i))}break;case"fullWindow":this.options[e]!==i&&(this._removeUiClass(),this.options[e]=i,this._refreshSize());break;case"size":!this.options.fullWindow&&this.options[e].cssClass!==i.cssClass&&this._removeUiClass(),this.options[e]=t.extend({},this.options[e],i),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[e].cssClass!==i.cssClass&&this._removeUiClass(),this.options[e]=t.extend({},this.options[e],i),this._refreshSize();break;case"autohide":this.options[e]=t.extend({},this.options[e],i),this._updateAutohide();break;case"loop":this._loop(i);break;case"nativeVideoControls":this.options[e]=t.extend({},this.options[e],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[e]=t.extend({},this.options[e],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[e]=t.extend({},this.options[e],i),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[e]!==i&&((this.options[e]=i)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[e]=t.extend({},this.options[e],i);break;case"keyEnabled":this.options[e]=i,!i&&this===t.jPlayer.focus&&(t.jPlayer.focus=null);break;case"keyBindings":this.options[e]=t.extend(!0,{},this.options[e],i);break;case"audioFullScreen":this.options[e]=i}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(t.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var t=this,e=function(){t.css.jq.gui.fadeIn(t.options.autohide.fadeIn,function(){clearTimeout(t.internal.autohideId),t.internal.autohideId=setTimeout(function(){t.css.jq.gui.fadeOut(t.options.autohide.fadeOut)},t.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",e),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",e),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(){this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var e=this,i=t.jPlayer.nativeFeatures.fullscreen;i.api.fullscreenEnabled&&i.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){e._fullscreenchange()}),document.addEventListener(i.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var e=t.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.addEventListener(e.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!t.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var e=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],i=t.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(e=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.requestFullscreen(e)},_exitFullscreen:function(){var e,i=t.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(e=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.exitFullscreen(e)},_html_initMedia:function(e){var i=t(this.htmlElement.media).empty();t.each(e.track||[],function(t,e){var n=document.createElement("track");n.setAttribute("kind",e.kind?e.kind:""),n.setAttribute("src",e.src?e.src:""),n.setAttribute("srclang",e.srclang?e.srclang:""),n.setAttribute("label",e.label?e.label:""),e.def&&n.setAttribute("default",e.def),i.append(n)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(t.jPlayer.event.timeupdate)},_html_setFormat:function(e){var i=this;t.each(this.formats,function(t,n){return i.html.support[n]&&e[n]?(i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0})},_html_setAudio:function(t){this._html_setFormat(t),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(t)},_html_setVideo:function(t){this._html_setFormat(t),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(t.poster)?t.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(t)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id===this.internal.video.id&&!this.status.nativeVideoControls&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(t){var e=this,i=this.htmlElement.media;if(this._html_load(),isNaN(t))i.play();else{this.internal.cmdsIgnored&&i.play();try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=t,i.play()}catch(n){return this.internal.htmlDlyCmdId=setTimeout(function(){e.play(t)},250),void 0}}this._html_checkWaitForPlay()},_html_pause:function(t){var e=this,i=this.htmlElement.media;if(t>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),i.pause(),!isNaN(t))try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=t}catch(n){return this.internal.htmlDlyCmdId=setTimeout(function(){e.pause(t)},250),void 0}t>0&&this._html_checkWaitForPlay()},_html_playHead:function(t){var e=this,i=this.htmlElement.media;this._html_load();try{if("object"==typeof i.seekable&&i.seekable.length>0)i.currentTime=t*i.seekable.end(i.seekable.length-1)/100;else{if(!(i.duration>0)||isNaN(i.duration))throw"e";i.currentTime=t*i.duration/100}}catch(n){return this.internal.htmlDlyCmdId=setTimeout(function(){e.playHead(t)},250),void 0}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_volume:function(t){this.html.audio.available&&(this.htmlElement.audio.volume=t),this.html.video.available&&(this.htmlElement.video.volume=t)},_html_mute:function(t){this.html.audio.available&&(this.htmlElement.audio.muted=t),this.html.video.available&&(this.htmlElement.video.muted=t)},_flash_setAudio:function(e){var i=this;try{t.each(this.formats,function(t,n){if(i.flash.support[n]&&e[n]){switch(n){case"m4a":case"fla":i._getMovie().fl_setAudio_m4a(e[n]);break;case"mp3":i._getMovie().fl_setAudio_mp3(e[n]);break;case"rtmpa":i._getMovie().fl_setAudio_rtmp(e[n])}return i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_setVideo:function(e){var i=this;try{t.each(this.formats,function(t,n){if(i.flash.support[n]&&e[n]){switch(n){case"m4v":case"flv":i._getMovie().fl_setVideo_m4v(e[n]);break;case"rtmpv":i._getMovie().fl_setVideo_rtmp(e[n])}return i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(0/0)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(t){this._flashError(t)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(t){this._flashError(t)}this.status.waitForLoad=!1},_flash_play:function(t){try{this._getMovie().fl_play(t)}catch(e){this._flashError(e)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(t){try{this._getMovie().fl_pause(t)}catch(e){this._flashError(e)}t>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(t){try{this._getMovie().fl_play_head(t)}catch(e){this._flashError(e)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(t){try{this._getMovie().fl_volume(t)}catch(e){this._flashError(e)}},_flash_mute:function(t){try{this._getMovie().fl_mute(t)}catch(e){this._flashError(e)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var t,e=0;if(window.ActiveXObject)try{if(t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var i=t.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),e=parseInt(i[0],10)+"."+parseInt(i[1],10))}}catch(n){}else navigator.plugins&&navigator.mimeTypes.length>0&&(t=navigator.plugins["Shockwave Flash"])&&(e=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*e},_checkForFlash:function(t){var e=!1;return this._getFlashPluginVersion()>=t&&(e=!0),e},_validString:function(t){return t&&"string"==typeof t},_limitValue:function(t,e,i){return e>t?e:t>i?i:t},_urlNotSetError:function(e){this._error({type:t.jPlayer.error.URL_NOT_SET,context:e,message:t.jPlayer.errorMsg.URL_NOT_SET,hint:t.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(e){var i;i=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:t.jPlayer.error[i],context:this.internal.flash.swf,message:t.jPlayer.errorMsg[i]+e.message,hint:t.jPlayer.errorHint[i]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(e){this._trigger(t.jPlayer.event.error,e),this.options.errorAlerts&&this._alert("Error!"+(e.message?"\n\n"+e.message:"")+(e.hint?"\n\n"+e.hint:"")+"\n\nContext: "+e.context)},_warning:function(i){this._trigger(t.jPlayer.event.warning,e,i),this.options.warningAlerts&&this._alert("Warning!"+(i.message?"\n\n"+i.message:"")+(i.hint?"\n\n"+i.hint:"")+"\n\nContext: "+i.context)},_alert:function(t){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+t)},_emulateHtmlBridge:function(){var e=this;t.each(t.jPlayer.emulateMethods.split(/\s+/g),function(t,i){e.internal.domNode[i]=function(t){e[i](t)}}),t.each(t.jPlayer.event,function(i,n){var s=!0;t.each(t.jPlayer.reservedEvent.split(/\s+/g),function(t,e){return e===i?s=!1:void 0}),s&&e.element.bind(n+".jPlayer.jPlayerHtml",function(){e._emulateHtmlUpdate();var t=document.createEvent("Event");t.initEvent(i,!1,!0),e.internal.domNode.dispatchEvent(t)})})},_emulateHtmlUpdate:function(){var e=this;t.each(t.jPlayer.emulateStatus.split(/\s+/g),function(t,i){e.internal.domNode[i]=e.status[i]}),t.each(t.jPlayer.emulateOptions.split(/\s+/g),function(t,i){e.internal.domNode[i]=e.options[i]})},_destroyHtmlBridge:function(){var e=this;this.element.unbind(".jPlayerHtml"),t.each((t.jPlayer.emulateMethods+" "+t.jPlayer.emulateStatus+" "+t.jPlayer.emulateOptions).split(/\s+/g),function(t,i){delete e.internal.domNode[i]})}},t.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},t.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+t.jPlayer.prototype.version.script+" needs Jplayer.swf version "+t.jPlayer.prototype.version.needFlash+" but found "},t.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},t.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},t.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},t.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})}function loadPaper(){window.paper=new function(){var Base=new function(){function t(t,e,i){if(p)try{return delete t[e],p(t,e,i)}catch(n){}return(i.get||i.set)&&t.__defineGetter__?(i.get&&t.__defineGetter__(e,i.get),i.set&&t.__defineSetter__(e,i.set)):t[e]=i.value,t}function e(t,e){if(f)try{return f(t,e)}catch(i){}var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,writable:!0}:null}function i(i,n,s,o,a,u){function h(r,u,h,p){var u=u||(u=e(n,r))&&(u.get?u:u.value),f="function"==typeof u,g=u,m=a||f?u&&u.get?r in i:i[r]:null;if((h||void 0!==u&&n.hasOwnProperty(r))&&(!a||!m)){if(f){if(m&&/\bthis\.base\b/.test(u)){var v=o&&o[r]==m;g=function(){var i=e(this,"base");t(this,"base",{value:v?o[r]:m,configurable:!0});try{return u.apply(this,arguments)}finally{i?t(this,"base",i):delete this.base}},g.toString=function(){return""+u},g.valueOf=function(){return u.valueOf()}}c&&0===u.length&&(d=r.match(/^(get|is)(([A-Z])(.*))$/))&&c.push([d[3].toLowerCase()+d[4],d[2]])}g&&!f&&g.get||(g={value:g,writable:!0}),(e(i,r)||{configurable:!0}).configurable&&(g.configurable=!0,g.enumerable=s),t(i,r,g)}!p||!f||a&&p[r]||(p[r]=function(t){return t&&i[r].apply(t,l.call(arguments,1))})}var c,d;if(n){c=[];for(var p in n)n.hasOwnProperty(p)&&!r.test(p)&&h(p,null,!0,u);h("toString"),h("valueOf");for(var f=0,g=c&&c.length;g>f;f++)try{var d=c[f],m=d[1];h(d[0],{get:i["get"+m]||i["is"+m],set:i["set"+m]},!0)}catch(v){}}return i}function n(t,e,i,n){try{t&&(n||void 0===n&&u(t)?h:c).call(t,e,i=i||t)}catch(s){if(s!==Base.stop)throw s}return i}function s(t){return n(t,function(t,e){this[e]=t},new t.constructor)}var r=/^(statics|generics|preserve|enumerable|prototype|toString|valueOf)$/,o=Object.prototype,a=o.toString,o=Array.prototype,u=Array.isArray=Array.isArray||function(t){return"[object Array]"===a.call(t)},l=o.slice,h=o.forEach||function(t,e){for(var i=0,n=this.length;n>i;i++)t.call(e,this[i],i,this)},c=function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)},d=Object.create||function(t){return{__proto__:t}},p=Object.defineProperty,f=Object.getOwnPropertyDescriptor;return i(function(){},{inject:function(t){if(t){var e=this.prototype,n=Object.getPrototypeOf(e).constructor,s=t.statics===!0?t:t.statics;s!=t&&i(e,t,t.enumerable,n&&n.prototype,t.preserve,t.generics&&this),i(this,s,!0,n,t.preserve)}for(var r=1,o=arguments.length;o>r;r++)this.inject(arguments[r]);return this},extend:function(){var e=function(){return this.initialize?this.initialize.apply(this,arguments):void 0};return e.prototype=d(this.prototype),e.toString=function(){return""+(this.prototype.initialize||function(){})},t(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),i(e,this,!0),arguments.length?this.inject.apply(e,arguments):e}},!0).inject({inject:function(){for(var t=0,e=arguments.length;e>t;t++)i(this,arguments[t],arguments[t].enumerable);return this},extend:function(){var t=d(this);return t.inject.apply(t,arguments)},each:function(t,e){return n(this,t,e)},clone:function(){return s(this)},statics:{each:n,clone:s,define:t,describe:e,create:function(t){return d(t.prototype)},isPlainObject:function(t){var e=null!==t&&"object"==typeof t&&Object.getPrototypeOf(t);return e&&(e===Object.prototype||e===Base.prototype)},check:function(t){return!(!t&&0!==t)},pick:function(){for(var t=0,e=arguments.length;e>t;t++)if(void 0!==arguments[t])return arguments[t];return null},stop:{}}})};this.Base=Base.inject({generics:!0,clone:function(){return new this.constructor(this)},toString:function(){return null!=this._id?(this._type||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+Base.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?Format.number(t):"string"===i?"'"+t+"'":t))}},[]).join(", ")+" }"},exportJson:function(t){return Base.exportJson(this,t)},toJSON:function(){return Base.serialize(this)},_set:function(t){if(Base.isPlainObject(t)){for(var e in t)t.hasOwnProperty(e)&&e in this&&(this[e]=t[e]);return!0}},statics:{_types:{},_uid:0,extend:function(t){var e=this.base.apply(this,arguments);return t._type&&(Base._types[t._type]=e),e},equals:function(t,e){function i(t,e){for(var i in t)if(t.hasOwnProperty(i)&&e[i]===void 0)return!1;return!0}if(t==e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0,s=t.length;s>n;n++)if(!Base.equals(t[n],e[n]))return!1;return!0}if(t&&"object"==typeof t&&e&&"object"==typeof e){if(!i(t,e)||!i(e,t))return!1;for(var n in t)if(t.hasOwnProperty(n)&&!Base.equals(t[n],e[n]))return!1;return!0}return!1},read:function(t,e,i,n,s){if(this===Base){var r=this.peek(t,e);return t._index++,t._read=1,r}var o=this.prototype,a=o._readIndex,u=e||a&&t._index||0;i||(i=t.length-u);var l=t[u];return l instanceof this||(o._readNull||s)&&null==l&&1>=i?(a&&(t._index=u+1),l&&n?l.clone():l):(l=Base.create(this),a&&(l._read=!0),l=l.initialize.apply(l,u>0||t.length>i?Array.prototype.slice.call(t,u,u+i):t)||l,a&&(t._index=u+l._read,t._read=l._read,delete l._read),l)},peek:function(t,e){return t[t._index=e||t._index||0]},readAll:function(t,e,i){for(var n,s=[],r=e||0,o=t.length;o>r;r++)s.push(Array.isArray(n=t[r])?this.read(n,0,0,i):this.read(t,r,1,i));return s},readNamed:function(t,e){var i=this.getNamed(t,e);return this.read(null!=i?[i]:t)},getNamed:function(t,e){var i=t[0];return void 0===t._hasObject&&(t._hasObject=1===t.length&&Base.isPlainObject(i)),t._hasObject?e?i[e]:i:void 0},hasNamed:function(t,e){return!!this.getNamed(t,e)},serialize:function(t,e,i,n){e=e||{};var s,r=!n;if(r&&(n={length:0,definitions:{},references:{},add:function(t,e){var i="#"+t._id,n=this.references[i];return n||(this.length++,this.definitions[i]=e.call(t),n=this.references[i]=[i]),n}}),t&&t._serialize)s=t._serialize(e,n),t._type&&!i&&s[0]!==t._type&&s.unshift(t._type);else if(Array.isArray(t)){s=[];for(var o=0,a=t.length;a>o;o++)s[o]=Base.serialize(t[o],e,i,n)}else if(Base.isPlainObject(t)){s={};for(var o in t)t.hasOwnProperty(o)&&(s[o]=Base.serialize(t[o],e,i,n))}else s="number"==typeof t?Format.number(t,e.precision):t;return r&&n.length>0?[["dictionary",n.definitions],s]:s},deserialize:function(t,e){var i=t;if(e=e||{},Array.isArray(t)){var n=t[0],s="dictionary"===n;if(!s){if(e.dictionary&&1==t.length&&/^#/.test(n))return e.dictionary[n];n=Base._types[n]}i=[];for(var r=n?1:0,o=t.length;o>r;r++)i.push(Base.deserialize(t[r],e));if(s)e.dictionary=i[0];else if(n){var a=i;i=Base.create(n),i.initialize.apply(i,a)}}else if(Base.isPlainObject(t)){i={};for(var u in t)i[u]=Base.deserialize(t[u],e)}return i},exportJson:function(t,e){return JSON.stringify(Base.serialize(t,e))},importJson:function(t){return Base.deserialize(JSON.parse(t))},splice:function(t,e,i,n){var s=e&&e.length,r=void 0===i;i=r?t.length:i,i>t.length&&(i=t.length);for(var o=0;s>o;o++)e[o]._index=i+o;if(r)return t.push.apply(t,e),[];var a=[i,n];e&&a.push.apply(a,e);for(var u=t.splice.apply(t,a),o=0,l=u.length;l>o;o++)delete u[o]._index;for(var o=i+s,l=t.length;l>o;o++)t[o]._index=o;return u},merge:function(){return Base.each(arguments,function(t){Base.each(t,function(t,e){this[e]=t},this)},new Base,!0)},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var Callback={attach:function(t,e){if("string"!=typeof t)return Base.each(t,function(t,e){this.attach(e,t)},this),void 0;var i=this._eventTypes[t];if(i){var n=this._handlers=this._handlers||{};n=n[t]=n[t]||[],-1==n.indexOf(e)&&(n.push(e),i.install&&1==n.length&&i.install.call(this,t))}},detach:function(t,e){if("string"!=typeof t)return Base.each(t,function(t,e){this.detach(e,t)},this),void 0;var i,n=this._eventTypes[t],s=this._handlers&&this._handlers[t];n&&s&&(!e||-1!=(i=s.indexOf(e))&&1==s.length?(n.uninstall&&n.uninstall.call(this,t),delete this._handlers[t]):-1!=i&&s.splice(i,1))},fire:function(t,e){var i=this._handlers&&this._handlers[t];if(!i)return!1;var n=[].slice.call(arguments,1);return Base.each(i,function(t){t.apply(this,n)===!1&&e&&e.stop&&e.stop()},this),!0},responds:function(t){return!(!this._handlers||!this._handlers[t])},statics:{inject:function(){for(var t=0,e=arguments.length;e>t;t++){var i=arguments[t],n=i._events;if(n){var s={};Base.each(n,function(t,e){var n="string"==typeof t,r=n?t:e,o=Base.capitalize(r),a=r.substring(2).toLowerCase();s[a]=n?{}:t,r="_"+r,i["get"+o]=function(){return this[r]},i["set"+o]=function(t){t?this.attach(a,t):this[r]&&this.detach(a,this[r]),this[r]=t}}),i._eventTypes=s}this.base(i)}return this}}},PaperScope=this.PaperScope=Base.extend({initialize:function(t){if(paper=this,this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=t&&(t.getAttribute("id")||t.src)||"paperscope-"+PaperScope._id++,t&&t.setAttribute("id",this._id),PaperScope._scopes[this._id]=this,!this.support){var e=CanvasProvider.getContext(1,1);PaperScope.prototype.support={nativeDash:"setLineDash"in e||"mozDash"in e||"webkitLineDash"in e},CanvasProvider.release(e)}},version:.8,getView:function(){return this.project&&this.project.view},getTool:function(){return this._tool||(this._tool=new Tool),this._tool},evaluate:function(t){var e=PaperScript.evaluate(t,this);return View.updateFocus(),e},install:function(t){var e=this;Base.each(["project","view","tool"],function(i){Base.define(t,i,{configurable:!0,writable:!0,get:function(){return e[i]}})});for(var i in this)/^(version|_id)/.test(i)||i in t||(t[i]=this[i])},setup:function(t){return paper=this,this.project=new Project(t),this},clear:function(){for(var t=this.projects.length-1;t>=0;t--)this.projects[t].remove();for(var t=this.tools.length-1;t>=0;t--)this.tools[t].remove();for(var t=this.palettes.length-1;t>=0;t--)this.palettes[t].remove()},remove:function(){this.clear(),delete PaperScope._scopes[this._id]},statics:{_scopes:{},_id:0,get:function(t){return"object"==typeof t&&(t=t.getAttribute("id")),this._scopes[t]||null}}}),PaperScopeItem=Base.extend(Callback,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!=this&&t.fire("deactivate"),this._scope[this._reference]=this,this.fire("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null==this._index?!1:(Base.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),Point=this.Point=Base.extend({_type:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t;if("number"===i){var n="number"==typeof e;this.x=t,this.y=n?e:t,this._read&&(this._read=n?2:1)}else"undefined"===i||null===t?(this.x=this.y=0,this._read&&(this._read=null===t?1:0)):(Array.isArray(t)?(this.x=t[0],this.y=t.length>1?t[1]:t[0]):null!=t.x?(this.x=t.x,this.y=t.y):null!=t.width?(this.x=t.width,this.y=t.height):null!=t.angle?(this.x=t.length,this.y=0,this.setAngle(t.angle)):(this.x=this.y=0,this._read&&(this._read=0)),this._read&&(this._read=1))},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return t=Point.read(arguments),this.x==t.x&&this.y==t.y},clone:function(){return Point.create(this.x,this.y)},toString:function(){var t=Format.number;return"{ x: "+t(this.x)+", y: "+t(this.y)+" }"},_serialize:function(t){var e=Format.number,i=t.precision;return[e(this.x,i),e(this.y,i)]},add:function(t){return t=Point.read(arguments),Point.create(this.x+t.x,this.y+t.y)},subtract:function(t){return t=Point.read(arguments),Point.create(this.x-t.x,this.y-t.y)},multiply:function(t){return t=Point.read(arguments),Point.create(this.x*t.x,this.y*t.y)},divide:function(t){return t=Point.read(arguments),Point.create(this.x/t.x,this.y/t.y)},modulo:function(t){return t=Point.read(arguments),Point.create(this.x%t.x,this.y%t.y)},negate:function(){return Point.create(-this.x,-this.y)},transform:function(t){return t?t._transformPoint(this):this},getDistance:function(t,e){t=Point.read(arguments);var i=t.x-this.x,n=t.y-this.y,s=i*i+n*n;return e?s:Math.sqrt(s)},getLength:function(){var t=this.x*this.x+this.y*this.y;return arguments.length&&arguments[0]?t:Math.sqrt(t)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();0==i&&this.getAngle(),this.set(this.x*i,this.y*i)}return this},normalize:function(t){void 0===t&&(t=1);var e=this.getLength(),i=0!=e?t/e:0,n=Point.create(this.x*i,this.y*i);return n._angle=this._angle,n},getAngle:function(){return 180*this.getAngleInRadians(arguments[0])/Math.PI},setAngle:function(t){if(t=this._angle=t*Math.PI/180,!this.isZero()){var e=this.getLength();this.set(Math.cos(t)*e,Math.sin(t)*e)}return this},getAngleInRadians:function(){if(void 0===arguments[0])return null==this._angle&&(this._angle=Math.atan2(this.y,this.x)),this._angle;var t=Point.read(arguments),e=this.getLength()*t.getLength();return Numerical.isZero(e)?0/0:Math.acos(this.dot(t)/e)},getAngleInDegrees:function(){return this.getAngle(arguments[0])},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3},getDirectedAngle:function(t){return t=Point.read(arguments),180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,n=Math.sin(t),s=Math.cos(t);return i=Point.create(i.x*s-i.y*n,i.y*s+i.x*n),e?i.add(e):i},isInside:function(t){return t.contains(this)},isClose:function(t,e){return e>this.getDistance(t)},isColinear:function(t){return 1e-5>this.cross(t)},isOrthogonal:function(t){return 1e-5>this.dot(t)},isZero:function(){return Numerical.isZero(this.x)&&Numerical.isZero(this.y)
},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(t){return t=Point.read(arguments),this.x*t.x+this.y*t.y},cross:function(t){return t=Point.read(arguments),this.x*t.y-this.y*t.x},project:function(t){if(t=Point.read(arguments),t.isZero())return Point.create(0,0);var e=this.dot(t)/t.dot(t);return Point.create(t.x*e,t.y*e)},statics:{create:function(t,e){var i=Base.create(Point);return i.x=t,i.y=e,i},min:function(){var t=Point.read(arguments);return _point2=Point.read(arguments),Point.create(Math.min(t.x,_point2.x),Math.min(t.y,_point2.y))},max:function(){var t=Point.read(arguments);return _point2=Point.read(arguments),Point.create(Math.max(t.x,_point2.x),Math.max(t.y,_point2.y))},random:function(){return Point.create(Math.random(),Math.random())}}},new function(){return Base.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return Point.create(e(this.x),e(this.y))}},{})}),LinkedPoint=Point.extend({set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},statics:{create:function(t,e,i,n,s){if(s)return Point.create(i,n);var r=Base.create(LinkedPoint);return r._x=i,r._y=n,r._owner=t,r._setter=e,r}}}),Size=this.Size=Base.extend({_type:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t;if("number"===i){var n="number"==typeof e;this.width=t,this.height=n?e:t,this._read&&(this._read=n?2:1)}else"undefined"===i||null===t?(this.width=this.height=0,this._read&&(this._read=null===t?1:0)):(Array.isArray(t)?(this.width=t[0],this.height=t.length>1?t[1]:t[0]):null!=t.width?(this.width=t.width,this.height=t.height):null!=t.x?(this.width=t.x,this.height=t.y):(this.width=this.height=0,this._read&&(this._read=0)),this._read&&(this._read=1))},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t=Size.read(arguments),this.width==t.width&&this.height==t.height},clone:function(){return Size.create(this.width,this.height)},toString:function(){var t=Format.number;return"{ width: "+t(this.width)+", height: "+t(this.height)+" }"},_serialize:function(t){var e=Format.number,i=t.precision;return[e(this.width,i),e(this.height,i)]},add:function(t){return t=Size.read(arguments),Size.create(this.width+t.width,this.height+t.height)},subtract:function(t){return t=Size.read(arguments),Size.create(this.width-t.width,this.height-t.height)},multiply:function(t){return t=Size.read(arguments),Size.create(this.width*t.width,this.height*t.height)},divide:function(t){return t=Size.read(arguments),Size.create(this.width/t.width,this.height/t.height)},modulo:function(t){return t=Size.read(arguments),Size.create(this.width%t.width,this.height%t.height)},negate:function(){return Size.create(-this.width,-this.height)},isZero:function(){return Numerical.isZero(this.width)&&Numerical.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{create:function(t,e){return Base.create(Size).set(t,e)},min:function(t,e){return Size.create(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return Size.create(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return Size.create(Math.random(),Math.random())}}},new function(){return Base.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return Size.create(e(this.width),e(this.height))}},{})}),LinkedSize=Size.extend({set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)},statics:{create:function(t,e,i,n,s){if(s)return Size.create(i,n);var r=Base.create(LinkedSize);return r._width=i,r._height=n,r._owner=t,r._setter=e,r}}}),Rectangle=this.Rectangle=Base.extend({_type:"Rectangle",_readIndex:!0,initialize:function(t,e,i,n){var s=typeof t,r=0;if("number"===s?(this.x=t,this.y=e,this.width=i,this.height=n,r=4):"undefined"===s||null===t?(this.x=this.y=this.width=this.height=0,r=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3],r=1):void 0!==t.x||void 0!==t.width?(this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,r=1):void 0===t.from&&void 0===t.to&&(this.x=this.y=this.width=this.height=0,this._set(t),r=1)),!r){var o=Point.readNamed(arguments,"from"),a=Base.peek(arguments);if(this.x=o.x,this.y=o.y,a&&void 0!==a.x||Base.hasNamed(arguments,"to")){var u=Point.readNamed(arguments,"to");this.width=u.x-o.x,this.height=u.y-o.y,0>this.width&&(this.x=u.x,this.width=-this.width),0>this.height&&(this.y=u.y,this.height=-this.height)}else{var l=Size.read(arguments);this.width=l.width,this.height=l.height}r=arguments._index}this._read&&(this._read=r)},set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},clone:function(){return Rectangle.create(this.x,this.y,this.width,this.height)},equals:function(t){return t=Rectangle.read(arguments),this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},toString:function(){var t=Format.number;return"{ x: "+t(this.x)+", y: "+t(this.y)+", width: "+t(this.width)+", height: "+t(this.height)+" }"},_serialize:function(t){var e=Format.number,i=t.precision;return[e(this.x,i),e(this.y,i),e(this.width,i),e(this.height,i)]},getPoint:function(){return LinkedPoint.create(this,"setPoint",this.x,this.y,arguments[0])},setPoint:function(t){t=Point.read(arguments),this.x=t.x,this.y=t.y},getSize:function(){return LinkedSize.create(this,"setSize",this.width,this.height,arguments[0])},setSize:function(t){t=Size.read(arguments),this.width=t.width,this.height=t.height},getLeft:function(){return this.x},setLeft:function(t){this.width-=t-this.x,this.x=t},getTop:function(){return this.y},setTop:function(t){this.height-=t-this.y,this.y=t},getRight:function(){return this.x+this.width},setRight:function(t){this.width=t-this.x},getBottom:function(){return this.y+this.height},setBottom:function(t){this.height=t-this.y},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height},getCenter:function(){return LinkedPoint.create(this,"setCenter",this.getCenterX(),this.getCenterY(),arguments[0])},setCenter:function(t){return t=Point.read(arguments),this.setCenterX(t.x),this.setCenterY(t.y),this},isEmpty:function(){return 0==this.width||0==this.height},contains:function(t){return t&&void 0!==t.width||4==(Array.isArray(t)?t:arguments).length?this._containsRectangle(Rectangle.read(arguments)):this._containsPoint(Point.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&this.x+this.width>=e&&this.y+this.height>=i},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(t){return t=Rectangle.read(arguments),t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},intersect:function(t){t=Rectangle.read(arguments);var e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return Rectangle.create(e,i,n-e,s-i)},unite:function(t){t=Rectangle.read(arguments);var e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return Rectangle.create(e,i,n-e,s-i)},include:function(t){t=Point.read(arguments);var e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),s=Math.max(this.y+this.height,t.y);return Rectangle.create(e,i,n-e,s-i)},expand:function(t,e){return void 0===e&&(e=t),Rectangle.create(this.x-t/2,this.y-e/2,this.width+t,this.height+e)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(void 0===e?t:e)-this.height)},statics:{create:function(t,e,i,n){return Base.create(Rectangle).set(t,e,i,n)}}},new function(){return Base.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),n=/^[RL]/.test(i);e>=4&&(t[1]+=n?"Y":"X");var s=t[n?0:1],r=t[n?1:0],o="get"+s,a="get"+r,u="set"+s,l="set"+r,h="get"+i,c="set"+i;this[h]=function(){return LinkedPoint.create(this,c,this[o](),this[a](),arguments[0])},this[c]=function(t){t=Point.read(arguments),this[u](t.x),this[l](t.y)}},{})}),LinkedRectangle=Rectangle.extend({set:function(t,e,i,n,s){return this._x=t,this._y=e,this._width=i,this._height=n,s||this._owner[this._setter](this),this},statics:{create:function(t,e,i,n,s,r){var o=Base.create(LinkedRectangle).set(i,n,s,r,!0);return o._owner=t,o._setter=e,o}}},new function(){var t=Rectangle.prototype;return Base.each(["x","y","width","height"],function(t){var e=Base.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},Base.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),delete this._dontNotify,this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected},setSelected:function(t){var e=this._owner;e.setSelected&&(e._boundsSelected=t,e.setSelected(t||e._selectedSegmentState>0))}}))}),Matrix=this.Matrix=Base.extend({_type:"Matrix",initialize:function(t){var e=arguments.length,i=!0;if(6==e?this.set.apply(this,arguments):1==e?t instanceof Matrix?this.set(t._a,t._c,t._b,t._d,t._tx,t._ty):Array.isArray(t)?this.set.apply(this,t):i=!1:0==e?this.reset():i=!1,!i)throw Error("Unsupported matrix parameters")},set:function(t,e,i,n,s,r){return this._a=t,this._c=e,this._b=i,this._d=n,this._tx=s,this._ty=r,this},_serialize:function(t){return Base.serialize(this.getValues(),t)},clone:function(){return Matrix.create(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(t){return t&&this._a==t._a&&this._b==t._b&&this._c==t._c&&this._d==t._d&&this._tx==t._tx&&this._ty==t._ty},toString:function(){var t=Format.number;return"[["+[t(this._a),t(this._b),t(this._tx)].join(", ")+"], ["+[t(this._c),t(this._d),t(this._ty)].join(", ")+"]]"},reset:function(){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,this},scale:function(){var t=Point.read(arguments),e=Point.read(arguments,0,0,!1,!0);return e&&this.translate(e),this._a*=t.x,this._c*=t.x,this._b*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this},translate:function(t){t=Point.read(arguments);var e=t.x,i=t.y;return this._tx+=e*this._a+i*this._b,this._ty+=e*this._c+i*this._d,this},rotate:function(t,e){e=Point.read(arguments,1),t=t*Math.PI/180;var i=e.x,n=e.y,s=Math.cos(t),r=Math.sin(t),o=i-i*s+n*r,a=n-i*r-n*s,u=this._a,l=this._b,h=this._c,c=this._d;return this._a=s*u+r*l,this._b=-r*u+s*l,this._c=s*h+r*c,this._d=-r*h+s*c,this._tx+=o*u+a*l,this._ty+=o*h+a*c,this},shear:function(){var t=Point.read(arguments),e=Point.read(arguments);e&&this.translate(e);var i=this._a,n=this._c;return this._a+=t.y*this._b,this._c+=t.y*this._d,this._b+=t.x*i,this._d+=t.x*n,e&&this.translate(e.negate()),this},isIdentity:function(){return 1==this._a&&0==this._c&&0==this._b&&1==this._d&&0==this._tx&&0==this._ty},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},concatenate:function(t){var e=this._a,i=this._b,n=this._c,s=this._d;return this._a=t._a*e+t._c*i,this._b=t._b*e+t._d*i,this._c=t._a*n+t._c*s,this._d=t._b*n+t._d*s,this._tx+=t._tx*e+t._ty*i,this._ty+=t._tx*n+t._ty*s,this},preConcatenate:function(t){var e=this._a,i=this._b,n=this._c,s=this._d,r=this._tx,o=this._ty;return this._a=t._a*e+t._b*n,this._b=t._a*i+t._b*s,this._c=t._c*e+t._d*n,this._d=t._c*i+t._d*s,this._tx=t._a*r+t._b*o+t._tx,this._ty=t._c*r+t._d*o+t._ty,this},transform:function(t,e,i,n,s){return 5>arguments.length?this._transformPoint(Point.read(arguments)):this._transformCoordinates(t,e,i,n,s)},_transformPoint:function(t,e,i){var n=t.x,s=t.y;return e||(e=Base.create(Point)),e.set(n*this._a+s*this._b+this._tx,n*this._c+s*this._d+this._ty,i)},_transformCoordinates:function(t,e,i,n,s){for(var r=e,o=n,a=e+2*s;a>r;){var u=t[r++],l=t[r++];i[o++]=u*this._a+l*this._b+this._tx,i[o++]=u*this._c+l*this._d+this._ty}return i},_transformCorners:function(t){var e=t.x,i=t.y,n=e+t.width,s=i+t.height,r=[e,i,n,i,n,s,e,s];return this._transformCoordinates(r,0,r,0,4)},_transformBounds:function(t,e,i){for(var n=this._transformCorners(t),s=n.slice(0,2),r=n.slice(0),o=2;8>o;o++){var a=n[o],u=1&o;s[u]>a?s[u]=a:a>r[u]&&(r[u]=a)}return e||(e=Base.create(Rectangle)),e.set(s[0],s[1],r[0]-s[0],r[1]-s[1],i)},inverseTransform:function(){return this._inverseTransform(Point.read(arguments))},_getDeterminant:function(){var t=this._a*this._d-this._b*this._c;return isFinite(t)&&!Numerical.isZero(t)&&isFinite(this._tx)&&isFinite(this._ty)?t:null},_inverseTransform:function(t,e,i){var n=this._getDeterminant();if(!n)return null;var s=t.x-this._tx,r=t.y-this._ty;return e||(e=Base.create(Point)),e.set((s*this._d-r*this._b)/n,(r*this._a-s*this._c)/n,i)},decompose:function(){var t=this._a,e=this._b,i=this._c,n=this._d;if(Numerical.isZero(t*n-e*i))return null;var s=Math.sqrt(t*t+e*e);t/=s,e/=s;var r=t*i+e*n;i-=t*r,n-=e*r;var o=Math.sqrt(i*i+n*n);return i/=o,n/=o,r/=o,e*i>t*n&&(t=-t,e=-e,r=-r,s=-s),{translation:this.getTranslation(),scaling:Point.create(s,o),rotation:180*-Math.atan2(e,t)/Math.PI,shearing:r}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return Point.create(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var t=this._getDeterminant();return t&&Matrix.create(this._d/t,-this._c/t,-this._b/t,this._a/t,(this._b*this._ty-this._d*this._tx)/t,(this._c*this._tx-this._a*this._ty)/t)},shiftless:function(){return Matrix.create(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(t){t.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)},statics:{create:function(t,e,i,n,s,r){return Base.create(Matrix).set(t,e,i,n,s,r)}}},new function(){return Base.each({scaleX:"_a",scaleY:"_d",translateX:"_tx",translateY:"_ty",shearX:"_b",shearY:"_c"},function(t,e){e=Base.capitalize(e),this["get"+e]=function(){return this[t]},this["set"+e]=function(e){this[t]=e}},{})}),Line=this.Line=Base.extend({initialize:function(){var t=Point.read(arguments),e=Point.read(arguments),i=Base.read(arguments);void 0!==i?(this.point=t,this.vector=e.subtract(t),this.infinite=i):(this.point=t,this.vector=e,this.infinite=!0)},intersect:function(t){var e=this.vector.cross(t.vector);if(Numerical.isZero(e))return null;var i=t.point.subtract(this.point),n=i.cross(t.vector)/e,s=i.cross(this.vector)/e;return(this.infinite||n>=0&&1>=n)&&(t.infinite||s>=0&&1>=s)?this.point.add(this.vector.multiply(n)):null},getSide:function(t){var e=this.vector,i=t.subtract(this.point),n=i.cross(e);return 0===n&&(n=i.dot(e),n>0&&(n=i.subtract(e).dot(e),0>n&&(n=0))),0>n?-1:n>0?1:0},getDistance:function(t){var e=this.vector.y/this.vector.x,i=this.point.y-e*this.point.x,n=Math.abs(t.y-e*t.x-i)/Math.sqrt(e*e+1);return this.infinite?n:Math.min(n,t.getDistance(this.point),t.getDistance(this.point.add(this.vector)))}}),Project=this.Project=PaperScopeItem.extend({_list:"projects",_reference:"project",initialize:function(t){this.base(!0),this.layers=[],this.symbols=[],this.activeLayer=new Layer,t&&(this.view=t instanceof View?t:View.create(t)),this._currentStyle=new PathStyle,this._selectedItems={},this._selectedItemCount=0,this._drawCount=0,this.options={}},_serialize:function(t,e){return Base.serialize(this.layers,t,!1,e)},_needsRedraw:function(){this.view&&(this.view._redrawNeeded=!0)},remove:function(){return this.base()?(this.view&&this.view.remove(),!0):!1},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.initialize(t)},getIndex:function(){return this._index},getSelectedItems:function(){var t=[];for(var e in this._selectedItems){var i=this._selectedItems[e];i._drawCount===this._drawCount&&t.push(i)}return t},_updateSelection:function(t){t._selected?(this._selectedItemCount++,this._selectedItems[t._id]=t,t.isInserted()&&(t._drawCount=this._drawCount)):(this._selectedItemCount--,delete this._selectedItems[t._id])},selectAll:function(){for(var t=0,e=this.layers.length;e>t;t++)this.layers[t].setSelected(!0)},deselectAll:function(){for(var t in this._selectedItems)this._selectedItems[t].setSelected(!1)},hitTest:function(t,e){t=Point.read(arguments),e=HitResult.getOptions(Base.read(arguments));for(var i=this.layers.length-1;i>=0;i--){var n=this.layers[i].hitTest(t,e);if(n)return n}return null},importJson:function(t){return Base.importJson(t)},draw:function(t,e){function i(t,e,s){var r=s&&n[t._id];return r?r.clone():(t._parent&&(e=i(t._parent,e,!0)),t._matrix.isIdentity()||e.concatenate(t._matrix),s&&(n[t._id]=e.clone()),e)}var n={};this._drawCount++,t.save(),e.isIdentity()||e.applyToContext(t);for(var s={offset:new Point(0,0)},r=0,o=this.layers.length;o>r;r++)Item.draw(this.layers[r],t,s);if(t.restore(),this._selectedItemCount>0){t.save(),t.strokeWidth=1,t.strokeStyle=t.fillStyle="#009dec";for(var a in this._selectedItems){var u=this._selectedItems[a];if(u._drawCount===this._drawCount&&(u.drawSelected||u._boundsSelected)){var l=i(u,e.clone());u.drawSelected&&u.drawSelected(t,l),u._boundsSelected&&Item.drawSelectedBounds(u._getBounds("getBounds"),t,l)}}t.restore()}}}),Symbol=this.Symbol=Base.extend({_type:"Symbol",initialize:function(t,e){this._id=++Base._uid,this.project=paper.project,this.project.symbols.push(this),t&&this.setDefinition(t,e),this._instances={}},_serialize:function(t,e){return e.add(this,function(){return Base.serialize([this._type,this._definition],t,!1,e)})},_changed:function(t){Base.each(this._instances,function(e){e._changed(t)})},getDefinition:function(){return this._definition},setDefinition:function(t){t._parentSymbol&&(t=t.clone()),this._definition&&delete this._definition._parentSymbol,this._definition=t,t.remove(),t.setSelected(!1),arguments[1]||t.setPosition(new Point),t._parentSymbol=this,this._changed(5)},place:function(t){return new PlacedSymbol(this,t)},clone:function(){return new Symbol(this._definition.clone())}}),Item=this.Item=Base.extend(Callback,{statics:{extend:function(t){return t._serializeFields&&(t._serializeFields=Base.merge(this.prototype._serializeFields,t._serializeFields)),this.base.apply(this,arguments)}}},{_boundsSelected:!1,_serializeFields:{name:null,matrix:new Matrix,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,clipMask:!1,data:{}},initialize:function(t){this._id=++Base._uid,this._project||paper.project.activeLayer.addChild(this),this._style||(this._style=PathStyle.create(this)),this.setStyle(this._project.getCurrentStyle()),this._matrix=new Matrix,t&&this._matrix.translate(t)},_events:new function(){var t={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},e={install:function(e){var i=this._project.view._eventCounters;if(i)for(var n in t)i[n]=(i[n]||0)+(t[n][e]||0)},uninstall:function(e){var i=this._project.view._eventCounters;if(i)for(var n in t)i[n]-=t[n][e]||0}};return Base.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(t){this[t]=e},{onFrame:{install:function(){this._project.view._animateItem(this,!0)},uninstall:function(){this._project.view._animateItem(this,!1)}},onLoad:{}})},_serialize:function(t,e){function i(i,r){for(var o in i){var a=s[o];Base.equals(a,i[o])||(n[o]=Base.serialize(a,t,r&&"data"!==o,e))}}var n={},s=this;return i(this._serializeFields,!0),this instanceof Group||i(this._style._defaults,!1),[this._type,n]},_changed:function(t){if(4&t&&(delete this._bounds,delete this._position),this._parent&&12&t&&this._parent._clearBoundsCache(),2&t&&this._clearBoundsCache(),1&t&&this._project._needsRedraw(),this._parentSymbol&&this._parentSymbol._changed(t),this._project._changes){var e=this._project._changesById[this._id];e?e.flags|=t:(e={item:this,flags:t},this._project._changesById[this._id]=e,this._project._changes.push(e))}},set:function(t){return this._set(t),this},getId:function(){return this._id},getType:function(){return this._type},getName:function(){return this._name},setName:function(t,e){if(this._name&&this._removeFromNamed(),t&&this._parent){for(var i=this._parent._children,n=this._parent._namedChildren,s=t,r=1;e&&i[t];)t=s+" "+r++;(n[t]=n[t]||[]).push(this),i[t]=this}this._name=t||void 0,this._changed(32)}},Base.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=Base.capitalize(t),t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?32:33))}},{}),{_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,applyMatrix:!1,isSelected:function(){if(this._children)for(var t=0,e=this._children.length;e>t;t++)if(this._children[t].isSelected())return!0;return this._selected},setSelected:function(t){if(this._children&&!arguments[1])for(var e=0,i=this._children.length;i>e;e++)this._children[e].setSelected(t);(t=!!t)!=this._selected&&(this._selected=t,this._project._updateSelection(this),this._changed(33))},_selected:!1,isFullySelected:function(){if(this._children&&this._selected){for(var t=0,e=this._children.length;e>t;t++)if(!this._children[t].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(t){if(this._children)for(var e=0,i=this._children.length;i>e;e++)this._children[e].setFullySelected(t);this.setSelected(t,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(33),this._parent&&this._parent._changed(256))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(){var t=this._position||(this._position=this.getBounds().getCenter(!0));return arguments[0]?t:LinkedPoint.create(this,"setPosition",t.x,t.y)},setPosition:function(){this.translate(Point.read(arguments).subtract(this.getPosition(!0)))},getMatrix:function(){return this._matrix},setMatrix:function(t){this._matrix.initialize(t),this._changed(5)},isEmpty:function(){return 0==this._children.length}},Base.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){var e=this._boundsGetter,i=this._getCachedBounds("string"==typeof e?e:e&&e[t]||t,arguments[0]);return"getBounds"==t?LinkedRectangle.create(this,"setBounds",i.x,i.y,i.width,i.height):i}},{_getCachedBounds:function(t,e,i){var n=(!e||e.equals(this._matrix))&&t;if(i&&this._parent){var s=i._id,r=this._parent._boundsCache=this._parent._boundsCache||{ids:{},list:[]};r.ids[s]||(r.list.push(i),r.ids[s]=i)}if(n&&this._bounds&&this._bounds[n])return this._bounds[n].clone();var o=this._matrix.isIdentity();e=!e||e.isIdentity()?o?null:this._matrix:o?e:e.clone().concatenate(this._matrix);var a=this._getBounds(t,e,n?this:i);return n&&(this._bounds||(this._bounds={}),this._bounds[n]=a.clone()),a},_clearBoundsCache:function(){if(this._boundsCache){for(var t=0,e=this._boundsCache.list,i=e.length;i>t;t++){var n=e[t];delete n._bounds,n!=this&&n._boundsCache&&n._clearBoundsCache()}delete this._boundsCache}},_getBounds:function(t,e,i){var n=this._children;if(!n||0==n.length)return new Rectangle;for(var s=1/0,r=-s,o=s,a=r,u=0,l=n.length;l>u;u++){var h=n[u];if(h._visible&&!h.isEmpty()){var c=h._getCachedBounds(t,e,i);s=Math.min(c.x,s),o=Math.min(c.y,o),r=Math.max(c.x+c.width,r),a=Math.max(c.y+c.height,a)}}return Rectangle.create(s,o,r-s,a-o)},setBounds:function(t){t=Rectangle.read(arguments);var e=this.getBounds(),i=new Matrix,n=t.getCenter();i.translate(n),(t.width!=e.width||t.height!=e.height)&&i.scale(0!=e.width?t.width/e.width:1,0!=e.height?t.height/e.height:1),n=e.getCenter(),i.translate(-n.x,-n.y),this.transform(i)}}),{getProject:function(){return this._project},_setProject:function(t){if(this._project!=t&&(this._project=t,this._children))for(var e=0,i=this._children.length;i>e;e++)this._children[e]._setProject(t)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Layer)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},isInserted:function(){return this._parent?this._parent.isInserted():!1},clone:function(){return this._clone(new this.constructor)},_clone:function(t){if(t.setStyle(this._style),this._children)for(var e=0,i=this._children.length;i>e;e++)t.addChild(this._children[e].clone(),!0);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide","applyMatrix"],e=0,i=n.length;i>e;e++){var s=n[e];this.hasOwnProperty(s)&&(t[s]=this[s])}return t._matrix.initialize(this._matrix),t.setSelected(this._selected),this._name&&t.setName(this._name,!0),t},copyTo:function(t){var e=this.clone();return t.layers?t.activeLayer.addChild(e):t.addChild(e),e},rasterize:function(t){var e=this.getStrokeBounds(),i=(t||72)/72,n=CanvasProvider.getCanvas(e.getSize().multiply(i)),s=n.getContext("2d");s.save(),(new Matrix).scale(i).translate(-e.x,-e.y).applyToContext(s),Item.draw(this,s,{});var r=new Raster(n);return r.setBounds(e),s.restore(),r},hitTest:function(t,e){function i(i,n){var o=s["get"+n]();return t.getDistance(o)<e.tolerance?new HitResult(i,r,{name:Base.hyphenate(n),point:o}):void 0}if(this._locked)return null;if(t=Point.read(arguments),e=HitResult.getOptions(Base.read(arguments)),!this._children&&!this.getRoughBounds().expand(e.tolerance)._containsPoint(t))return null;if(t=this._matrix._inverseTransform(t),!(!e.center&&!e.bounds||this instanceof Layer&&!this._parent)){var n,s=this.getBounds(),r=this,o=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"];if(e.center&&(n=i("center","Center")))return n;if(e.bounds)for(var a=0;8>a;a++)if(n=i("bounds",o[a]))return n}return this._children||!(e.guides&&!this._guide||e.selected&&!this._selected)?this._hitTest(t,e):null},_hitTest:function(t,e){if(this._children)for(var i=this._children.length-1;i>=0;i--){var n=this._children[i].hitTest(t,e);if(n)return n}},addChild:function(t,e){return this.insertChild(void 0,t,e)},insertChild:function(t,e){return this._children?(e._remove(!0),Base.splice(this._children,[e],t,0),e._parent=this,e._setProject(this._project),e._name&&e.setName(e._name),this._changed(3),e):null},addChildren:function(t,e){return this.insertChildren(this._children.length,t,e)},insertChildren:function(t,e,i){e=e&&Array.prototype.slice.apply(e);for(var n=this._children,s=n.length,r=t,o=0,a=e&&e.length;a>o;o++)if(this.insertChild(r,e[o],i)){var u=n.length;r+=u-s,s=u}return r!=t},insertAbove:function(t,e){var i=t._index;return t._parent==this._parent&&this._index>i&&i++,t._parent.insertChild(i,this,e)},insertBelow:function(t,e){var i=t._index;return t._parent==this._parent&&i>this._index&&i--,t._parent.insertChild(i,this,e)},sendToBack:function(){return this._parent.insertChild(0,this)},bringToFront:function(){return this._parent.addChild(this)},appendTop:function(t){return this.addChild(t)},appendBottom:function(t){return this.insertChild(0,t)},moveAbove:function(t){return this.insertAbove(t)},moveBelow:function(t){return this.insertBelow(t)},_removeFromNamed:function(){var t=this._parent._children,e=this._parent._namedChildren,i=this._name,n=e[i],s=n?n.indexOf(this):-1;-1!=s&&(t[i]==this&&delete t[i],n.splice(s,1),n.length?t[i]=n[n.length-1]:delete e[i])},_remove:function(t){return this._parent?(this._name&&this._removeFromNamed(),null!=this._index&&Base.splice(this._parent._children,null,this._index,1),t&&this._parent._changed(3),this._parent=null,!0):!1},remove:function(){return this._remove(!0)},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=Base.pick(e,this._children.length);for(var i=Base.splice(this._children,null,t,e-t),n=i.length-1;n>=0;n--)i[n]._remove(!1);return i.length>0&&this._changed(3),i},reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;e>t;t++)this._children[t]._index=t;this._changed(3)}},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent);return e}for(var i=e(this),n=e(t),s=0,r=Math.min(i.length,n.length);r>s;s++)if(i[s]!=n[s])return i[s]._index<n[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isAbove:function(t){return-1==this._getOrder(t)},isBelow:function(t){return 1==this._getOrder(t)},isParent:function(t){return this._parent==t},isChild:function(t){return t&&t._parent==this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e==t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&(e instanceof Group||e instanceof CompoundPath)&&t.isDescendant(e))return!0;e=e._parent}return!1},scale:function(t,e,i){return(2>arguments.length||"object"==typeof e)&&(i=e,e=t),this.transform((new Matrix).scale(t,e,i||this.getPosition(!0)))},translate:function(){var t=new Matrix;return this.transform(t.translate.apply(t,arguments))},rotate:function(t,e){return this.transform((new Matrix).rotate(t,e||this.getPosition(!0)))},shear:function(t,e,i){return(2>arguments.length||"object"==typeof e)&&(i=e,e=t),this.transform((new Matrix).shear(t,e,i||this.getPosition(!0)))},transform:function(t){var e=this._bounds,i=this._position;if(this._matrix.preConcatenate(t),this._transform&&this._transform(t),(this.applyMatrix||arguments[1])&&this._applyMatrix(this._matrix)&&this._matrix.reset(),this._changed(5),e&&0===t.getRotation()%90){for(var n in e){var s=e[n];t._transformBounds(s,s)}var r=this._boundsGetter,s=e[r&&r.getBounds||r||"getBounds"];s&&(this._position=s.getCenter(!0)),this._bounds=e}else i&&(this._position=t._transformPoint(i,i));return this},_applyMatrix:function(t){if(this._children){for(var e=0,i=this._children.length;i>e;e++)this._children[e].transform(t,!0);return!0}},fitBounds:function(t,e){t=Rectangle.read(arguments);var i=this.getBounds(),n=i.height/i.width,s=t.height/t.width,r=(e?n>s:s>n)?t.width/i.width:t.height/i.height,o=new Rectangle(new Point,Size.create(i.width*r,i.height*r));o.setCenter(t.getCenter()),this.setBounds(o)},importJson:function(t){return this.addChild(Base.importJson(t))},_setStyles:function(t){var e=this._style,i=e._strokeWidth,n=e._strokeJoin,s=e._strokeCap,r=e._miterLimit,o=e._fillColor,a=e._strokeColor,u=e._dashArray,l=e._dashOffset;null!=i&&(t.lineWidth=i),n&&(t.lineJoin=n),s&&(t.lineCap=s),r&&(t.miterLimit=r),o&&(t.fillStyle=o.toCanvasStyle(t)),a&&(t.strokeStyle=a.toCanvasStyle(t),paper.support.nativeDash&&u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):"mozDash"in t?(t.mozDash=u,t.mozDashOffset=l):"webkitLineDash"in t&&(t.webkitLineDash=u,t.webkitLineDashOffset=l))),o&&a||(t.globalAlpha=this._opacity)
},statics:{drawSelectedBounds:function(t,e,i){var n=i._transformCorners(t);e.beginPath();for(var s=0;8>s;s++)e[0==s?"moveTo":"lineTo"](n[s],n[++s]);e.closePath(),e.stroke();for(var s=0;8>s;s++)e.beginPath(),e.rect(n[s]-2,n[++s]-2,4,4),e.fill()},draw:function(t,e,i){if(t._visible&&0!=t._opacity){t._drawCount=t._project._drawCount;var n,s,r;if("normal"!==t._blendMode||1>t._opacity&&"Raster"!==t._type&&("Path"!==t._type||t.getFillColor()&&t.getStrokeColor())){var o=t.getStrokeBounds();if(!o.width||!o.height)return;r=i.offset,s=i.offset=o.getTopLeft().floor(),n=e,e=CanvasProvider.getContext(o.getSize().ceil().add(Size.create(1,1)))}i.clipping||e.save(),n&&e.translate(-s.x,-s.y),t._matrix.applyToContext(e),t.draw(e,i),i.clipping||e.restore(),n&&(i.offset=r,"normal"!==t._blendMode?BlendMode.process(t._blendMode,e,n,t._opacity,s.subtract(r)):(n.save(),n.globalAlpha=t._opacity,n.drawImage(e.canvas,s.x,s.y),n.restore()),CanvasProvider.release(e))}}}},Base.each(["down","drag","up","move"],function(t){this["removeOn"+Base.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,n=Tool._removeSets=Tool._removeSets||{};n[i]=n[i]||{},n[i][this._id]=this}return this}})),Group=this.Group=Item.extend({_type:"Group",_serializeFields:{children:[]},initialize:function(t){this.base(),this._children=[],this._namedChildren={},this._set(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function(t){Item.prototype._changed.call(this,t),258&t&&delete this._clipItem},_getClipItem:function(){if(void 0!==this._clipItem)return this._clipItem;for(var t=0,e=this._children.length;e>t;t++){var i=this._children[t];if(i._clipMask)return this._clipItem=i}return this._clipItem=null},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},draw:function(t,e){var i=this._getClipItem();i&&(e.clipping=!0,Item.draw(i,t,e),delete e.clipping);for(var n=0,s=this._children.length;s>n;n++){var r=this._children[n];r!=i&&Item.draw(r,t,e)}}}),Layer=this.Layer=Group.extend({_type:"Layer",initialize:function(){this._project=paper.project,this._index=this._project.layers.push(this)-1,this.base.apply(this,arguments),this.activate()},_remove:function(t){return this._parent?this.base(t):null!=this._index?(Base.splice(this._project.layers,null,this._index,1),this._project._needsRedraw(),!0):!1},getNextSibling:function(){return this._parent?this.base():this._project.layers[this._index+1]||null},getPreviousSibling:function(){return this._parent?this.base():this._project.layers[this._index-1]||null},isInserted:function(){return null!=this._index},activate:function(){this._project.activeLayer=this}},new function(){function t(t){return function(e){return e instanceof Layer&&!e._parent&&this._remove(!0)?(Base.splice(e._project.layers,[this],e._index+(t?1:0),0),this._setProject(e._project),!0):this.base(e)}}return{insertAbove:t(!0),insertBelow:t(!1)}}),PlacedItem=this.PlacedItem=Item.extend({_boundsGetter:{getBounds:"getStrokeBounds"},_hitTest:function(t,e,i){var n=this._symbol._definition._hitTest(t,e,i);return n&&(n.item=this),n}}),Raster=this.Raster=PlacedItem.extend({_type:"Raster",_boundsSelected:!0,_serializeFields:{source:null},_boundsGetter:"getBounds",initialize:function(t,e){this.base(void 0!==e&&Point.read(arguments,1)),t&&!this._set(t)&&(t.getContext?this.setCanvas(t):"string"==typeof t?this.setSource(t):this.setImage(t)),this._size||(this._size=new Size)},clone:function(){var t=this._image;t||(t=CanvasProvider.getCanvas(this._size),t.getContext("2d").drawImage(this._canvas,0,0));var e=new Raster(t);return this._clone(e)},getSize:function(){return this._size},setSize:function(){var t=Size.read(arguments);if(!this._size.equals(t)){var e=this.getElement();this.setCanvas(CanvasProvider.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}},getWidth:function(){return this._size.width},getHeight:function(){return this._size.height},isEmpty:function(){return 0==this._size.width&&0==this._size.height},getPpi:function(){var t=this._matrix,e=new Point(0,0).transform(t),i=new Point(1,0).transform(t).subtract(e),n=new Point(0,1).transform(t).subtract(e);return Size.create(72/i.getLength(),72/n.getLength())},getContext:function(){return this._context||(this._context=this.getCanvas().getContext("2d")),arguments[0]&&(this._image=null,this._changed(129)),this._context},setContext:function(t){this._context=t},getCanvas:function(){if(!this._canvas){var t=CanvasProvider.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){CanvasProvider.release(t)}}return this._canvas},setCanvas:function(t){this._canvas&&CanvasProvider.release(this._canvas),this._canvas=t,this._size=Size.create(t.width,t.height),this._image=null,this._context=null,this._changed(133)},getImage:function(){return this._image},setImage:function(t){this._canvas&&CanvasProvider.release(this._canvas),this._image=t,this._size=Size.create(t.naturalWidth,t.naturalHeight),this._canvas=null,this._context=null,this._changed(5)},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(t){function e(){i.fire("load"),i._project.view&&i._project.view.draw(!0)}var i=this,n=document.getElementById(t)||new Image;DomEvent.add(n,{load:function(){i.setImage(n),e()}}),n.width&&n.height?setTimeout(e,0):n.src||(n.src=t),this.setImage(n)},getElement:function(){return this._canvas||this._image},getSubImage:function(t){t=Rectangle.read(arguments);var e=CanvasProvider.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},toDataURL:function(){var t=this._image&&this._image.src;if(/^data:/.test(t))return t;var e=this.getCanvas();return e?e.toDataURL():null},drawImage:function(t,e){e=Point.read(arguments,1),this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;t?t instanceof PathItem?(i=t,e=t.getBounds()):t.width?e=new Rectangle(t):t.x&&(e=Rectangle.create(t.x-.5,t.y-.5,1,1)):e=this.getBounds();var n=32,s=Math.min(e.width,n),r=Math.min(e.height,n),o=Raster._sampleContext;o?o.clearRect(0,0,n+1,n+1):o=Raster._sampleContext=CanvasProvider.getContext(new Size(n)),o.save(),o.scale(s/e.width,r/e.height),o.translate(-e.x,-e.y),i&&i.draw(o,{clip:!0}),this._matrix.applyToContext(o),o.drawImage(this.getElement(),-this._size.width/2,-this._size.height/2),o.restore();for(var a=o.getImageData(.5,.5,Math.ceil(s),Math.ceil(r)).data,u=[0,0,0],l=0,h=0,c=a.length;c>h;h+=4){var d=a[h+3];l+=d,d/=255,u[0]+=a[h]*d,u[1]+=a[h+1]*d,u[2]+=a[h+2]*d}for(var h=0;3>h;h++)u[h]/=l;return l?Color.read(u):null},getPixel:function(t){t=Point.read(arguments);for(var e=this.getContext().getImageData(t.x,t.y,1,1).data,i=Array(4),n=0;4>n;n++)i[n]=e[n]/255;return RgbColor.read(i)},setPixel:function(){var t=Point.read(arguments),e=Color.read(arguments),i=this.getContext(!0),n=i.createImageData(1,1),s=e.getAlpha();n.data[0]=255*e.getRed(),n.data[1]=255*e.getGreen(),n.data[2]=255*e.getBlue(),n.data[3]=null!=s?255*s:255,i.putImageData(n,t.x,t.y)},createImageData:function(t){return t=Size.read(arguments),this.getContext().createImageData(t.width,t.height)},getImageData:function(t){return t=Rectangle.read(arguments),t.isEmpty()&&(t=new Rectangle(this.getSize())),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t,e){e=Point.read(arguments,1),this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var i=new Rectangle(this._size).setCenter(0,0);return e?e._transformBounds(i):i},_hitTest:function(t){if(t.isInside(this._getBounds())){var e=this;return new HitResult("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))}}),PlacedSymbol=this.PlacedSymbol=PlacedItem.extend({_type:"PlacedSymbol",_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(t,e){this.base(void 0!==e&&Point.read(arguments,1)),this._set(t)||this.setSymbol(t instanceof Symbol?t:new Symbol(t))},getSymbol:function(){return this._symbol},setSymbol:function(t){this._symbol&&delete this._symbol._instances[this._id],this._symbol=t,t._instances[this._id]=this},clone:function(){return this._clone(new PlacedSymbol(this.symbol))},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(t,e){return this.symbol._definition._getCachedBounds(t,e)},draw:function(t,e){Item.draw(this.symbol._definition,t,e)}}),HitResult=this.HitResult=Base.extend({initialize:function(t,e,i){this.type=t,this.item=e,i&&(i.enumerable=!0,this.inject(i))},statics:{getOptions:function(t){return t&&t._merged?t:Base.merge({type:null,tolerance:paper.project.options.hitTolerance||2,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1,_merged:!0},t)}}}),Segment=this.Segment=Base.extend({_type:"Segment",initialize:function(t,e,i,n,s,r){var o,a,u,l=arguments.length,h=SegmentPoint.create;0==l||(1==l?t.point?(o=t.point,a=t.handleIn,u=t.handleOut):o=t:6>l?2==l&&void 0===e.x?o=[t,e]:(o=t,a=e,u=i):6==l&&(o=[t,e],a=[i,n],u=[s,r])),h(this,"_point",o),h(this,"_handleIn",a),h(this,"_handleOut",u)},_serialize:function(t){return Base.serialize(this._handleIn.isZero()&&this._handleOut.isZero()?this._point:[this._point,this._handleIn,this._handleOut],t,!0)},_changed:function(t){if(this._path){var e,i=this._path._curves&&this.getCurve();i&&(i._changed(),(e=i[t==this._point||t==this._handleIn&&i._segment1==this?"getPrevious":"getNext"]())&&e._changed()),this._path._changed(5)}},getPoint:function(){return this._point},setPoint:function(t){t=Point.read(arguments),this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(t){t=Point.read(arguments),this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(t){t=Point.read(arguments),this._handleOut.set(t.x,t.y)},isLinear:function(){return this._handleIn.isZero()&&this._handleOut.isZero()},setLinear:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},_isSelected:function(t){var e=this._selectionState;return t==this._point?!!(4&e):t==this._handleIn?!!(1&e):t==this._handleOut?!!(2&e):!1},_setSelected:function(t,e){var i=this._path,e=!!e,n=this._selectionState||0,s=[!!(4&n),!!(1&n),!!(2&n)];if(t==this._point){if(e)s[1]=s[2]=!1;else{var r=this.getPrevious(),o=this.getNext();s[1]=r&&(r._point.isSelected()||r._handleOut.isSelected()),s[2]=o&&(o._point.isSelected()||o._handleIn.isSelected())}s[0]=e}else{var a=t==this._handleIn?1:2;s[a]!=e&&(e&&(s[0]=!1),s[a]=e)}this._selectionState=(s[0]?4:0)|(s[1]?1:0)|(s[2]?2:0),i&&n!=this._selectionState&&(i._updateSelection(this,n,this._selectionState),i._changed(33))},isSelected:function(){return this._isSelected(this._point)},setSelected:function(t){this._setSelected(this._point,t)},getIndex:function(){return void 0!==this._index?this._index:null},getPath:function(){return this._path||null},getCurve:function(){if(this._path){var t=this._index;return this._path._closed||t!=this._path._segments.length-1||t--,this._path.getCurves()[t]||null}return null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},reverse:function(){return new Segment(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Segment(this._point,this._handleIn,this._handleOut)},equals:function(t){return t==this||t&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},_transformCoordinates:function(t,e,i){var n=this._point,s=i&&this._handleIn.isZero()?null:this._handleIn,r=i&&this._handleOut.isZero()?null:this._handleOut,o=n._x,a=n._y,u=2;return e[0]=o,e[1]=a,s&&(e[u++]=s._x+o,e[u++]=s._y+a),r&&(e[u++]=r._x+o,e[u++]=r._y+a),t&&(t._transformCoordinates(e,0,e,0,u/2),o=e[0],a=e[1],i?(n._x=o,n._y=a,u=2,s&&(s._x=e[u++]-o,s._y=e[u++]-a),r&&(r._x=e[u++]-o,r._y=e[u++]-a)):(s||(e[u++]=o,e[u++]=a),r||(e[u++]=o,e[u++]=a))),e}}),SegmentPoint=Point.extend({set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return Numerical.isZero(this._x)&&Numerical.isZero(this._y)},setSelected:function(t){this._owner._setSelected(this,t)},isSelected:function(){return this._owner._isSelected(this)},statics:{create:function(t,e,i){var n,s,r,o=Base.create(SegmentPoint);return i?void 0!==(n=i[0])?s=i[1]:(void 0===(n=i.x)&&(i=Point.read(arguments,2),n=i.x),s=i.y,r=i.selected):n=s=0,o._x=n,o._y=s,o._owner=t,t[e]=o,r&&o.setSelected(!0),o}}}),Curve=this.Curve=Base.extend({initialize:function(t,e,i,n,s,r,o,a){var u=arguments.length;if(0==u)this._segment1=new Segment,this._segment2=new Segment;else if(1==u)this._segment1=new Segment(t.segment1),this._segment2=new Segment(t.segment2);else if(2==u)this._segment1=new Segment(t),this._segment2=new Segment(e);else{var l,h,c,d;4==u?(l=t,h=e,c=i,d=n):8==u&&(l=[t,e],d=[o,a],h=[i-t,a-e],c=[s-o,r-a]),this._segment1=new Segment(l,null,h),this._segment2=new Segment(d,c,null)}},_changed:function(){delete this._length,delete this._bounds},getPoint1:function(){return this._segment1._point},setPoint1:function(t){t=Point.read(arguments),this._segment1._point.set(t.x,t.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(t){t=Point.read(arguments),this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(t){t=Point.read(arguments),this._segment1._handleOut.set(t.x,t.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(t){t=Point.read(arguments),this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isSelected:function(){return this.getHandle1().isSelected()&&this.getHandle2().isSelected()},setSelected:function(t){this.getHandle1().setSelected(t),this.getHandle2().setSelected(t)},getValues:function(){return Curve.getValues(this._segment1,this._segment2)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;8>i;i+=2)e.push(Point.create(t[i],t[i+1]));return e},getLength:function(){var t=arguments[0],e=arguments[1],i=0==arguments.length||0==t&&1==e;if(i&&null!=this._length)return this._length;var n=Curve.getLength(this.getValues(),t,e);return i&&(this._length=n),n},getPart:function(t,e){return new Curve(Curve.getPart(this.getValues(),t,e))},isLinear:function(){return this._segment1._handleOut.isZero()&&this._segment2._handleIn.isZero()},getIntersections:function(t){return Curve._addIntersections(this.getValues(),t.getValues(),this,[])},getCrossings:function(t,e){for(var i=this.getValues(),n=Curve.solveCubic(i,1,t.y,e),s=0,r=0;n>r;r++){var o=e[r];if(o>=0&&1>o&&Curve.evaluate(i,o,!0,0).x>t.x){if(1e-5>o&&Curve.evaluate(this.getPrevious().getValues(),1,!0,1).y*Curve.evaluate(i,o,!0,1).y>=1e-5)continue;s++}}return s},reverse:function(){return new Curve(this._segment2.reverse(),this._segment1.reverse())},divide:function(t){var e=null;if(t&&t.curve===this&&(t=t.parameter),t>0&&1>t){var i=Curve.subdivide(this.getValues(),t),n=this.isLinear(),s=i[0],r=i[1],o=this._segment1._point,a=this._segment2._point;n||(this._segment1._handleOut.set(s[2]-o._x,s[3]-o._y),this._segment2._handleIn.set(r[4]-a._x,r[5]-a._y));var u=s[6],l=s[7],h=new Segment(Point.create(u,l),n?null:Point.create(s[4]-u,s[5]-l),n?null:Point.create(r[2]-u,r[3]-l));if(this._path)this._segment1._index>0&&0===this._segment2._index?this._path.add(h):this._path.insert(this._segment2._index,h),e=this;else{var c=this._segment2;this._segment2=h,e=new Curve(h,c)}}return e},split:function(t){return this._path?this._path.split(this._segment1._index,t):null},clone:function(){return new Curve(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},statics:{create:function(t,e,i){var n=Base.create(Curve);return n._path=t,n._segment1=e,n._segment2=i,n},getValues:function(t,e){var i=t._point,n=t._handleOut,s=e._handleIn,r=e._point;return[i._x,i._y,i._x+n._x,i._y+n._y,r._x+s._x,r._y+s._y,r._x,r._y]},evaluate:function(t,e,i,n){var s,r,o=i?e:Curve.getParameterAt(t,e,0),a=t[0],u=t[1],l=t[2],h=t[3],c=t[4],d=t[5],p=t[6],f=t[7];if(0!=n||0!=o&&1!=o){var g=1e-5;g>o&&l==a&&h==u?o=g:o>1-g&&c==p&&d==f&&(o=1-g);var m=3*(l-a),v=3*(c-l)-m,y=p-a-m-v,_=3*(h-u),w=3*(d-h)-_,b=f-u-_-w;switch(n){case 0:s=((y*o+v)*o+m)*o+a,r=((b*o+w)*o+_)*o+u;break;case 1:case 2:s=(3*y*o+2*v)*o+m,r=(3*b*o+2*w)*o+_}}else s=0==o?a:p,r=0==o?u:f;return 2==n?new Point(r,-s):new Point(s,r)},subdivide:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5],u=t[6],l=t[7];void 0===e&&(e=.5);var h=1-e,c=h*i+e*s,d=h*n+e*r,p=h*s+e*o,f=h*r+e*a,g=h*o+e*u,m=h*a+e*l,v=h*c+e*p,y=h*d+e*f,_=h*p+e*g,w=h*f+e*m,b=h*v+e*_,x=h*y+e*w;return[[i,n,c,d,v,y,b,x],[b,x,_,w,g,m,u,l]]},solveCubic:function(t,e,i,n){var s=t[e],r=t[e+2],o=t[e+4],a=t[e+6],u=3*(r-s),l=3*(o-r)-u,h=a-s-u-l;return Numerical.solveCubic(h,l,u,s-i,n,1e-5)},getParameterOf:function(t,e,i){if(1e-5>Math.abs(t[0]-e)&&1e-5>Math.abs(t[1]-i))return 0;if(1e-5>Math.abs(t[6]-e)&&1e-5>Math.abs(t[7]-i))return 1;for(var n,s,r=[],o=[],a=Curve.solveCubic(t,0,e,r),u=Curve.solveCubic(t,1,i,o),l=0;-1==a||a>l;)if(-1==a||(n=r[l++])>=0&&1>=n){for(var h=0;-1==u||u>h;)if((-1==u||(s=o[h++])>=0&&1>=s)&&(-1==a?n=s:-1==u&&(s=n),1e-5>Math.abs(n-s)))return.5*(n+s);if(-1==a)break}return null},getPart:function(t,e,i){return e>0&&(t=Curve.subdivide(t,e)[1]),1>i&&(t=Curve.subdivide(t,(i-e)/(1-e))[0]),t},isFlatEnough:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5],u=t[6],l=t[7],h=3*s-2*i-u,c=3*r-2*n-l,d=3*o-2*u-i,p=3*a-2*l-n;return 16*e*e>Math.max(h*h,d*d)+Math.max(c*c,p*p)},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(0),n=Array(2),s=0;2>s;s++)Curve._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,i,n);return Rectangle.create(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,n,s,r,o,a,u){function l(t,e){var i=t-e,n=t+e;o[s]>i&&(o[s]=i),n>a[s]&&(a[s]=n)}var h=3*(e-i)-t+n,c=2*(t+i)-4*e,d=e-t,p=Numerical.solveQuadratic(h,c,d,u,1e-5),f=1e-5,g=1-f;l(n,0);for(var m=0;p>m;m++){var v=u[m],y=1-v;v>f&&g>v&&l(y*y*y*t+3*y*y*v*e+3*y*v*v*i+v*v*v*n,r)}},_addIntersections:function(t,e,i,n){var s=Curve.getBounds(t),r=Curve.getBounds(e);if(s.x+s.width>=r.x&&s.y+s.height>=r.y&&s.x<r.x+r.width&&s.y<r.y+r.height)if(Curve.isFlatEnough(t,1e-5)&&Curve.isFlatEnough(e,1e-5)){var o=new Line(t[0],t[1],t[6],t[7],!1).intersect(new Line(e[0],e[1],e[6],e[7],!1));o&&n.push(new CurveLocation(i,null,o))}else for(var a=Curve.subdivide(t),u=Curve.subdivide(e),l=0;2>l;l++)for(var h=0;2>h;h++)this._addIntersections(a[l],u[h],i,n);return n}}},Base.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=Path[t]([this._segment1,this._segment2],!1,this._path._style)),e.clone()}},{}),Base.each(["getPoint","getTangent","getNormal"],function(t,e){this[t+"At"]=function(t,i){return Curve.evaluate(this.getValues(),t,i,e)},this[t]=function(t){return Curve.evaluate(this.getValues(),t,!0,e)}},{getParameterAt:function(t,e){return Curve.getParameterAt(this.getValues(),t,void 0!==e?e:0>t?1:0)},getParameterOf:function(t){return t=Point.read(arguments),Curve.getParameterOf(this.getValues(),t.x,t.y)},getLocationAt:function(t,e){return e||(t=this.getParameterAt(t)),new CurveLocation(this,t)},getLocationOf:function(){var t=this.getParameterOf.apply(this,arguments);return null!=t?new CurveLocation(this,t):null}}),new function(){function t(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],u=t[7],l=9*(n-r)+3*(a-e),h=6*(e+r)-12*n,c=3*(n-e),d=9*(s-o)+3*(u-i),p=6*(i+o)-12*s,f=3*(s-i);return function(t){var e=(l*t+h)*t+c,i=(d*t+p)*t+f;return Math.sqrt(e*e+i*i)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}return{statics:!0,getLength:function(i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=1),i[0]==i[2]&&i[1]==i[3]&&i[6]==i[4]&&i[7]==i[5]){var r=i[6]-i[0],o=i[7]-i[1];return(s-n)*Math.sqrt(r*r+o*o)}var a=t(i);return Numerical.integrate(a,n,s,e(n,s))},getParameterAt:function(i,n,s){function r(t){var i=e(s,t);return d+=t>s?Numerical.integrate(l,s,t,i):-Numerical.integrate(l,t,s,i),s=t,d-n}if(0==n)return s;var o=n>0,a=o?s:0,u=o?1:s,n=Math.abs(n),l=t(i),h=Numerical.integrate(l,a,u,e(a,u));if(n>=h)return o?u:a;var c=n/h,d=0;return Numerical.findRoot(r,l,o?a+c:u-c,a,u,16,1e-5)}}},new function(){function t(t,e){for(var i=3,n=5,s=[],r=[],a=[],u=[],l=0;i>=l;l++)s[l]=t[l].subtract(e),i>l&&(r[l]=t[l+1].subtract(t[l]).multiply(i));for(var h=0;i>h;h++){a[h]=[];for(var c=0;i>=c;c++)a[h][c]=r[h].dot(s[c])}for(var l=0;n>=l;l++)u[l]=new Point(l/n,0);for(var d=0;n>=d;d++)for(var p=Math.max(0,d-i+1),f=Math.min(d,i),l=p;f>=l;l++){var g=d-l;u[d].y+=a[g][l]*o[g][l]}return u}function e(t,r){switch(i(t)){case 0:return[];case 1:if(r>=s)return[.5*(t[0].x+t[5].x)];if(n(t)){var o=new Line(t[0],t[5],!0);return[Numerical.isZero(o.vector.getLength(!0))?o.point.x:a.intersect(o).x]}}for(var u=[[]],l=[],h=[],c=0;5>=c;c++)u[0][c]=new Point(t[c]);for(var d=1;5>=d;d++){u[d]=[];for(var c=0;5-d>=c;c++)u[d][c]=u[d-1][c].add(u[d-1][c+1]).multiply(.5)}for(var c=0;5>=c;c++)l[c]=u[c][0],h[c]=u[5-c][c];return e(l,r+1).concat(e(h,r+1))}function i(t){for(var e=0,i=null,n=0,s=t.length;s>n;n++){var r=0>t[n].y?-1:1;null!=i&&r!=i&&e++,i=r}return e}function n(t){for(var e=t.length-1,i=t[0].y-t[e].y,n=t[e].x-t[0].x,s=t[0].x*t[e].y-t[e].x*t[0].y,o=0,a=0,u=1;e>u;u++){var l=i*t[u].x+n*t[u].y+s,h=l*l;0>l&&h>a?a=h:h>o&&(o=h)}return r>Math.abs((o+a)/(2*i*(i*i+n*n)))}var s=32,r=Math.pow(2,-s-1),o=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],a=new Line(new Point(0,0),new Point(1,0));return{getNearestLocation:function(i){for(var n,s,r=t(this.getPoints(),i),o=e(r,0).concat([0,1]),a=1/0,u=0;o.length>u;u++){var l=this.getPointAt(o[u],!0),h=i.getDistance(l,!0);a>h&&(a=h,n=o[u],s=l)}return new CurveLocation(this,n,s,Math.sqrt(a))},getNearestPoint:function(t){return this.getNearestLocation(t).getPoint()}}}),CurveLocation=this.CurveLocation=Base.extend({initialize:function(t,e,i,n){this._curve=t,this._segment1=t._segment1,this._segment2=t._segment2,this._parameter=e,this._point=i,this._distance=n},getSegment:function(){if(!this._segment){var t=this.getCurve(),e=this.getParameter();if(0==e)this._segment=t._segment1;else if(1==e)this._segment=t._segment2;else{if(null==e)return null;this._segment=t.getLength(0,e)<t.getLength(e,1)?t._segment1:t._segment2}}return this._segment},getCurve:function(){return(!this._curve||arguments[0])&&(this._curve=this._segment1.getCurve(),null==this._curve.getParameterOf(this._point)&&(this._curve=this._segment2.getPrevious().getCurve())),this._curve},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getOffset:function(){var t=this.getPath();return t&&t._getOffset(this)},getCurveOffset:function(){var t=this.getCurve(),e=this.getParameter();return null!=e&&t&&t.getLength(0,e)},getParameter:function(){if((null==this._parameter||arguments[0])&&this._point){var t=this.getCurve(arguments[0]&&this._point);this._parameter=t&&t.getParameterOf(this._point)}return this._parameter},getPoint:function(){if(!this._point&&null!=this._parameter){var t=this.getCurve();this._point=t&&t.getPointAt(this._parameter,!0)}return this._point},getTangent:function(){var t=this.getParameter(),e=this.getCurve();return null!=t&&e&&e.getTangentAt(t,!0)},getNormal:function(){var t=this.getParameter(),e=this.getCurve();return null!=t&&e&&e.getNormalAt(t,!0)},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(!0);return t&&t.divide(this.getParameter(!0))},split:function(){var t=this.getCurve(!0);return t&&t.split(this.getParameter(!0))},toString:function(){var t=[],e=this.getPoint();e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var n=this.getParameter();return null!=n&&t.push("parameter: "+Format.number(n)),null!=this._distance&&t.push("distance: "+Format.number(this._distance)),"{ "+t.join(", ")+" }"}}),PathItem=this.PathItem=Item.extend({getIntersections:function(t){if(!this.getBounds().intersects(t.getBounds()))return[];for(var e=[],i=this.getCurves(),n=t.getCurves(),s=n.length,r=[],o=0;s>o;o++)r[o]=n[o].getValues();for(var o=0,a=i.length;a>o;o++)for(var u=i[o],l=u.getValues(),h=0;s>h;h++)Curve._addIntersections(l,r[h],u,e);return e},setPathData:function(t){function e(t,e,i){var s=parseFloat(n[t]);return o&&(s+=a[e]),i&&(a[e]=s),s}function i(t,i){return new Point(e(t,"x",i),e(t+1,"y",i))}var n,s,r=t.match(/[a-z][^a-z]*/gi),o=!1,a=new Point;"Path"===this._type?this.removeSegments():this.removeChildren();for(var u=0,l=r.length;l>u;u++){var h=r[u];switch(cmd=h[0],lower=cmd.toLowerCase(),n=h.slice(1).trim().split(/[\s,]+|(?=[+-])/),o=cmd===lower,lower){case"m":case"l":for(var c=0;n.length>c;c+=2)this[0===c&&"m"===lower?"moveTo":"lineTo"](i(c,!0));break;case"h":case"v":for(var d="h"==lower?"x":"y",c=0;n.length>c;c++)e(c,d,!0),this.lineTo(a);break;case"c":this.cubicCurveTo(i(0),s=i(2),i(4,!0));break;case"s":this.cubicCurveTo(a.multiply(2).subtract(s),s=i(0),i(2,!0));break;case"q":this.quadraticCurveTo(s=i(0),i(2,!0));break;case"t":for(var c=0;n.length>c;c+=2)this.quadraticCurveTo(s=a.multiply(2).subtract(s),i(c,!0));break;case"a":break;case"z":this.closePath()}}}}),Path=this.Path=PathItem.extend({_type:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this.base();var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||void 0===t.point&&void 0===t.x?null:arguments;this.setSegments(e||[]),e||this._set(t)},clone:function(){var t=this._clone(new Path(this._segments));return t._closed=this._closed,void 0!==this._clockwise&&(t._clockwise=this._clockwise),t},_changed:function(t){if(Item.prototype._changed.call(this,t),4&t){if(delete this._length,delete this._clockwise,this._curves)for(var e=0,i=this._curves.length;i>e;e++)this._curves[e]._changed(5)}else 8&t&&delete this._bounds},getSegments:function(){return this._segments},setSegments:function(t){this._selectedSegmentState=0,this._segments.length=0,delete this._curves,this._add(Segment.readAll(t))},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=Array(i);for(var n=0;i>n;n++)t[n]=Curve.create(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},getPathData:function(){function t(t,e,i){var n=t._point,a=e._point,u=t._handleOut,l=e._handleIn;if(u.isZero()&&l.isZero())i||o.push("L"+s(a,r));else{var h=a.subtract(n);o.push("c"+s(u,r)+" "+s(h.add(l),r)+" "+s(h,r))}}var e=this._segments,n=this._style,s=Format.point,r=arguments[0],o=[];if(0===e.length)return"";for(o.push("M"+s(e[0]._point)),i=0,l=e.length-1;l>i;i++)t(e[i],e[i+1],!1);return(this._closed&&n._strokeColor||n._fillColor)&&t(e[e.length-1],e[0],!0),this._closed&&o.push("z"),o.join("")},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=Curve.create(this,this._segments[e-1],this._segments[0]))}this._changed(5)}},isEmpty:function(){return 0===this._segments.length},isPolygon:function(){for(var t=0,e=this._segments.length;e>t;t++)if(!this._segments[t].isLinear())return!1;return!0},applyMatrix:!0,_applyMatrix:function(t){for(var e=Array(6),i=0,n=this._segments.length;n>i;i++)this._segments[i]._transformCoordinates(t,e,!0);var s=this._style,r=s._fillColor,o=s._strokeColor;return r&&r.transform&&r.transform(t),o&&o.transform&&o.transform(t),!0},_add:function(t,e){for(var i=this._segments,n=this._curves,s=t.length,r=null==e,e=r?i.length:e,o=this.isFullySelected(),a=0;s>a;a++){var u=t[a];u._path&&(u=t[a]=u.clone()),u._path=this,u._index=e+a,o&&(u._selectionState=4),u._selectionState&&this._updateSelection(u,0,u._selectionState)}if(r)i.push.apply(i,t);else{i.splice.apply(i,[e,0].concat(t));for(var a=e+s,l=i.length;l>a;a++)i[a]._index=a}if(n||t._curves){n||(n=this._curves=[]);var h=e>0?e-1:e,c=h,d=Math.min(h+s,this._countCurves());t._curves&&(n.splice.apply(n,[h,0].concat(t._curves)),c+=t._curves.length);for(var a=c;d>a;a++)n.splice(a,0,Base.create(Curve));this._adjustCurves(h,d)}return this._changed(5),t},_adjustCurves:function(t,e){for(var i,n=this._segments,s=this._curves,r=t;e>r;r++)i=s[r],i._path=this,i._segment1=n[r],i._segment2=n[r+1]||n[0];(i=s[this._closed&&0===t?n.length-1:t-1])&&(i._segment2=n[t]||n[0]),(i=s[e])&&(i._segment1=n[e])},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(Segment.readAll(arguments)):this._add([Segment.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(Segment.readAll(arguments,1),t):this._add([Segment.read(arguments,1)],t)[0]},addSegment:function(){return this._add([Segment.read(arguments)])[0]},insertSegment:function(t){return this._add([Segment.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(Segment.readAll(t))},insertSegments:function(t,e){return this._add(Segment.readAll(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e){t=t||0,e=Base.pick(e,this._segments.length);var i=this._segments,n=this._curves,s=i.length,r=i.splice(t,e-t),o=r.length;if(!o)return r;for(var a=0;o>a;a++){var u=r[a];u._selectionState&&this._updateSelection(u,u._selectionState,0),delete u._index,delete u._path}for(var a=t,l=i.length;l>a;a++)i[a]._index=a;if(n){var h=e==s+(this._closed?1:0)?t-1:t,n=n.splice(h,o);arguments[2]&&(r._curves=n.slice(1)),this._adjustCurves(h,h)}return this._changed(5),r},isFullySelected:function(){return this._selected&&this._selectedSegmentState==4*this._segments.length},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelected:function(t){t||this._selectSegments(!1),this.base(t)},_selectSegments:function(t){var e=this._segments.length;this._selectedSegmentState=t?4*e:0;for(var i=0;e>i;i++)this._segments[i]._selectionState=t?4:0},_updateSelection:function(t,e,i){t._selectionState=i;var n=this._selectedSegmentState+=i-e;n>0&&this.setSelected(!0)},flatten:function(t){for(var e=new PathFlattener(this),i=0,n=e.length/Math.ceil(e.length/t),s=e.length+(this._closed?-n:n)/2,r=[];s>=i;)r.push(new Segment(e.evaluate(i,0))),i+=n;this.setSegments(r)
},simplify:function(t){if(this._segments.length>2){var e=new PathFitter(this,t||2.5);this.setSegments(e.fit())}},split:function(t,e){if(null!==e){if(1==arguments.length){var i=t;"number"==typeof i&&(i=this.getLocationAt(i)),t=i.index,e=i.parameter}e>=1&&(t++,e--);var n=this.getCurves();if(t>=0&&n.length>t){e>0&&n[t++].divide(e);var s,r=this.removeSegments(t,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):t>0&&(s=this._clone((new Path).insertAbove(this,!0))),s._add(r,0),this.addSegment(r[0]),s}return null}},isClockwise:function(){function t(t,s){void 0!==e&&(n+=(e-t)*(s+i)),e=t,i=s}if(void 0!==this._clockwise)return this._clockwise;for(var e,i,n=0,s=0,r=this._segments.length;r>s;s++){var o=this._segments[s],a=this._segments[r>s+1?s+1:0],u=o._point,l=o._handleOut,h=a._handleIn,c=a._point;t(u._x,u._y),t(u._x+l._x,u._y+l._y),t(c._x+h._x,c._y+h._y),t(c._x,c._y)}return n>0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;e>t;t++){var i=this._segments[t],n=i._handleIn;i._handleIn=i._handleOut,i._handleOut=n,i._index=t}void 0!==this._clockwise&&(this._clockwise=!this._clockwise)},join:function(t){if(t){var e=t._segments,i=this.getLastSegment(),n=t.getLastSegment();i._point.equals(n._point)&&t.reverse();var s=t.getFirstSegment();if(i._point.equals(s._point))i.setHandleOut(s._handleOut),this._add(e.slice(1));else{var r=this.getFirstSegment();r._point.equals(s._point)&&t.reverse(),n=t.getLastSegment(),r._point.equals(n._point)?(r.setHandleIn(n._handleIn),this._add(e.slice(0,e.length-1),0)):this._add(e.slice(0))}t.remove();var r=this.getFirstSegment();return i=this.getLastSegment(),i._point.equals(r._point)&&(r.setHandleIn(i._handleIn),i.remove(),this.setClosed(!0)),this._changed(5),!0}return!1},reduce:function(){return this},getLength:function(){if(null==this._length){var t=this.getCurves();this._length=0;for(var e=0,i=t.length;i>e;e++)this._length+=t[e].getLength()}return this._length},_getOffset:function(t){var e=t&&t.getIndex();if(null!=e){for(var i=this.getCurves(),n=0,s=0;e>s;s++)n+=i[s].getLength();var r=i[e];return n+r.getLength(0,t.getParameter())}return null},getLocationOf:function(t){t=Point.read(arguments);for(var e=this.getCurves(),i=0,n=e.length;n>i;i++){var s=e[i].getLocationOf(t);if(s)return s}return null},getLocationAt:function(t,e){var i=this.getCurves(),n=0;if(e){var s=~~t;return i[s].getLocationAt(t-s,!0)}for(var r=0,o=i.length;o>r;r++){var a=n,u=i[r];if(n+=u.getLength(),n>=t)return u.getLocationAt(t-a)}return this.getLength()>=t?new CurveLocation(i[i.length-1],1):null},getPointAt:function(t,e){var i=this.getLocationAt(t,e);return i&&i.getPoint()},getTangentAt:function(t,e){var i=this.getLocationAt(t,e);return i&&i.getTangent()},getNormalAt:function(t,e){var i=this.getLocationAt(t,e);return i&&i.getNormal()},getNearestLocation:function(t){for(var e=this.getCurves(),i=1/0,n=null,s=0,r=e.length;r>s;s++){var o=e[s].getNearestLocation(t);i>o._distance&&(i=o._distance,n=o)}return n},getNearestPoint:function(t){return this.getNearestLocation(t).getPoint()},hasFill:function(){return this._style._fillColor||this._parent instanceof CompoundPath&&this._parent._style._fillColor},contains:function(t){t=Point.read(arguments);var e=this.hasFill();if(!this._closed&&!e||!this.getRoughBounds()._containsPoint(t))return!1;for(var i=this.getCurves(),n=this._segments,s=0,r=Array(3),o=0,a=i.length;a>o;o++)s+=i[o].getCrossings(t,r);return!this._closed&&e&&(s+=Curve.create(this,n[n.length-1],n[0]).getCrossings(t,r)),1==(1&s)},_hitTest:function(t,e){function i(e,i,n){return a>t.getDistance(i)?new HitResult(n,l,{segment:e,point:i}):void 0}function n(t,n){var s=t._point;return(n||e.segments)&&i(t,s,"segment")||!n&&e.handles&&(i(t,s.add(t._handleIn),"handle-in")||i(t,s.add(t._handleOut),"handle-out"))}var s,r,o=this._style,a=e.tolerance||0,u=(e.stroke&&o._strokeColor?o._strokeWidth/2:0)+a,l=this;if(!e.ends||e.segments||this._closed){if(e.segments||e.handles)for(var h=0,c=this._segments.length;c>h;h++)if(r=n(this._segments[h]))return r}else if(r=n(this.getFirstSegment(),!0)||n(this.getLastSegment(),!0))return r;return e.stroke&&u>0&&(s=this.getNearestLocation(t)),!(s&&u>=s._distance)&&e.fill&&this.hasFill()&&this.contains(t)?new HitResult("fill",this):(!s&&e.stroke&&u>0&&(s=this.getNearestLocation(t)),s&&u>=s._distance?e.stroke?new HitResult("stroke",this,{location:s}):new HitResult("fill",this):void 0)}},new function(){function t(t,e,i,n){function s(e){var i=o[e],n=o[e+1];(d!=i||p!=n)&&(t.beginPath(),t.moveTo(d,p),t.lineTo(i,n),t.stroke(),t.beginPath(),t.arc(i,n,r,0,2*Math.PI,!0),t.fill())}for(var r=n/2,o=Array(6),a=0,u=e.length;u>a;a++){var l=e[a];l._transformCoordinates(i,o,!1);var h=l._selectionState,c=4&h,d=o[0],p=o[1];(c||1&h)&&s(2),(c||2&h)&&s(4),t.save(),t.beginPath(),t.arc(d,p,10,0,2*Math.PI,!1),t.fillStyle="#fff",t.fill(),t.beginPath(),t.arc(d,p,8,0,2*Math.PI,!1),t.fillStyle=window.editing_mode?"#ff0000":"#000",t.fill(),window.editing_mode?(t.beginPath(),t.moveTo(d-2,p),t.lineTo(d+2,p),t.fillStyle="#fff",t.stroke()):(t.beginPath(),t.arc(d,p,4,0,2*Math.PI,!1),t.fillStyle="#fff",t.fill(),t.beginPath(),t.arc(d,p,2,0,2*Math.PI,!1),t.fillStyle="#000",t.fill()),t.restore()}}function e(t,e,i){function n(e){t.fillStyle="#000";var n=d[e];if(i)n._transformCoordinates(i,f,!1),s=f[0],r=f[1];else{var p=n._point;s=p._x,r=p._y}if(g)t.moveTo(s,r),g=!1;else{if(i)u=f[2],l=f[3];else{var m=n._handleIn;u=s+m._x,l=r+m._y}u==s&&l==r&&h==o&&c==a?t.lineTo(s,r):t.bezierCurveTo(h,c,u,l,s,r)}if(o=s,a=r,i)h=f[4],c=f[5];else{var m=n._handleOut;h=o+m._x,c=a+m._y}}for(var s,r,o,a,u,l,h,c,d=e._segments,p=d.length,f=Array(6),g=!0,m=0;p>m;m++)n(m);e._closed&&p>1&&n(0)}return{draw:function(t,i){i.compound||t.beginPath();var n=this._style,s="#fff",r=n._strokeColor,o=n._dashArray,a=!paper.support.nativeDash&&r&&o&&o.length,u=i.clip||this._clipMask;if((i.compound||u||s||r&&!a)&&e(t,this),this._closed&&t.closePath(),u)t.clip();else if(!i.compound&&(s||r)&&(this._setStyles(t),s&&t.fill(),r)){if(a){t.beginPath();for(var l,h=new PathFlattener(this),c=n._dashOffset,d=0;h.length>c;)l=c+o[d++%o.length],h.drawPart(t,c,l),c=l+o[d++%o.length]}t.stroke()}},drawSelected:function(i,n){i.beginPath(),e(i,this,n),i.fillStyle="#fff",i.strokeStyle="#fff";var s="setLineDash"in i;s&&i.setLineDash([12,6]),i.lineWidth=2,i.stroke(),window.drawmode||t(i,this._segments,n,this._project.options.handleSize||"ontouchstart"in window||window.navigator.msMaxTouchPoints>0?22:11)}}},new function(){function t(t){var e=t.length,i=[],n=[],s=2;i[0]=t[0]/s;for(var r=1;e>r;r++)n[r]=1/s,s=(e-1>r?4:2)-n[r],i[r]=(t[r]-i[r-1])/s;for(var r=1;e>r;r++)i[e-r-1]-=n[e-r]*i[e-r];return i}return{smooth:function(){var e,i=this._segments,n=i.length,s=n;if(!(2>=n)){this._closed?(e=Math.min(n,4),s+=2*Math.min(n,e)):e=0;for(var r=[],o=0;n>o;o++)r[o+e]=i[o]._point;if(this._closed)for(var o=0;e>o;o++)r[o]=i[o+n-e]._point,r[o+n+e]=i[o]._point;else s--;for(var a=[],o=1;s-1>o;o++)a[o]=4*r[o]._x+2*r[o+1]._x;a[0]=r[0]._x+2*r[1]._x,a[s-1]=3*r[s-1]._x;for(var u=t(a),o=1;s-1>o;o++)a[o]=4*r[o]._y+2*r[o+1]._y;a[0]=r[0]._y+2*r[1]._y,a[s-1]=3*r[s-1]._y;var l=t(a);if(this._closed){for(var o=0,h=n;e>o;o++,h++){var c=o/e,d=1-c,p=o+e,f=h+e;u[h]=u[o]*c+u[h]*d,l[h]=l[o]*c+l[h]*d,u[f]=u[p]*d+u[f]*c,l[f]=l[p]*d+l[f]*c}s--}for(var g=null,o=e;s-e>=o;o++){var m=i[o-e];g&&m.setHandleIn(g.subtract(m._point)),s>o&&(m.setHandleOut(Point.create(u[o],l[o]).subtract(m._point)),g=s-1>o?Point.create(2*r[o+1]._x-u[o+1],2*r[o+1]._y-l[o+1]):Point.create((r[s]._x+u[s-1])/2,(r[s]._y+l[s-1])/2))}if(this._closed&&g){var m=this._segments[0];m.setHandleIn(g.subtract(m._point))}}}}},new function(){function t(t){var e=t._segments;if(0==e.length)throw Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){1===this._segments.length&&this.removeSegment(0),this._segments.length||this._add([new Segment(Point.read(arguments))])},moveBy:function(){throw Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Segment(Point.read(arguments))])},cubicCurveTo:function(e,i,n){var s=Point.read(arguments),r=Point.read(arguments),o=Point.read(arguments),a=t(this);a.setHandleOut(s.subtract(a._point)),this._add([new Segment(o,r.subtract(n))])},quadraticCurveTo:function(e,i){var n=Point.read(arguments),i=Point.read(arguments),s=t(this)._point;this.cubicCurveTo(n.add(s.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var e=Point.read(arguments),i=Point.read(arguments),n=Base.pick(Base.read(arguments),.5),s=1-n,r=t(this)._point,o=e.subtract(r.multiply(s*s)).subtract(i.multiply(n*n)).divide(2*n*s);if(o.isNaN())throw Error("Cannot put a curve through points with parameter = "+n);this.quadraticCurveTo(o,i)},arcTo:function(e,i){var n,s=t(this),r=s._point,o=Point.read(arguments),a=Base.pick(Base.peek(arguments),!0);if("boolean"==typeof a){e=o,i=a;var u=r.add(e).divide(2),n=u.add(u.subtract(r).rotate(i?-90:90))}else n=o,e=Point.read(arguments);var l=new Line(r.add(n).divide(2),n.subtract(r).rotate(90)),h=new Line(n.add(e).divide(2),e.subtract(n).rotate(90)),c=l.intersect(h),d=new Line(r,e,!0),p=d.getSide(n);if(!c){if(!p)return this.lineTo(e);throw Error("Cannot put an arc through the given points: "+[r,n,e])}var f=r.subtract(c),g=(f.getLength(),f.getDirectedAngle(e.subtract(c))),m=d.getSide(c);0==m?g=p*Math.abs(g):p==m&&(g-=360*(0>g?-1:1));for(var v=Math.abs(g),y=v>=360?4:Math.ceil(v/90),_=g/y,w=_*Math.PI/360,b=4/3*Math.sin(w)/(1+Math.cos(w)),x=[],k=0;y>=k;k++){var C=y>k?c.add(f):e,S=y>k?f.rotate(90).multiply(b):null;0==k?s.setHandleOut(S):x.push(new Segment(C,f.rotate(-90).multiply(b),S)),f=f.rotate(_)}this._add(x)},lineBy:function(e){e=Point.read(arguments);var i=t(this);this.lineTo(i._point.add(e))},curveBy:function(e,i,n){e=Point.read(e),i=Point.read(i);var s=t(this)._point;this.curveTo(s.add(e),s.add(i),n)},arcBy:function(e,i){e=Point.read(e),i=Point.read(i);var n=t(this)._point;this.arcBy(n.add(e),n.add(i))},closePath:function(){var t=this.getFirstSegment(),e=this.getLastSegment();t._point.equals(e._point)&&(t.setHandleIn(e._handleIn),e.remove()),this.setClosed(!0)}}},{_getBounds:function(t,e){return Path[t](this._segments,this._closed,this._style,e)},statics:{getBounds:function(t,e,i,n,s){function r(t){t._transformCoordinates(n,a,!1);for(var e=0;2>e;e++)Curve._addBounds(u[e],u[e+4],a[e+2],a[e],e,s?s[e]:0,l,h,c);var i=u;u=a,a=i}var o=t[0];if(!o)return new Rectangle;for(var a=Array(6),u=o._transformCoordinates(n,Array(6),!1),l=u.slice(0,2),h=l.slice(0),c=Array(2),d=1,p=t.length;p>d;d++)r(t[d]);return e&&r(o),Rectangle.create(l[0],l[1],h[0]-l[0],h[1]-l[1])},getStrokeBounds:function(t,e,i,n){function s(t,e){if(!e)return[t,t];var i=e.shiftless(),n=i.transform(Point.create(t,0)),s=i.transform(Point.create(0,t)),r=n.getAngleInRadians(),o=n.getLength(),a=s.getLength(),u=Math.sin(r),l=Math.cos(r),h=Math.tan(r),c=-Math.atan(a*h/o),d=Math.atan(a/(h*o));return[Math.abs(o*Math.cos(c)*l-a*Math.sin(c)*u),Math.abs(a*Math.sin(d)*l+o*Math.cos(d)*u)]}function r(t){c=c.include(n?n._transformPoint(t,t):t)}function o(t,e){var i=t.getPointAt(e,!0),n=t.getNormalAt(e,!0).normalize(l);r(i.add(n)),r(i.subtract(n))}function a(t,e){if("round"===e||!t._handleIn.isZero()&&!t._handleOut.isZero())c=c.unite(g.setCenter(n?n._transformPoint(t._point):t._point));else if("bevel"==e){var i=t.getCurve();o(i,0),o(i.getPrevious(),1)}else if("miter"==e){var s=t.getCurve(),u=s.getPrevious(),h=s.getPointAt(0,!0),d=u.getNormalAt(1,!0).normalize(l),p=s.getNormalAt(0,!0).normalize(l),m=new Line(h.subtract(d),Point.create(-d.y,d.x)),v=new Line(h.subtract(p),Point.create(-p.y,p.x)),y=m.intersect(v);!y||h.getDistance(y)>f?a(t,"bevel"):r(y)}}function u(t,e,i){switch(e){case"round":return a(t,e);case"butt":case"square":var n=t.getCurve(),s=n.getPointAt(i,!0),o=n.getNormalAt(i,!0).normalize(l);"square"===e&&(s=s.add(o.rotate(0==i?-90:90))),r(s.add(o)),r(s.subtract(o))}}if(!i._strokeColor||!i._strokeWidth)return Path.getBounds(t,e,i,n);for(var l=i._strokeWidth/2,h=s(l,n),c=Path.getBounds(t,e,i,n,h),d=i._strokeJoin,p=i._strokeCap,f=i._miterLimit*i._strokeWidth/2,g=new Rectangle(new Size(h).multiply(2)),m=1,v=t.length-(e?0:1);v>m;m++)a(t[m],d);return e?a(t[0],d):(u(t[0],p,0),u(t[t.length-1],p,1)),c},getHandleBounds:function(t,e,i,n,s,r){var o=Array(6),a=1/0,u=-a,l=a,h=u;s=s/2||0,r=r/2||0;for(var c=0,d=t.length;d>c;c++){var p=t[c];p._transformCoordinates(n,o,!1);for(var f=0;6>f;f+=2){var g=0==f?r:s,m=o[f],v=o[f+1],y=m-g,_=m+g,w=v-g,b=v+g;a>y&&(a=y),_>u&&(u=_),l>w&&(l=w),b>h&&(h=b)}}return Rectangle.create(a,l,u-a,h-l)},getRoughBounds:function(t,e,i,n){var s=i._strokeColor?i._strokeWidth:0;return Path.getHandleBounds(t,e,i,n,s,"miter"==i._strokeJoin?s*i._miterLimit:s)}}});Path.inject({statics:new function(){function t(t){return(new Path).set(Base.getNamed(t))}function e(){var e=Rectangle.readNamed(arguments,"rectangle"),i=e.getLeft(),n=e.getTop(),s=e.getRight(),r=e.getBottom(),o=t(arguments);return o._add([new Segment(Point.create(i,r)),new Segment(Point.create(i,n)),new Segment(Point.create(s,n)),new Segment(Point.create(s,r))]),o._closed=!0,o}function i(){for(var e=Rectangle.readNamed(arguments,"rectangle"),i=t(arguments),n=e.getPoint(!0),r=e.getSize(!0),o=Array(4),a=0;4>a;a++){var u=s[a];o[a]=new Segment(u._point.multiply(r).add(n),u._handleIn.multiply(r),u._handleOut.multiply(r))}return i._add(o),i._closed=!0,i}var n=2*(Math.sqrt(2)-1)/3,s=[new Segment([0,.5],[0,n],[0,-n]),new Segment([.5,0],[-n,0],[n,0]),new Segment([1,.5],[0,-n],[0,n]),new Segment([.5,1],[n,0],[-n,0])];return{Line:function(){return new Path(Point.readNamed(arguments,"from"),Point.readNamed(arguments,"to")).set(Base.getNamed(arguments))},Rectangle:e,RoundRectangle:function(){var i=Rectangle.readNamed(arguments,"rectangle"),s=Size.readNamed(arguments,"radius");if(s.isZero())return e(i);s=Size.min(s,i.getSize(!0).divide(2));var r=i.getBottomLeft(!0),o=i.getTopLeft(!0),a=i.getTopRight(!0),u=i.getBottomRight(!0),l=s.multiply(2*n),h=t(arguments);return h._add([new Segment(r.add(s.width,0),null,[-l.width,0]),new Segment(r.subtract(0,s.height),[0,l.height],null),new Segment(o.add(0,s.height),null,[0,-l.height]),new Segment(o.add(s.width,0),[-l.width,0],null),new Segment(a.subtract(s.width,0),null,[l.width,0]),new Segment(a.add(0,s.height),[0,-l.height],null),new Segment(u.subtract(0,s.height),null,[0,l.height]),new Segment(u.subtract(s.width,0),[l.width,0],null)]),h._closed=!0,h},Ellipse:i,Oval:i,Circle:function(){var t=Point.readNamed(arguments,"center"),e=Base.readNamed(arguments,"radius");return i(new Rectangle(t.subtract(e),Size.create(2*e,2*e))).set(Base.getNamed(arguments))},Arc:function(){var e=Point.readNamed(arguments,"from"),i=Point.readNamed(arguments,"through"),n=Point.readNamed(arguments,"to"),s=t(arguments);return s.moveTo(e),s.arcTo(i,n),s},RegularPolygon:function(){for(var e=Point.readNamed(arguments,"center"),i=Base.readNamed(arguments,"sides"),n=Base.readNamed(arguments,"radius"),s=t(arguments),r=360/i,o=!(i%3),a=new Point(0,o?-n:n),u=o?-1:.5,l=Array(i),h=0;i>h;h++)l[h]=new Segment(e.add(a.rotate((h+u)*r)));return s._add(l),s._closed=!0,s},Star:function(){for(var e=Point.readNamed(arguments,"center"),i=2*Base.readNamed(arguments,"points"),n=Base.readNamed(arguments,"radius1"),s=Base.readNamed(arguments,"radius2"),r=t(arguments),o=360/i,a=new Point(0,-1),u=Array(i),l=0;i>l;l++)u[l]=new Segment(e.add(a.rotate(o*l).multiply(l%2?s:n)));return r._add(u),r._closed=!0,r}}}});var CompoundPath=this.CompoundPath=PathItem.extend({_type:"CompoundPath",_serializeFields:{pathData:""},initialize:function(t){this.base(),this._children=[],this._namedChildren={},this._set(t)||this.addChildren(Array.isArray(t)?t:arguments)},insertChild:function(t,e,i){return"Path"!==e._type?null:(e=this.base(t,e),!i&&e&&void 0===e._clockwise&&e.setClockwise(0==e._index),e)},reduce:function(){if(1==this._children.length){var t=this._children[0];return t.insertAbove(this),this.remove(),t}return this},smooth:function(){for(var t=0,e=this._children.length;e>t;t++)this._children[t].smooth()},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,n=t.length;n>i;i++)e=e.concat(t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},getPathData:function(){for(var t=this._children,e=[],i=0,n=t.length;n>i;i++)e.push(t[i].getPathData(arguments[0]));return e.join(" ")},_contains:function(t){for(var e=[],i=0,n=this._children.length;n>i;i++){var s=this._children[i];s.contains(t)&&e.push(s)}return 1==(1&e.length)&&e},contains:function(){return!!this._contains(Point.read(arguments))},_hitTest:function(t,e){var i=this.base(t,Base.merge(e,{fill:!1}));return!i&&e.fill&&this._style._fillColor&&(i=this._contains(t),i=i?new HitResult("fill",i[0]):null),i},draw:function(t,e){var i=this._children,n=this._style;if(0!=i.length){t.beginPath(),e.compound=!0;for(var s=0,r=i.length;r>s;s++)Item.draw(i[s],t,e);e.compound=!1,e.clip||this._clipMask?t.clip():(this._setStyles(t),n._fillColor&&t.fill(),n._strokeColor&&t.stroke())}}},new function(){function t(t){if(!t._children.length)throw Error("Use a moveTo() command first");return t._children[t._children.length-1]}var e={moveTo:function(){var t=new Path;this.addChild(t),t.moveTo.apply(t,arguments)},moveBy:function(){this.moveTo(t(this).getLastSegment()._point.add(Point.read(arguments)))},closePath:function(){t(this).closePath()}};return Base.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","curveBy","arcBy"],function(i){e[i]=function(){var e=t(this);e[i].apply(e,arguments)}}),e}),PathFlattener=Base.extend({initialize:function(t){function e(t,e){var i=Curve.getValues(t,e);r.curves.push(i),r._computeParts(i,t._index,0,1)}this.curves=[],this.parts=[],this.length=0,this.index=0;for(var i,n=t._segments,s=n[0],r=this,o=1,a=n.length;a>o;o++)i=n[o],e(s,i),s=i;t._closed&&e(i,n[0])},_computeParts:function(t,e,i,n){if(n-i>1/32&&!Curve.isFlatEnough(t,.25)){var s=Curve.subdivide(t),r=(i+n)/2;this._computeParts(s[0],e,i,r),this._computeParts(s[1],e,r,n)}else{var o=t[6]-t[0],a=t[7]-t[1],u=Math.sqrt(o*o+a*a);u>1e-5&&(this.length+=u,this.parts.push({offset:this.length,value:n,index:e}))}},getParameterAt:function(t){for(var e,i=this.index;e=i,!(0==i||t>this.parts[--i].offset););for(var n=this.parts.length;n>e;e++){var s=this.parts[e];if(s.offset>=t){this.index=e;var r=this.parts[e-1],o=r&&r.index==s.index?r.value:0,a=r?r.offset:0;return{value:o+(s.value-o)*(t-a)/(s.offset-a),index:s.index}}}var s=this.parts[this.parts.length-1];return{value:1,index:s.index}},evaluate:function(t,e){var i=this.getParameterAt(t);return Curve.evaluate(this.curves[i.index],i.value,!0,e)},drawPart:function(t,e,i){e=this.getParameterAt(e),i=this.getParameterAt(i);for(var n=e.index;i.index>=n;n++){var s=Curve.getPart(this.curves[n],n==e.index?e.value:0,n==i.index?i.value:1);n==e.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}}),PathFitter=Base.extend({initialize:function(t,e){this.points=[];for(var i,n=t._segments,s=0,r=n.length;r>s;s++){var o=n[s].point.clone();i&&i.equals(o)||(this.points.push(o),i=o)}this.error=e},fit:function(){var t=this.points,e=t.length;return this.segments=e>0?[new Segment(t[0])]:[],e>1&&this.fitCubic(0,e-1,t[1].subtract(t[0]).normalize(),t[e-2].subtract(t[e-1]).normalize()),this.segments},fitCubic:function(t,e,i,n){if(1==e-t){var s=this.points[t],r=this.points[e],o=s.getDistance(r)/3;return this.addCurve([s,s.add(i.normalize(o)),r.add(n.normalize(o)),r]),void 0}for(var a,u=this.chordLengthParameterize(t,e),l=Math.max(this.error,this.error*this.error),h=0;4>=h;h++){var c=this.generateBezier(t,e,u,i,n),d=this.findMaxError(t,e,c,u);if(d.error<this.error)return this.addCurve(c),void 0;if(a=d.index,d.error>=l)break;this.reparameterize(t,e,u,c),l=d.error}var p=this.points[a-1].subtract(this.points[a]),f=this.points[a].subtract(this.points[a+1]),g=p.add(f).divide(2).normalize();this.fitCubic(t,a,i,g),this.fitCubic(a,e,g.negate(),n)},addCurve:function(t){var e=this.segments[this.segments.length-1];e.setHandleOut(t[1].subtract(t[0])),this.segments.push(new Segment(t[3],t[2].subtract(t[3])))},generateBezier:function(t,e,i,n,s){for(var r=1e-11,o=this.points[t],a=this.points[e],u=[[0,0],[0,0]],l=[0,0],h=0,c=e-t+1;c>h;h++){var d=i[h],p=1-d,f=3*d*p,g=p*p*p,m=f*p,v=f*d,y=d*d*d,_=n.normalize(m),w=s.normalize(v),b=this.points[t+h].subtract(o.multiply(g+m)).subtract(a.multiply(v+y));u[0][0]+=_.dot(_),u[0][1]+=_.dot(w),u[1][0]=u[0][1],u[1][1]+=w.dot(w),l[0]+=_.dot(b),l[1]+=w.dot(b)}var x,k,C=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(Math.abs(C)>r){var S=u[0][0]*l[1]-u[1][0]*l[0],P=l[0]*u[1][1]-l[1]*u[0][1];x=P/C,k=S/C}else{var E=u[0][0]+u[0][1],T=u[1][0]+u[1][1];x=k=Math.abs(E)>r?l[0]/E:Math.abs(T)>r?l[1]/T:0}var I=a.getDistance(o);return r*=I,(r>x||r>k)&&(x=k=I/3),[o,o.add(n.normalize(x)),a.add(s.normalize(k)),a]},reparameterize:function(t,e,i,n){for(var s=t;e>=s;s++)i[s-t]=this.findRoot(n,this.points[s],i[s-t])},findRoot:function(t,e,i){for(var n=[],s=[],r=0;2>=r;r++)n[r]=t[r+1].subtract(t[r]).multiply(3);for(var r=0;1>=r;r++)s[r]=n[r+1].subtract(n[r]).multiply(2);var o=this.evaluate(3,t,i),a=this.evaluate(2,n,i),u=this.evaluate(1,s,i),l=o.subtract(e),h=a.dot(a)+l.dot(u);return 1e-5>Math.abs(h)?i:i-l.dot(a)/h},evaluate:function(t,e,i){for(var n=e.slice(),s=1;t>=s;s++)for(var r=0;t-s>=r;r++)n[r]=n[r].multiply(1-i).add(n[r+1].multiply(i));return n[0]},chordLengthParameterize:function(t,e){for(var i=[0],n=t+1;e>=n;n++)i[n-t]=i[n-t-1]+this.points[n].getDistance(this.points[n-1]);for(var n=1,s=e-t;s>=n;n++)i[n]/=i[s];return i},findMaxError:function(t,e,i,n){for(var s=Math.floor((e-t+1)/2),r=0,o=t+1;e>o;o++){var a=this.evaluate(3,i,n[o-t]),u=a.subtract(this.points[o]),l=u.x*u.x+u.y*u.y;l>=r&&(r=l,s=o)}return{error:r,index:s}}}),TextItem=this.TextItem=Item.extend({_boundsSelected:!0,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(t){this._style=CharacterStyle.create(this),this._paragraphStyle=ParagraphStyle.create(this);var e=Base.isPlainObject(t)&&void 0===t.x&&void 0===t.y;this.base(e?null:Point.read(arguments)),this.setParagraphStyle(),this._content="",this._lines=[],e&&this._set(t)},_clone:function(t){return t.setContent(this._content),t.setParagraphStyle(this._paragraphStyle),this.base(t)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(69)},isEmpty:function(){return!this._content},getCharacterStyle:function(){return this.getStyle()},setCharacterStyle:function(t){this.setStyle(t)}}),PointText=this.PointText=TextItem.extend({_type:"PointText",clone:function(){return this._clone(new PointText)},getPoint:function(){var t=this._matrix.getTranslation();return LinkedPoint.create(this,"setPoint",t.x,t.y)},setPoint:function(){this.translate(Point.read(arguments).subtract(this._matrix.getTranslation()))},draw:function(t){if(this._content){this._setStyles(t);var e=this._style,i=this.getLeading(),n=this._lines;t.font=e.getFontStyle(),t.textAlign=this.getJustification();for(var s=0,r=n.length;r>s;s++){var o=n[s];e._fillColor&&t.fillText(o,0,0),e._strokeColor&&t.strokeText(o,0,0),t.translate(0,i)}}}},new function(){var t=null;return{_getBounds:function(e,i){t||(t=CanvasProvider.getContext(1,1));var n=this.getJustification(),s=0;t.font=this._style.getFontStyle();for(var r=0,o=0,a=this._lines.length;a>o;o++)r=Math.max(r,t.measureText(this._lines[o]).width);"left"!==n&&(s-=r/("center"===n?2:1));var u=this.getLeading(),l=this._lines.length,h=Rectangle.create(s,l?u/4+(l-1)*u:0,r,-l*u);return i?i._transformBounds(h,h):h}}}),Style=Base.extend({initialize:function(t){var e=t instanceof Style;return Base.each(this._defaults,function(i,n){i=t&&t[n]||i,this[n]=i&&e&&i.clone?i.clone():i},this)},_getChildren:function(){return this._item instanceof Group&&this._item._children},statics:{create:function(t){var e=Base.create(this);return e._item=t,e},extend:function(t){var e="_"+t._style,i=Base.capitalize(t._style),n=t._flags||{},s={};return s["get"+i]=function(){return this[e]},s["set"+i]=function(t){this[e].initialize(t)},Base.each(t._defaults,function(i,r){var o=/Color$/.test(r),a=Base.capitalize(r),u="set"+a,l="get"+a;t[u]=function(t){var i=this._getChildren();if(t=o?Color.read(arguments,0,0,!0):t,i&&i.length>0)for(var s=0,a=i.length;a>s;s++)i[s][e][u](t);else{var l=this["_"+r];Base.equals(l,t)||(o&&(l&&delete l._owner,t&&(t._owner=this._item)),this["_"+r]=t,this._item&&this._item._changed(n[r]||17))}},t[l]=function(){var t,i=this._getChildren();if(!i||0===i.length)return this["_"+r];for(var n=0,s=i.length;s>n;n++){var o=i[n][e][l]();if(t){if(!Base.equals(t,o))return void 0}else t=o}return t},s[l]=function(){return this[e][l]()},s[u]=function(t){this[e][u](t)}}),t._owner.inject(s),this.base.apply(this,arguments)}}}),PathStyle=this.PathStyle=Style.extend({_owner:Item,_style:"style",_defaults:{fillColor:void 0,strokeColor:void 0,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",miterLimit:10,dashOffset:0,dashArray:[]},_flags:{strokeWidth:25,strokeCap:25,strokeJoin:25,miterLimit:25}}),ParagraphStyle=this.ParagraphStyle=Style.extend({_owner:TextItem,_style:"paragraphStyle",_defaults:{justification:"left"},_flags:{justification:5}}),CharacterStyle=this.CharacterStyle=PathStyle.extend({_owner:TextItem,_style:"style",_defaults:Base.merge(PathStyle.prototype._defaults,{fillColor:"black",fontSize:12,leading:null,font:"sans-serif"}),_flags:{fontSize:5,leading:5,font:5}},{getLeading:function(){var t=this.base();return null!=t?t:1.2*this.getFontSize()},getFontStyle:function(){var t=this._fontSize;return(/[a-z]/i.test(t)?t+" ":t+"px ")+this._font}}),Color=this.Color=Base.extend(new function(){function t(t){var e=s[t];if(e)return e.clone();i||(i=CanvasProvider.getContext(1,1),i.globalCompositeOperation="copy"),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=t,i.fillRect(0,0,1,1);var n=i.getImageData(0,0,1,1).data,r=[n[0]/255,n[1]/255,n[2]/255];return(s[t]=RgbColor.read(r)).clone()}function e(t){var e=t.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);if(e.length>=4){for(var i=Array(3),n=0;3>n;n++){var s=e[n+1];i[n]=parseInt(1==s.length?s+s:s,16)/255}return RgbColor.read(i)}}var i,n={gray:["gray"],rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsb:["hue","saturation","brightness"]},s={},r=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t){var e=t._red,i=t._green,n=t._blue,s=Math.max(e,i,n),r=Math.min(e,i,n),o=s-r,a=0==o?0:60*(s==e?(i-n)/o+(n>i?6:0):s==i?(n-e)/o+2:(e-i)/o+4),u=0==s?0:o/s,l=s;return new HsbColor(a,u,l,t._alpha)},"hsb-rgb":function(t){var e=t._hue/60%6,i=t._saturation,n=t._brightness,s=Math.floor(e),o=e-s,s=r[s],a=[n,n*(1-i),n*(1-i*o),n*(1-i*(1-o))];return new RgbColor(a[s[0]],a[s[1]],a[s[2]],t._alpha)},"rgb-hsl":function(t){var e=t._red,i=t._green,n=t._blue,s=Math.max(e,i,n),r=Math.min(e,i,n),o=s-r,a=0==o,u=a?0:60*(s==e?(i-n)/o+(n>i?6:0):s==i?(n-e)/o+2:(e-i)/o+4),l=(s+r)/2,h=a?0:.5>l?o/(s+r):o/(2-s-r);return new HslColor(u,h,l,t._alpha)},"hsl-rgb":function(t){var e=t._saturation,i=t._hue/360,n=t._lightness;if(0==e)return new RgbColor(n,n,n,t._alpha);for(var s=[i+1/3,i,i-1/3],r=.5>n?n*(1+e):n+e-n*e,o=2*n-r,a=[],u=0;3>u;u++){var l=s[u];0>l&&(l+=1),l>1&&(l-=1),a[u]=1>6*l?o+6*(r-o)*l:1>2*l?r:2>3*l?o+6*(r-o)*(2/3-l):o}return new RgbColor(a[0],a[1],a[2],t._alpha)},"rgb-gray":function(t){return new GrayColor(1-(.2989*t._red+.587*t._green+.114*t._blue),t._alpha)},"gray-rgb":function(t){var e=1-t._gray;return new RgbColor(e,e,e,t._alpha)},"gray-hsb":function(t){return new HsbColor(0,0,1-t._gray,t._alpha)},"gray-hsl":function(t){return new HslColor(0,0,1-t._gray,t._alpha)}},a={_readNull:!0,_readIndex:!0,initialize:function(i){var n,s=Array.isArray(i),r=this._type;if("object"!=typeof i||s)if("string"==typeof i){var o=i.match(/^#[0-9a-f]{3,6}$/i)?e(i):t(i);n=r?o.convert(r):o,this._read&&(n._read=1)}else{var a=s?i:Array.prototype.slice.call(arguments);if(r)n=Base.each(this._components,function(t,e){var i=a[e];this["_"+t]=void 0!==i?i:null},this);else{var u=a.length>=3?RgbColor:GrayColor;n=new u(a)}this._read&&(n._read=n._components.length)}else r?(n=Color.read(arguments).convert(r),this._read&&(n._read=arguments._read)):(n=void 0!==i.red?new RgbColor(i.red,i.green,i.blue,i.alpha):void 0!==i.gray?new GrayColor(i.gray,i.alpha):void 0!==i.lightness?new HslColor(i.hue,i.saturation,i.lightness,i.alpha):void 0!==i.hue?new HsbColor(i.hue,i.saturation,i.brightness,i.alpha):new RgbColor,this._read&&(n._read=1));return n},_serialize:function(t){for(var e=[this._type],i=0,n=this._components.length;n>i;i++){var s=this._components[i],r=this["_"+s];("alpha"!==s||null!=r&&1>r)&&e.push(Format.number(r,t.precision))}return e},clone:function(){for(var t=Base.create(this.constructor),e=this._components,i=0,n=e.length;n>i;i++){var s="_"+e[i];t[s]=this[s]}return t},convert:function(t){var e;return this._type==t?this.clone():(e=o[this._type+"-"+t])?e(this):o["rgb-"+t](o[this._type+"-rgb"](this))},statics:{extend:function(t){var e=n[t._type];return e&&(t._components=e.concat(["alpha"]),Base.each(e,function(t){var e="hue"===t,i=Base.capitalize(t),t="_"+t;this["get"+i]=function(){return this[t]},this["set"+i]=function(i){this[t]=e?(i%360+360)%360:Math.min(Math.max(i,0),1),this._changed()}},t)),this.base.apply(this,arguments)},random:function(){return new RgbColor(Math.random(),Math.random(),Math.random())}}};return Base.each(n,function(t,e){Base.each(t,function(t){var i=Base.capitalize(t);a["get"+i]=function(){return this.convert(e)[t]},a["set"+i]=function(i){var n=this.convert(e);n[t]=i,n=n.convert(this._type);for(var s=0,r=this._components.length;r>s;s++){var o=this._components[s];this[o]=n[o]}}})}),a},{_changed:function(){this._css=null,this._owner&&this._owner._changed(17)},getType:function(){return this._type},getComponents:function(){for(var t=this._components.length,e=Array(t),i=0;t>i;i++)e[i]=this["_"+this._components[i]];return e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){if(t&&t._type===this._type){for(var e=0,i=this._components.length;i>e;e++){var n="_"+this._components[e];if(this[n]!==t[n])return!1}return!0}return!1},toString:function(){for(var t=[],e=Format.number,i=0,n=this._components.length;n>i;i++){var s=this._components[i],r=this["_"+s];"alpha"===s&&null==r&&(r=1),t.push(s+": "+e(r))}return"{ "+t.join(", ")+" }"},toCss:function(t){var e=this._css;if(!e||t){var i=this.convert("rgb"),n=t?1:i.getAlpha(),s=[Math.round(255*i._red),Math.round(255*i._green),Math.round(255*i._blue)];1>n&&s.push(n);var e=(4==s.length?"rgba(":"rgb(")+s.join(", ")+")";t||(this._css=e)}return e},toCanvasStyle:function(){return this.toCss()}}),GrayColor=this.GrayColor=Color.extend({_type:"gray"}),RgbColor=this.RgbColor=this.RGBColor=Color.extend({_type:"rgb"}),HsbColor=this.HsbColor=this.HSBColor=Color.extend({_type:"hsb"}),HslColor=this.HslColor=this.HSLColor=Color.extend({_type:"hsl"}),GradientColor=this.GradientColor=Color.extend({_type:"gradient",initialize:function(t,e,i,n){this._id=++Base._uid,this._set(t)||(this.setGradient(t||new LinearGradient),this.setOrigin(e),this.setDestination(i),n&&this.setHilite(n))},clone:function(){return new GradientColor(this._gradient,this._origin,this._destination,this._hilite)},_serialize:function(t,e){var i=[this._gradient,this._origin,this._destination];return this._hilite&&i.push(this._hilite),Base.serialize(i,t,!0,e)},getGradient:function(){return this._gradient},setGradient:function(t){this._gradient=t,t._addOwner(this),this._changed()
},getOrigin:function(){return this._origin},setOrigin:function(t){t=Point.read(arguments,0,0,!0),this._origin=t,this._destination&&(this._radius=this._destination.getDistance(this._origin)),this._changed()},getDestination:function(){return this._destination},setDestination:function(t){t=Point.read(arguments,0,0,!0),this._destination=t,this._radius=this._destination.getDistance(this._origin),this._changed()},getHilite:function(){return this._hilite},setHilite:function(t){t=Point.read(arguments,0,0,!0);var e=t.subtract(this._origin);this._hilite=e.getLength()>this._radius?this._origin.add(e.normalize(this._radius-.1)):t,this._changed()},toCanvasStyle:function(t){var e,i=this._gradient._stops;if("LinearGradient"===this._gradient._type)e=t.createLinearGradient(this._origin.x,this._origin.y,this._destination.x,this._destination.y);else{var n=this._hilite||this._origin;e=t.createRadialGradient(n.x,n.y,0,this._origin.x,this._origin.y,this._radius)}for(var s=0,r=i.length;r>s;s++){var o=i[s];e.addColorStop(o._rampPoint,o._color.toCss())}return e},equals:function(t){return t===this||t&&t._type===this._type&&this._gradient.equals(t._gradient)&&this._origin.equals(t._origin)&&this._destination.equals(t._destination)},transform:function(t){t._transformPoint(this._origin,this._origin,!0),t._transformPoint(this._destination,this._destination,!0),this._hilite&&t._transformPoint(this._hilite,this._hilite,!0),this._radius=this._destination.getDistance(this._origin)}}),Gradient=this.Gradient=Base.extend({initialize:function(t,e){return this.constructor===Gradient?new("radial"===e?RadialGradient:LinearGradient)(t):(this._id=++Base._uid,this.setStops((arguments.length>1?arguments:t)||["white","black"]),void 0)},_serialize:function(t,e){return e.add(this,function(){return Base.serialize([this._type,this._stops],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;e>t;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),0==this._owners.length&&delete this._owners)},clone:function(){for(var t=[],e=0,i=this._stops.length;i>e;e++)t[e]=this._stops[e].clone();return new this.constructor(t)},getStops:function(){return this._stops},setStops:function(t){if(this.stops)for(var e=0,i=this._stops.length;i>e;e++)delete this._stops[e]._owner;if(2>t.length)throw Error("Gradient stop list needs to contain at least two stops.");this._stops=GradientStop.readAll(t,0,!0);for(var e=0,i=this._stops.length;i>e;e++){var n=this._stops[e];n._owner=this,n._defaultRamp&&n.setRampPoint(e/(i-1))}this._changed()},equals:function(t){if(t&&t.constructor==this.constructor&&this._stops.length==t._stops.length){for(var e=0,i=this._stops.length;i>e;e++)if(!this._stops[e].equals(t._stops[e]))return!1;return!0}return!1}}),LinearGradient=this.LinearGradient=Gradient.extend({_type:"LinearGradient"}),RadialGradient=this.RadialGradient=Gradient.extend({_type:"RadialGradient"}),GradientStop=this.GradientStop=Base.extend({initialize:function(t,e){if(t){var i,n;void 0===e&&Array.isArray(t)?(i=t[0],n=t[1]):t.color?(i=t.color,n=t.rampPoint):(i=t,n=e),this.setColor(i),this.setRampPoint(n)}},clone:function(){return new GradientStop(this._color.clone(),this._rampPoint)},_serialize:function(t,e){return Base.serialize([this._color,this._rampPoint],t,!1,e)},_changed:function(){this._owner&&this._owner._changed(17)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(t){this._defaultRamp=null==t,this._rampPoint=t||0,this._changed()},getColor:function(){return this._color},setColor:function(t){this._color=Color.read(arguments),this._color===t&&(this._color=t.clone()),this._color._owner=this,this._changed()},equals:function(t){return t==this||t instanceof GradientStop&&this._color.equals(t._color)&&this._rampPoint==t._rampPoint}}),DomElement=new function(){function t(e,i){for(var n=[],s=0,r=e&&e.length;r>s;){var o=e[s++];if("string"==typeof o)o=document.createElement(o);else if(!o||!o.nodeType)continue;Base.isPlainObject(e[s])&&DomElement.set(o,e[s++]),Array.isArray(e[s])&&t(e[s++],o),i&&i.appendChild(o),n.push(o)}return n}var e=/^(checked|value|selected|disabled)$/i,i={text:"textContent",html:"innerHTML"},n={lineHeight:1,zoom:1,zIndex:1,opacity:1};return{create:function(e,i){var n=Array.isArray(e),s=t(n?e:arguments,n?i:null);return 1==s.length?s[0]:s},find:function(t,e){return(e||document).querySelector(t)},findAll:function(t,e){return(e||document).querySelectorAll(t)},get:function(t,n){return t?e.test(n)?"value"===n||"string"!=typeof t[n]?t[n]:!0:n in i?t[i[n]]:t.getAttribute(n):null},set:function(t,n,s){if("string"!=typeof n)for(var r in n)n.hasOwnProperty(r)&&this.set(t,r,n[r]);else{if(!t||void 0===s)return t;e.test(n)?t[n]=s:n in i?t[i[n]]=s:"style"===n?this.setStyle(t,s):"events"===n?DomEvent.add(t,s):t.setAttribute(n,s)}return t},getStyles:function(t){var e=t&&t.ownerDocument.defaultView;return e&&e.getComputedStyle(t,"")},getStyle:function(t,e){return t&&t.style[e]||this.getStyles(t)[e]||null},setStyle:function(t,e,i){if("string"!=typeof e)for(var s in e)e.hasOwnProperty(s)&&this.setStyle(t,s,e[s]);else!/^-?[\d\.]+$/.test(i)||e in n||(i+="px"),t.style[e]=i;return t},hasClass:function(t,e){return RegExp("\\s*"+e+"\\s*").test(t.className)},addClass:function(t,e){t.className=(t.className+" "+e).trim()},removeClass:function(t,e){t.className=t.className.replace(RegExp("\\s*"+e+"\\s*")," ").trim()},remove:function(t){t.parentNode&&t.parentNode.removeChild(t)},removeChildren:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},getBounds:function(t,e){var i=t.getBoundingClientRect(),n=t.ownerDocument,s=n.body,r=n.documentElement,o=i.left-(r.clientLeft||s.clientLeft||0),a=i.top-(r.clientTop||s.clientTop||0);if(!e){var u=n.defaultView;o+=u.pageXOffset||r.scrollLeft||s.scrollLeft,a+=u.pageYOffset||r.scrollTop||s.scrollTop}return new Rectangle(o,a,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,n=e.documentElement;return Rectangle.create(0,0,i.innerWidth||n.clientWidth,i.innerHeight||n.clientHeight)},getOffset:function(t,e){return this.getBounds(t,e).getPoint()},getSize:function(t){return this.getBounds(t,!0).getSize()},isInvisible:function(t){return this.getSize(t).equals([0,0])},isInView:function(t){return!this.isInvisible(t)&&this.getViewportBounds(t).intersects(this.getBounds(t,!0))}}},DomEvent={add:function(t,e){for(var i in e){var n=e[i];t.addEventListener?t.addEventListener(i,n,!1):t.attachEvent&&t.attachEvent("on"+i,n.bound=function(){n.call(t,window.event)})}},remove:function(t,e){for(var i in e){var n=e[i];t.removeEventListener?t.removeEventListener(i,n,!1):t.detachEvent&&t.detachEvent("on"+i,n.bound)}},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return Point.create(e.pageX||e.clientX+document.documentElement.scrollLeft,e.pageY||e.clientY+document.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getOffset:function(t,e){return DomEvent.getPoint(t).subtract(DomElement.getOffset(e||DomEvent.getTarget(t)))},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},stop:function(t){DomEvent.stopPropagation(t),DomEvent.preventDefault(t)}};DomEvent.requestAnimationFrame=new function(){var t="equestAnimationFrame",e=window["r"+t]||window["webkitR"+t]||window["mozR"+t]||window["oR"+t]||window["msR"+t];e&&e(function(t){null==t&&(e=null)});var i,n=[],s=!0;return DomEvent.add(window,{focus:function(){s=!0},blur:function(){s=!1}}),function(t,r){return e?e(t,r):(n.push([t,r]),i||(i=setInterval(function(){for(var t=n.length-1;t>=0;t--){var e=n[t],i=e[0],r=e[1];(!r||("true"==PaperScript.getAttribute(r,"keepalive")||s)&&DomElement.isInView(r))&&(n.splice(t,1),i(Date.now()))}},1e3/60)),void 0)}};var View=this.View=Base.extend(Callback,{initialize:function(t){this._scope=paper,this._project=paper.project,this._element=t;var e;if(this._id=t.getAttribute("id"),null==this._id&&t.setAttribute("id",this._id="view-"+View._id++),DomEvent.add(t,this._viewHandlers),PaperScript.hasAttribute(t,"resize")){var i=DomElement.getOffset(t,!0),n=this;e=DomElement.getViewportBounds(t).getSize().subtract(i),this._windowHandlers={resize:function(){DomElement.isInvisible(t)||(i=DomElement.getOffset(t,!0)),n.setViewSize(DomElement.getViewportBounds(t).getSize().subtract(i))}},DomEvent.add(window,this._windowHandlers)}else e=Size.create(parseInt(t.getAttribute("width"),10),parseInt(t.getAttribute("height"),10)),e.isNaN()&&(e=DomElement.getSize(t));if(t.width=e.width,t.height=e.height,PaperScript.hasAttribute(t,"stats")){this._stats=new Stats;var s=this._stats.domElement,r=s.style,i=DomElement.getOffset(t);r.position="absolute",r.left=i.x+"px",r.top=i.y+"px",document.body.appendChild(s)}View._views.push(this),View._viewsById[this._id]=this,this._viewSize=LinkedSize.create(this,"setViewSize",e.width,e.height),this._matrix=new Matrix,this._zoom=1,View._focused||(View._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return this._project?(View._focused==this&&(View._focused=null),View._views.splice(View._views.indexOf(this),1),delete View._viewsById[this._id],this._project.view==this&&(this._project.view=null),DomEvent.remove(this._element,this._viewHandlers),DomEvent.remove(window,this._windowHandlers),this._element=this._project=null,this.detach("frame"),this._frameItems={},!0):!1},_events:{onFrame:{install:function(){this._requested||(this._animate=!0,this._handleFrame(!0))},uninstall:function(){this._animate=!1}},onResize:{}},_animate:!1,_time:0,_count:0,_handleFrame:function(t){if(this._requested=!1,this._animate){if(paper=this._scope,t){this._requested=!0;var e=this;DomEvent.requestAnimationFrame(function(){e._handleFrame(!0)},this._element)}var i=Date.now()/1e3,n=this._before?i-this._before:0;this._before=i,this.fire("frame",Base.merge({delta:n,time:this._time+=n,count:this._count++})),this._stats&&this._stats.update(),this.draw(!0)}},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.attach("frame",this._handleFrameItems)):(delete i[t._id],0==--this._frameItemCount&&this.detach("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.fire("frame",Base.merge(t,{time:i.time+=t.delta,count:i.count++}))}},_redraw:function(){this._redrawNeeded=!0,this._animate?this._handleFrame():this.draw()},_transform:function(t){this._matrix.concatenate(t),this._bounds=null,this._inverse=null,this._redraw()},getElement:function(){return this._element},getViewSize:function(){return this._viewSize},setViewSize:function(t){t=Size.read(arguments);var e=t.subtract(this._viewSize);e.isZero()||(this._element.width=t.width,this._element.height=t.height,this._viewSize.set(t.width,t.height,!0),this._bounds=null,this.fire("resize",{size:t,delta:e}),this._redraw())},getBounds:function(){return this._bounds||(this._bounds=this._getInverse()._transformBounds(new Rectangle(new Point,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){this.scrollBy(Point.read(arguments).subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(t){this._transform((new Matrix).scale(t/this._zoom,this.getCenter())),this._zoom=t},isVisible:function(){return DomElement.isInView(this._element)},scrollBy:function(){this._transform((new Matrix).translate(Point.read(arguments).negate()))},projectToView:function(){return this._matrix._transformPoint(Point.read(arguments))},viewToProject:function(){return this._getInverse()._transformPoint(Point.read(arguments))},_getInverse:function(){return this._inverse||(this._inverse=this._matrix.inverted()),this._inverse}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t){return"string"==typeof t&&(t=document.getElementById(t)),new CanvasView(t)}}},new function(){function t(t){var e=DomEvent.getTarget(t);return e.getAttribute&&View._viewsById[e.getAttribute("id")]}function e(t,e){return t.viewToProject(DomEvent.getOffset(e,t._element))}function i(){if(!View._focused||!View._focused.isVisible())for(var t=0,e=View._views.length;e>t;t++){var i=View._views[t];if(i&&i.isVisible()){View._focused=l=i;break}}}function n(i){if("mouse"!==(""+i.type).substr(0,5)||!("ontouchstart"in window||window.navigator.msMaxTouchPoints>0)){var n=View._focused=t(i),s=e(n,i);h=!0,n._onMouseDown&&n._onMouseDown(i,s),(a=n._scope._tool)&&a._onHandleEvent("mousedown",s,i),n.draw(!0)}}function s(n){if("mouse"!==(""+n.type).substr(0,5)||!("ontouchstart"in window||window.navigator.msMaxTouchPoints>0)){var s;if(h||(s=t(n),s?(u=View._focused,View._focused=l=s):l&&l==View._focused&&(View._focused=u,i())),s=s||View._focused){var r=n&&e(s,n);s._onMouseMove&&s._onMouseMove(n,r),(a=s._scope._tool)&&a._onHandleEvent(h&&a.responds("mousedrag")?"mousedrag":"mousemove",r,n)&&DomEvent.stop(n),s.draw(!0)}}}function r(t){if("mouse"!==(""+t.type).substr(0,5)||!("ontouchstart"in window||window.navigator.msMaxTouchPoints>0)){var i=View._focused;if(i&&h){var n=e(i,t);curPoint=null,h=!1,i._onMouseUp&&i._onMouseUp(t,n),a&&a._onHandleEvent("mouseup",n,t)&&DomEvent.stop(t),i.draw(!0)}}}function o(t){h&&DomEvent.stop(t)}var a,u,l,h=!1;return DomEvent.add(document,{mousemove:s,mouseup:r,touchmove:s,touchend:r,selectstart:o,scroll:i}),DomEvent.add(window,{load:i}),{_viewHandlers:{mousedown:n,touchstart:n,selectstart:o},statics:{updateFocus:i}}}),CanvasView=View.extend({initialize:function(t){if(!(t instanceof HTMLCanvasElement)){var e=Size.read(arguments,1);e.isZero()&&(e=Size.create(1024,768)),t=CanvasProvider.getCanvas(e)}this._context=t.getContext("2d"),this._eventCounters={},this.base(t)},draw:function(t){if(t&&!this._redrawNeeded)return!1;var e=this._context,i=this._viewSize;return e.clearRect(0,0,i._width+1,i._height+1),this._project.draw(e,this._matrix),this._redrawNeeded=!1,!0}},new function(){function t(t,e,i,n,s,r){for(var o,a=n;a;){if(a.responds(t)&&(o||(o=new MouseEvent(t,e,i,n,s?i.subtract(s):null)),a.fire(t,o)&&(!r||o._stopped)))return!1;a=a.getParent()}return!0}function e(e,i,n,s,r){if(e._eventCounters[i]){var o=e._project,l=o.hitTest(s,{tolerance:o.options.hitTolerance||0,fill:!0,stroke:!0}),h=l&&l.item;if(h)return"mousemove"===i&&h!=a&&(r=s),"mousemove"===i&&u||t(i,n,s,h,r),h}}var i,n,s,r,o,a,u,l,h;return{_onMouseDown:function(t,a){var c=e(this,"mousedown",t,a);l=o==c&&300>Date.now()-h,r=o=c,i=n=s=a,u=r&&r.responds("mousedrag")},_onMouseUp:function(o,a){var c=e(this,"mouseup",o,a);u&&(n&&!n.equals(a)&&t("mousedrag",o,a,r,n),c!=r&&(s=a,t("mousemove",o,a,c,s))),c===r&&(h=Date.now(),(!l||t("doubleclick",o,i,c))&&t("click",o,i,c),l=!1),r=null,u=!1},_onMouseMove:function(i,o){r&&t("mousedrag",i,o,r,n);var u=e(this,"mousemove",i,o,s);n=s=o,u!==a&&(t("mouseleave",i,o,a),a=u,t("mouseenter",i,o,u))}}}),Event=this.Event=Base.extend({initialize:function(t){this.event=t},preventDefault:function(){this._prevented=!0,DomEvent.preventDefault(this.event)},stopPropagation:function(){this._stopped=!0,DomEvent.stopPropagation(this.event)},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return Key.modifiers}}),KeyEvent=this.KeyEvent=Event.extend({initialize:function(t,e,i,n){this.base(n),this.type=t?"keydown":"keyup",this.key=e,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Key=this.Key=new function(){function t(t,e,n,s){var o=String.fromCharCode(n),a=i[e]||o.toLowerCase(),u=t?"keydown":"keyup",l=View._focused,h=l&&l.isVisible()&&l._scope,c=h&&h._tool;r[a]=t,c&&c.responds(u)&&(c.fire(u,new KeyEvent(t,a,o,s)),l&&l.draw(!0))}var e,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},n=Base.merge({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),s={},r={};return DomEvent.add(document,{keydown:function(r){var o,a=r.which||r.keyCode,u=i[a];u?((o=Base.camelize(u))in n&&(n[o]=!0),s[a]=0,t(!0,a,null,r)):e=a},keypress:function(i){if(null!=e){var n=i.which||i.keyCode;s[e]=n,t(!0,e,n,i),e=null}},keyup:function(e){var r,o=e.which||e.keyCode,a=i[o];a&&(r=Base.camelize(a))in n&&(n[r]=!1),null!=s[o]&&(t(!1,o,s[o],e),delete s[o])}}),{modifiers:n,isDown:function(t){return!!r[t]}}},MouseEvent=this.MouseEvent=Event.extend({initialize:function(t,e,i,n,s){this.base(e),this.type=t,this.point=i,this.target=n,this.delta=s},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Palette=this.Palette=Base.extend(Callback,{_events:["onChange"],initialize:function(t,e,i){var n=DomElement.find(".palettejs-panel")||DomElement.find("body").appendChild(DomElement.create("div",{"class":"palettejs-panel"}));this._element=n.appendChild(DomElement.create("table",{"class":"palettejs-pane"})),this._title=t,i||(i={});for(var s in this._components=e){var r=e[s];r instanceof Component||(null==r.value&&(r.value=i[s]),r.name=s,r=e[s]=new Component(r)),this._element.appendChild(r._element),r._palette=this,void 0===i[s]&&(i[s]=r.value)}this._values=Base.each(i,function(t,n){var s=e[n];s&&Base.define(i,n,{enumerable:!0,configurable:!0,writable:!0,get:function(){return s._value},set:function(t){s.setValue(t)}})}),window.paper&&paper.palettes.push(this)},reset:function(){for(var t in this._components)this._components[t].reset()},remove:function(){DomElement.remove(this._element)}}),Component=this.Component=Base.extend(Callback,{_events:["onChange","onClick"],_types:{"boolean":{type:"checkbox",value:"checked"},string:{type:"text"},number:{type:"number",number:!0},button:{type:"button"},text:{tag:"div",value:"text"},slider:{type:"range",number:!0},list:{tag:"select",options:function(){DomElement.removeChildren(this._inputItem),DomElement.create(Base.each(this._options,function(t){this.push("option",{value:t,text:t})},[]),this._inputItem)}}},initialize:function(t){this._type=t.type in this._types?t.type:"options"in t?"list":"onClick"in t?"button":typeof t.value,this._info=this._types[this._type]||{type:this._type};var e=this,i=!1;this._inputItem=DomElement.create(this._info.tag||"input",{type:this._info.type,events:{change:function(){e.setValue(DomElement.get(this,e._info.value||"value")),i&&(e._palette.fire("change",e,e.name,e._value),e.fire("change",e._value))},click:function(){e.fire("click")}}}),this._element=DomElement.create("tr",[this._labelItem=DomElement.create("td"),"td",[this._inputItem]]),Base.each(t,function(t,e){this[e]=t},this),this._defaultValue=this._value,i=!0},getType:function(){return this._type},getLabel:function(){return this._label},setLabel:function(t){this._label=t,DomElement.set(this._labelItem,"text",t+":")},getOptions:function(){return this._options},setOptions:function(t){this._options=t,this._info.options&&this._info.options.call(this)},getValue:function(){return this._value},setValue:function(t){var e=this._info.value||"value";DomElement.set(this._inputItem,e,t),t=DomElement.get(this._inputItem,e),this._value=this._info.number?parseFloat(t,10):t},getRange:function(){return[parseFloat(DomElement.get(this._inputItem,"min")),parseFloat(DomElement.get(this._inputItem,"max"))]},setRange:function(t,e){var i=Array.isArray(t)?t:[t,e];DomElement.set(this._inputItem,{min:i[0],max:i[1]})},getMin:function(){return this.getRange()[0]},setMin:function(t){this.setRange(t,this.getMax())},getMax:function(){return this.getRange()[1]},setMax:function(t){this.setRange(this.getMin(),t)},getStep:function(){return parseFloat(DomElement.get(this._inputItem,"step"))},setStep:function(t){DomElement.set(this._inputItem,"step",t)},reset:function(){this.setValue(this._defaultValue)}}),ToolEvent=this.ToolEvent=Event.extend({_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t?t:e?e.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this.middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;i instanceof Group&&!(i instanceof Layer)||i instanceof CompoundPath;)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Tool=this.Tool=PaperScopeItem.extend({_list:"tools",_reference:"_tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(t){this.base(),this._firstMove=!0,this._count=0,this._downCount=0,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=this._minDistance&&null!=this._maxDistance&&this._minDistance>this._maxDistance&&(this._maxDistance=this._minDistance)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=this._maxDistance&&this._maxDistance<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=t,this._maxDistance=t},_updateEvent:function(t,e,i,n,s,r,o){if(!s){if(null!=i||null!=n){var a=null!=i?i:0,u=e.subtract(this._point),l=u.getLength();if(a>l)return!1;var h=null!=n?n:0;if(0!=h)if(l>h)e=this._point.add(u.normalize(h));else if(o)return!1}if(r&&e.equals(this._point))return!1}switch(this._lastPoint=s&&"mousemove"==t?e:this._point,this._point=e,t){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=s?0:this._count+1,!0},fire:function(t,e){var i=Tool._removeSets;if(i){"mouseup"===t&&(i.mousedrag=null);var n=i[t];if(n){for(var s in n){var r=n[s];for(var o in i){var a=i[o];a&&a!=n&&delete a[r._id]}r.remove()}i[t]=null}}return this.base(t,e)},_onHandleEvent:function(t,e,i){paper=this._scope;var n=!1;switch(t){case"mousedown":this._updateEvent(t,e,null,null,!0,!1,!1),this.responds(t)&&(n=this.fire(t,new ToolEvent(this,t,i)));break;case"mousedrag":for(var s=!1,r=!1;this._updateEvent(t,e,this.minDistance,this.maxDistance,!1,s,r);)this.responds(t)&&(n=this.fire(t,new ToolEvent(this,t,i))),s=!0,r=!0;break;case"mouseup":!e.equals(this._point)&&this._updateEvent("mousedrag",e,this.minDistance,this.maxDistance,!1,!1,!1)&&this.responds("mousedrag")&&(n=this.fire("mousedrag",new ToolEvent(this,t,i))),this._updateEvent(t,e,null,this.maxDistance,!1,!1,!1),this.responds(t)&&(n=this.fire(t,new ToolEvent(this,t,i))),this._updateEvent(t,e,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(t,e,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)this.responds(t)&&(n=this.fire(t,new ToolEvent(this,t,i))),this._firstMove=!1}return n}}),Format=new function(){function t(t,e){return e=e?s[e]||(s[e]=Math.pow(10,e)):1e5,Math.round(t*e)/e}function e(e,i,n){return t(e.x,i)+(n||",")+t(e.y,i)}function i(e,i,n){return t(e.width,i)+(n||",")+t(e.height,i)}function n(t,n,s){return e(t,n,s)+(s||",")+i(t,n,s)}var s={};return{number:t,point:e,size:i,rectangle:n}},CanvasProvider={canvases:[],getCanvas:function(t,e){var i=void 0===e?t:Size.create(t,e);if(this.canvases.length){var n=this.canvases.pop();return n.width!=i.width||n.height!=i.height?(n.width=i.width,n.height=i.height):n.getContext("2d").clearRect(0,0,i.width+1,i.height+1),n}var n=document.createElement("canvas");return n.width=i.width,n.height=i.height,n},getContext:function(t,e){return this.getCanvas(t,e).getContext("2d")},release:function(t){this.canvases.push(t.canvas?t.canvas:t)}},Numerical=new function(){function t(t){return t>0?r(t,1/3):0>t?-r(-t,1/3):0}var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,s=Math.sqrt,r=Math.pow,o=Math.cos,a=Math.PI;return{TOLERANCE:1e-5,EPSILON:1e-11,isZero:function(t){return n(t)<=this.EPSILON},integrate:function(t,n,s,r){for(var o=e[r-2],a=i[r-2],u=.5*(s-n),l=u+n,h=0,c=r+1>>1,d=1&r?a[h++]*t(l):0;c>h;){var p=u*o[h];d+=a[h++]*(t(l+p)+t(l-p))}return u*d},findRoot:function(t,e,i,s,r,o,a){for(var u=0;o>u;u++){var l=t(i),h=l/e(i);if(a>n(h))return i;var c=i-h;l>0?(r=i,i=s>=c?.5*(s+r):c):(s=i,i=c>=r?.5*(s+r):c)}},solveQuadratic:function(t,e,i,r,o){if(o>n(t))return n(e)>=o?(r[0]=-i/e,1):o>n(i)?-1:0;var a=e*e-4*t*i;if(0>a)return 0;a=s(a),t*=2;var u=0;return r[u++]=(-e-a)/t,a>0&&(r[u++]=(-e+a)/t),u},solveCubic:function(e,i,r,u,l,h){if(h>n(e))return Numerical.solveQuadratic(i,r,u,l,h);i/=e,r/=e,u/=e;var c=i*i,d=1/3*(-1/3*c+r),p=.5*(2/27*i*c-1/3*i*r+u),f=d*d*d,g=p*p+f;if(i/=3,h>n(g)){if(h>n(p))return l[0]=-i,1;var m=t(-p);return l[0]=2*m-i,l[1]=-m-i,2}if(0>g){var v=1/3*Math.acos(-p/s(-f)),y=2*s(-d);return l[0]=y*o(v)-i,l[1]=-y*o(v+a/3)-i,l[2]=-y*o(v-a/3)-i,3}return g=s(g),l[0]=t(g-p)-t(g+p)-i,1}}},BlendMode={process:function(t,e,i,n,s){function r(t,e,i){return.2989*t+.587*e+.114*i}function o(t,e,i,n){var s=n-r(t,e,i);v=t+s,y=e+s,_=i+s;var n=r(v,y,_),o=C(v,y,_),a=S(v,y,_);if(0>o){var u=n-o;v=n+(v-n)*n/u,y=n+(y-n)*n/u,_=n+(_-n)*n/u}if(a>255){var l=255-n,h=a-n;v=n+(v-n)*l/h,y=n+(y-n)*l/h,_=n+(_-n)*l/h}}function a(t,e,i){return S(t,e,i)-C(t,e,i)}function u(t,e,i,n){var s,r=[t,e,i],o=S(t,e,i),a=C(t,e,i);a=a==t?0:a==e?1:2,o=o==t?0:o==e?1:2,s=0==C(a,o)?1==S(a,o)?2:1:0,r[o]>r[a]?(r[s]=(r[s]-r[a])*n/(r[o]-r[a]),r[o]=n):r[s]=r[o]=0,r[a]=0,v=r[0],y=r[1],_=r[2]}var l,h,c,d,p,f,g,m,v,y,_,w=e.canvas,b=i.getImageData(s.x,s.y,w.width,w.height),x=b.data,k=e.getImageData(0,0,w.width,w.height).data,C=Math.min,S=Math.max,P=Math.abs,E={multiply:function(){v=p*l/255,y=f*h/255,_=g*c/255},screen:function(){v=255-(255-p)*(255-l)/255,y=255-(255-f)*(255-h)/255,_=255-(255-g)*(255-c)/255},overlay:function(){v=128>p?2*p*l/255:255-2*(255-p)*(255-l)/255,y=128>f?2*f*h/255:255-2*(255-f)*(255-h)/255,_=128>g?2*g*c/255:255-2*(255-g)*(255-c)/255},"soft-light":function(){var t=l*p/255;v=t+p*(255-(255-p)*(255-l)/255-t)/255,t=h*f/255,y=t+f*(255-(255-f)*(255-h)/255-t)/255,t=c*g/255,_=t+g*(255-(255-g)*(255-c)/255-t)/255},"hard-light":function(){v=128>l?2*l*p/255:255-2*(255-l)*(255-p)/255,y=128>h?2*h*f/255:255-2*(255-h)*(255-f)/255,_=128>c?2*c*g/255:255-2*(255-c)*(255-g)/255},"color-dodge":function(){v=255==l?l:C(255,255*p/(255-l)),y=255==h?h:C(255,255*f/(255-h)),_=255==c?c:C(255,255*g/(255-c))},"color-burn":function(){v=0==l?0:S(255-255*(255-p)/l,0),y=0==h?0:S(255-255*(255-f)/h,0),_=0==c?0:S(255-255*(255-g)/c,0)},darken:function(){v=l>p?p:l,y=h>f?f:h,_=c>g?g:c},lighten:function(){v=p>l?p:l,y=f>h?f:h,_=g>c?g:c},difference:function(){v=p-l,0>v&&(v=-v),y=f-h,0>y&&(y=-y),_=g-c,0>_&&(_=-_)},exclusion:function(){v=p+l*(255-p-p)/255,y=f+h*(255-f-f)/255,_=g+c*(255-g-g)/255},hue:function(){u(l,h,c,a(p,f,g)),o(v,y,_,r(p,f,g))},saturation:function(){u(p,f,g,a(l,h,c)),o(v,y,_,r(p,f,g))},luminosity:function(){o(p,f,g,r(l,h,c))},color:function(){o(l,h,c,r(p,f,g))},add:function(){v=C(p+l,255),y=C(f+h,255),_=C(g+c,255)},subtract:function(){v=S(p-l,0),y=S(f-h,0),_=S(g-c,0)},average:function(){v=(p+l)/2,y=(f+h)/2,_=(g+c)/2},negation:function(){v=255-P(255-l-p),y=255-P(255-h-f),_=255-P(255-c-g)}},T=E[t];if(T){for(var I=0,A=x.length;A>I;I+=4){l=k[I],p=x[I],h=k[I+1],f=x[I+1],c=k[I+2],g=x[I+2],d=k[I+3],m=x[I+3],T();var j=d*n/255,M=1-j;x[I]=j*v+M*p,x[I+1]=j*y+M*f,x[I+2]=j*_+M*g,x[I+3]=d*n+M*m}i.putImageData(b,s.x,s.y)}}},SvgStyles=Base.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"]},function(t,e){var i=Base.capitalize(e);this[e]={type:t[1],property:e,attribute:t[0],get:"get"+i,set:"set"+i}},{});new(function(){function t(t,e){for(var i in e){var n=e[i],s=x[i];"number"==typeof n&&(n=b(n)),s?t.setAttributeNS(s,i,n):t.setAttribute(i,n)}return t}function e(e,i){return t(document.createElementNS("http://www.w3.org/2000/svg",e),i)}function n(t,e,i){return t[e]._point.getDistance(t[i]._point)
}function s(t,e){var i=t._matrix,n=i.getTranslation(),s={};if(e){i=i.shiftless();var r=i._inverseTransform(n);s.x=r.x,s.y=r.y,n=null}if(i.isIdentity())return s;var o=i.decompose();if(o&&!o.shearing){var a=[],u=o.rotation,l=o.scaling;n&&!n.isZero()&&a.push("translate("+Format.point(n)+")"),Numerical.isZero(l.x-1)&&Numerical.isZero(l.y-1)||a.push("scale("+Format.point(l)+")"),u&&a.push("rotate("+b(u)+")"),s.transform=a.join(" ")}else s.transform="matrix("+i.getValues().join(",")+")";return s}function r(t,e,i,n){var s="rect"===i?e[1]._point.add(e[2]._point).divide(2):"roundrect"===i?e[3]._point.add(e[4]._point).divide(2):"circle"===i||"ellipse"===i?e[1]._point:null,r=s&&s.subtract(n).getAngle()+90;return Numerical.isZero(r||0)?0:r}function o(t,e){function i(t,i){var n=e[t],s=n.getNext(),r=e[i],o=r.getNext();return n._handleOut.isZero()&&s._handleIn.isZero()&&r._handleOut.isZero()&&o._handleIn.isZero()&&s._point.subtract(n._point).isColinear(o._point.subtract(r._point))}function s(t){var i=e[t],n=i.getNext(),s=i._handleOut,o=n._handleIn;if(s.isOrthogonal(o)){var a=i._point,u=n._point,l=new Line(a,s).intersect(new Line(u,o));return l&&Numerical.isZero(s.getLength()/l.subtract(a).getLength()-r)&&Numerical.isZero(o.getLength()/l.subtract(u).getLength()-r)}}var r=4*(Math.sqrt(2)-1)/3;if(t.isPolygon())return 4===e.length&&t._closed&&i(0,2)&&i(1,3)?"rect":0===e.length?"empty":e.length>=3?t._closed?"polygon":"polyline":"line";if(t._closed){if(8===e.length&&s(0)&&s(2)&&s(4)&&s(6)&&i(1,5)&&i(3,7))return"roundrect";if(4===e.length&&s(0)&&s(1)&&s(2)&&s(3))return Numerical.isZero(n(e,0,2)-n(e,1,3))?"circle":"ellipse"}return"path"}function a(t){var i=s(t),n=t._children;i.fill="none";for(var r=e("g",i),o=0,a=n.length;a>o;o++){var u=_(n[o]);u&&r.appendChild(u)}return r}function u(t){var i=s(t,!0),n=t.getSize();return i.x-=n.width/2,i.y-=n.height/2,i.width=n.width,i.height=n.height,i.href=t.toDataURL(),e("image",i)}function h(t){var i=s(t,!0),n=t._style;null!=n._font&&(i["font-family"]=n._font),null!=n._fontSize&&(i["font-size"]=n._fontSize);var r=e("text",i);return r.textContent=t._content,r}function c(t){var s,a=t._segments,u=t.getPosition(!0),h=o(t,a),c=r(t,a,h,u);switch(h){case"empty":return null;case"path":var d=t.getPathData();s=d&&{d:d};break;case"polyline":case"polygon":var p=[];for(i=0,l=a.length;l>i;i++)p.push(Format.point(a[i]._point));s={points:p.join(" ")};break;case"rect":var f=n(a,0,3),g=n(a,0,1),m=a[1]._point.rotate(-c,u);s={x:m.x,y:m.y,width:f,height:g};break;case"roundrect":h="rect";var f=n(a,1,6),g=n(a,0,3),v=(f-n(a,0,7))/2,y=(g-n(a,1,2))/2,_=a[3]._point,w=a[4]._point,m=_.subtract(w.subtract(_).normalize(v)).rotate(-c,u);s={x:m.x,y:m.y,width:f,height:g,rx:v,ry:y};break;case"line":var x=a[0]._point,k=a[a.length-1]._point;s={x1:x._x,y1:x._y,x2:k._x,y2:k._y};break;case"circle":var C=n(a,0,2)/2;s={cx:u.x,cy:u.y,r:C};break;case"ellipse":var v=n(a,2,0)/2,y=n(a,3,1)/2;s={cx:u.x,cy:u.y,rx:v,ry:y}}return c&&(s.transform="rotate("+b(c)+","+Format.point(u)+")",t._gradientMatrix=(new Matrix).rotate(-c,u)),e(h,s)}function d(t){var i=s(t,!0),n=t.getPathData();return n&&(i.d=n),e("path",i)}function p(t){var i=s(t,!0),n=t.getSymbol(),r=m(n);return definition=n.getDefinition(),bounds=definition.getBounds(),r||(r=e("symbol",{viewBox:Format.rectangle(bounds)}),r.appendChild(_(definition)),v(n,r)),i.href="#"+r.id,i.x+=bounds.x,i.y+=bounds.y,i.width=b(bounds.width),i.height=b(bounds.height),e("use",i)}function f(t,i){var n=m(t);if(!n){var s,r=t.gradient,o=r._type,a=i._gradientMatrix,u=t._origin.transform(a),l=t._destination.transform(a),h=t._hilite&&t._hilite.transform(a);"RadialGradient"==o?(s={cx:u.x,cy:u.y,r:u.getDistance(l)},h&&(s.fx=h.x,s.fy=h.y)):s={x1:u.x,y1:u.y,x2:l.x,y2:l.y},s.gradientUnits="userSpaceOnUse",n=e(o[0].toLowerCase()+o.slice(1),s);for(var c=r._stops,d=0,p=c.length;p>d;d++){var f=c[d],g=f._color;s={offset:f._rampPoint,"stop-color":g.toCss(!0)},1>g.getAlpha()&&(s["stop-opacity"]=g._alpha),n.appendChild(e("stop",s))}v(t,n)}return"url(#"+n.id+")"}function g(e,i){var n={},s=e._style,r=e.getParent(),o=r&&r._style;return null!=e._name&&(n.id=e._name),Base.each(SvgStyles,function(t){var i=s[t.get]();o&&Base.equals(o[t.get](),i)||("color"===t.type&&null!=i&&1>i.getAlpha()&&(n[t.attribute+"-opacity"]=i._alpha),n[t.attribute]=null==i?"none":"color"===t.type?i.gradient?f(i,e):i.toCss(!0):"array"===t.type?i.join(","):"number"===t.type?b(i):i)}),null!=e._opacity&&1>e._opacity&&(n.opacity=e._opacity),null==e._visibility||e._visibility||(n.visibility="hidden"),delete e._gradientMatrix,t(i,n)}function m(t){return w||(w={ids:{},svgs:{}}),w.svgs[t._id]}function v(t,e){var i=t._type,n=w.ids[i]=(w.ids[i]||0)+1;e.id=i+"-"+n,w.svgs[t._id]=e}function y(t){if(!w)return t;var i="svg"==t.nodeName&&t,n=i?i.firstChild:t;for(var s in w.svgs)i||(i=e("svg"),i.appendChild(t)),i.insertBefore(w.svgs[s],n);return w=null,i}function _(t){var e=k[t._type],i=e&&e(t,t._type);return i&&g(t,i)}var w,b=Format.number,x={href:"http://www.w3.org/1999/xlink"},k={Group:a,Layer:a,Raster:u,PointText:h,PlacedSymbol:p,Path:c,CompoundPath:d};Item.inject({exportSvg:function(){var t=_(this);return y(t)}}),Project.inject({exportSvg:function(){for(var t=e("svg"),i=this.layers,n=0,s=i.length;s>n;n++)t.appendChild(_(i[n]));return y(t)}})}),new function(){function t(t,e,i,n){var s=(!i||null!=t.getAttribute(e))&&t[e]&&t[e].baseVal;return s?void 0!==n?s.numberOfItems>n?Base.pick((s=s.getItem(n)).value,s):null:Base.pick(s.value,s):null}function e(e,i,n,s,r){return i=t(e,i,s,r),n=t(e,n,s,r),s&&null==i&&null==n?null:Point.create(i||0,n||0)}function i(e,i,n,s,r){return i=t(e,i,s,r),n=t(e,n,s,r),s&&null==i&&null==n?null:Size.create(i||0,n||0)}function n(t,e){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e&&p(t)||t}function s(t,e){var i=t.childNodes,n="clipPath"===e,s=n?new CompoundPath:new Group,r=s._project,o=r._currentStyle;s.setFillColor("black"),n||(s=d(s,t),r._currentStyle=s._style.clone());for(var a=0,u=i.length;u>a;a++){var l,h=i[a];1==h.nodeType&&(l=f(h))&&(n&&l instanceof CompoundPath?(s.addChildren(l.removeChildren()),l.remove()):l instanceof Symbol||s.addChild(l))}return n&&(s=d(s.reduce(),t)),r._currentStyle=o,(n||"defs"===e)&&(s.remove(),s=null),s}function r(t,e){var i=new Path,n=t.points;i.moveTo(n.getItem(0));for(var s=1,r=n.numberOfItems;r>s;s++)i.lineTo(n.getItem(s));return"polygon"===e&&i.closePath(),i}function o(t){var e=t.getAttribute("d"),i=e.match(/m/gi).length>1?new CompoundPath:new Path;return i.setPathData(e),i}function a(i,n){for(var s=i.childNodes,r=[],o=0,a=s.length;a>o;o++){var u=s[o];1==u.nodeType&&r.push(d(new GradientStop,u))}var l,h,c,p="radialGradient"===n,f=new(p?RadialGradient:LinearGradient)(r);return p?(l=e(i,"cx","cy"),h=l.add(t(i,"r"),0),c=e(i,"fx","fy",!0)):(l=e(i,"x1","y1"),h=e(i,"x2","y2")),d(new GradientColor(f,l,h,c),i),null}function u(t,e,i,n){for(var s=n[i].baseVal,r=new Matrix,o=0,a=s.numberOfItems;a>o;o++){var u=s.getItem(o).matrix;r.concatenate(new Matrix(u.a,u.b,u.c,u.d,u.e,u.f))}t.transform(r)}function l(t,e,i){var n=t._style["fill-opacity"===i?"getFillColor":"getStrokeColor"]();n&&n.setAlpha(parseFloat(e))}function h(t,e){if(t instanceof TextItem)e(t);else if(t instanceof Group)for(var i=t._children,n=0,s=i.length;s>n;n++)e(i[n])}function c(t,e,i){var n=t.attributes[e],s=n&&n.value;if(!s){var r=Base.camelize(e);s=t.style[r],s||i.node[r]===i.parent[r]||(s=i.node[r])}return s?"none"===s?null:s:void 0}function d(t,e){var i={node:DomElement.getStyles(e)||{},parent:DomElement.getStyles(e.parentNode)||{}};return Base.each(m,function(n,s){var r=c(e,s,i);void 0!==r&&(t=Base.pick(n(t,r,s,e,i),t))}),t}function p(t){var e=t&&t.match(/\((?:#|)([^)']+)/);return e&&v[e[1]]}function f(t,e){var i=t.nodeName,n=g[i],s=n&&n(t,i);return s&&"Group"!==s._type&&(s=d(s,t)),e&&(v={}),s}var g={g:s,svg:s,clipPath:s,polygon:r,polyline:r,path:o,linearGradient:a,radialGradient:a,image:function(n){var s=new Raster(t(n,"href"));return s.attach("load",function(){var t=i(n,"width","height");this.setSize(t),this.translate(e(n,"x","y").add(t.divide(2)))}),s},symbol:function(t,e){return new Symbol(s(t,e),!0)},defs:s,use:function(i){var n=(t(i,"href")||"").substring(1),s=v[n],r=e(i,"x","y");return s?s instanceof Symbol?s.place(r):s.clone().translate(r):null},circle:function(i){return new Path.Circle(e(i,"cx","cy"),t(i,"r"))},ellipse:function(t){var n=e(t,"cx","cy"),s=i(t,"rx","ry");return new Path.Ellipse(new Rectangle(n.subtract(s),n.add(s)))},rect:function(t){var n=e(t,"x","y"),s=i(t,"width","height"),r=i(t,"rx","ry");return new Path.RoundRectangle(new Rectangle(n,s),r)},line:function(t){return new Path.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var i=new PointText(e(t,"x","y",!1,0).add(e(t,"dx","dy",!1,0)));return i.setContent(t.textContent.trim()||""),i}},m=Base.each(SvgStyles,function(t){this[t.attribute]=function(e,i){e._style[t.set](n(i,t.type))}},{id:function(t,e){v[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var i=p(e);return i?(i=i.clone(),i.setClipMask(!0),new Group(i,t)):void 0},gradientTransform:u,transform:u,opacity:function(t,e){t.setOpacity(parseFloat(e))},"fill-opacity":l,"stroke-opacity":l,"font-family":function(t,e){h(t,function(t){t.setFont(e.split(",")[0].replace(/^\s+|\s+$/g,""))})},"font-size":function(t,e){h(t,function(t){t.setFontSize(parseFloat(e))})},"text-anchor":function(t,e){h(t,function(t){t.setJustification({start:"left",middle:"center",end:"right"}[e])})},visibility:function(t,e){t.setVisible("visible"===e)},"stop-color":function(t,e){t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var i=e.match(/(.*)%$/);t.setRampPoint(i?i[1]/100:e)},viewBox:function(t,e,s,r,o){var a=Rectangle.create.apply(this,n(e,"array")),u=i(r,"width","height",!0);if(t instanceof Group){var l=u?a.getSize().divide(u):1,h=(new Matrix).translate(a.getPoint()).scale(l);t.transform(h.inverted())}else if(t instanceof Symbol){u&&a.setSize(u);var d="visible"!=c(r,"overflow",o),p=t._definition;d&&!a.contains(p.getBounds())&&(d=new Path.Rectangle(a).transform(p._matrix),d.setClipMask(!0),p.addChild(d))}}}),v={};Item.inject({importSvg:function(t){return this.addChild(f(t,!0))}}),Project.inject({importSvg:function(t){return this.activate(),f(t,!0)}})},function(t){"use strict";function e(t){pe=t||{};for(var e in ve)pe.hasOwnProperty(e)||(pe[e]=ve[e]);me=pe.sourceFile||null}function i(t,e){var i=ye(fe,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=_e,n}function n(t){function e(t){if(1==t.length)return i+="return str === "+JSON.stringify(t[0])+";";i+="switch(str){";for(var e=0;t.length>e;++e)i+="case "+JSON.stringify(t[e])+":";i+="return true}return false;"}t=t.split(" ");var i="",n=[];t:for(var s=0;t.length>s;++s){for(var r=0;n.length>r;++r)if(n[r][0].length==t[s].length){n[r].push(t[s]);continue t}n.push([t[s]])}if(n.length>3){n.sort(function(t,e){return e.length-t.length}),i+="switch(str.length){";for(var s=0;n.length>s;++s){var o=n[s];i+="case "+o[0].length+":",e(o)}i+="}"}else e(t);return Function("str",i)}function s(t){return 65>t?36===t:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Xi.test(String.fromCharCode(t))}function r(t){return 48>t?36===t:58>t?!0:65>t?!1:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Ji.test(String.fromCharCode(t))}function o(){this.line=Ee,this.column=_e-Te}function a(){Ee=1,_e=Te=0,Pe=!0,c()}function u(t,e){be=_e,pe.locations&&(ke=new o),Ce=t,c(),Se=e,Pe=t.beforeExpr}function l(){var t=pe.onComment&&pe.locations&&new o,e=_e,n=fe.indexOf("*/",_e+=2);if(-1===n&&i(_e-2,"Unterminated comment"),_e=n+2,pe.locations){Zi.lastIndex=e;for(var s;(s=Zi.exec(fe))&&_e>s.index;)++Ee,Te=s.index+s[0].length}pe.onComment&&pe.onComment(!0,fe.slice(e+2,n),e,_e,t,pe.locations&&new o)}function h(){for(var t=_e,e=pe.onComment&&pe.locations&&new o,i=fe.charCodeAt(_e+=2);ge>_e&&10!==i&&13!==i&&8232!==i&&8329!==i;)++_e,i=fe.charCodeAt(_e);pe.onComment&&pe.onComment(!1,fe.slice(t+2,_e),t,_e,e,pe.locations&&new o)}function c(){for(;ge>_e;){var t=fe.charCodeAt(_e);if(32===t)++_e;else if(13===t){++_e;var e=fe.charCodeAt(_e);10===e&&++_e,pe.locations&&(++Ee,Te=_e)}else if(10===t)++_e,++Ee,Te=_e;else if(14>t&&t>8)++_e;else if(47===t){var e=fe.charCodeAt(_e+1);if(42===e)l();else{if(47!==e)break;h()}}else if(14>t&&t>8||32===t||160===t)++_e;else{if(!(t>=5760&&Wi.test(String.fromCharCode(t))))break;++_e}}}function d(){var t=fe.charCodeAt(_e+1);return t>=48&&57>=t?P(!0):(++_e,u(bi))}function p(){var t=fe.charCodeAt(_e+1);return Pe?(++_e,k()):61===t?x(Si,2):x(ki,1)}function f(){var t=fe.charCodeAt(_e+1);return 61===t?x(Si,2):x(Oi,1)}function g(t){var e=fe.charCodeAt(_e+1);return e===t?x(124===t?Ii:Ai,2):61===e?x(Si,2):x(124===t?ji:Li,1)}function m(){var t=fe.charCodeAt(_e+1);return 61===t?x(Si,2):x(Mi,1)}function v(t){var e=fe.charCodeAt(_e+1);return e===t?x(Ei,2):61===e?x(Si,2):x(Pi,1)}function y(t){var e=fe.charCodeAt(_e+1),i=1;return e===t?(i=62===t&&62===fe.charCodeAt(_e+2)?3:2,61===fe.charCodeAt(_e+i)?x(Si,i+1):x(Ni,i)):(61===e&&(i=61===fe.charCodeAt(_e+2)?3:2),x(Bi,i))}function _(t){var e=fe.charCodeAt(_e+1);return 61===e?x(Di,61===fe.charCodeAt(_e+2)?3:2):x(61===t?Ci:Ti,1)}function w(t){switch(t){case 46:return d();case 40:return++_e,u(mi);case 41:return++_e,u(vi);case 59:return++_e,u(_i);case 44:return++_e,u(yi);case 91:return++_e,u(di);case 93:return++_e,u(pi);case 123:return++_e,u(fi);case 125:return++_e,u(gi);case 58:return++_e,u(wi);case 63:return++_e,u(xi);case 48:var e=fe.charCodeAt(_e+1);if(120===e||88===e)return S();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return P(!1);case 34:case 39:return E(t);case 47:return p(t);case 37:case 42:return f();case 124:case 38:return g(t);case 94:return m();case 43:case 45:return v(t);case 60:case 62:return y(t);case 61:case 33:return _(t);case 126:return x(Ti,1)}return!1}function b(t){if(we=_e,pe.locations&&(xe=new o),t)return k();if(_e>=ge)return u(Fe);var e=fe.charCodeAt(_e);if(s(e)||92===e)return A();var n=w(e);if(n===!1){var r=String.fromCharCode(e);if("\\"===r||Xi.test(r))return A();i(_e,"Unexpected character '"+r+"'")}return n}function x(t,e){var i=fe.slice(_e,_e+e);_e+=e,u(t,i)}function k(){for(var t,e,n="",s=_e;;){_e>=ge&&i(s,"Unterminated regular expression");var r=fe.charAt(_e);if(Yi.test(r)&&i(s,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++_e}var n=fe.slice(s,_e);++_e;var o=I();return o&&!/^[gmsiy]*$/.test(o)&&i(s,"Invalid regexp flag"),u(Ne,RegExp(n,o))}function C(t,e){for(var i=_e,n=0,s=0,r=null==e?1/0:e;r>s;++s){var o,a=fe.charCodeAt(_e);if(o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&57>=a?a-48:1/0,o>=t)break;++_e,n=n*t+o}return _e===i||null!=e&&_e-i!==e?null:n}function S(){_e+=2;var t=C(16);return null==t&&i(we+2,"Expected hexadecimal number"),s(fe.charCodeAt(_e))&&i(_e,"Identifier directly after number"),u(Be,t)}function P(t){var e=_e,n=!1,r=48===fe.charCodeAt(_e);t||null!==C(10)||i(e,"Invalid number"),46===fe.charCodeAt(_e)&&(++_e,C(10),n=!0);var o=fe.charCodeAt(_e);(69===o||101===o)&&(o=fe.charCodeAt(++_e),(43===o||45===o)&&++_e,null===C(10)&&i(e,"Invalid number"),n=!0),s(fe.charCodeAt(_e))&&i(_e,"Identifier directly after number");var a,l=fe.slice(e,_e);return n?a=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||De?i(e,"Invalid number"):a=parseInt(l,8):a=parseInt(l,10),u(Be,a)}function E(t){_e++;for(var e="";;){_e>=ge&&i(we,"Unterminated string constant");var n=fe.charCodeAt(_e);if(n===t)return++_e,u(Oe,e);if(92===n){n=fe.charCodeAt(++_e);var s=/^[0-7]+/.exec(fe.slice(_e,_e+3));for(s&&(s=s[0]);s&&parseInt(s,8)>255;)s=s.slice(0,s.length-1);if("0"===s&&(s=null),++_e,s)De&&i(_e-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(s,8)),_e+=s.length-1;else switch(n){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(T(2));break;case 117:e+=String.fromCharCode(T(4));break;case 85:e+=String.fromCharCode(T(8));break;case 116:e+=" ";break;case 98:e+="\b";break;case 118:e+="";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===fe.charCodeAt(_e)&&++_e;case 10:pe.locations&&(Te=_e,++Ee);break;default:e+=String.fromCharCode(n)}}else(13===n||10===n||8232===n||8329===n)&&i(we,"Unterminated string constant"),e+=String.fromCharCode(n),++_e}}function T(t){var e=C(16,t);return null===e&&i(we,"Bad character escape sequence"),e}function I(){Fi=!1;for(var t,e=!0,n=_e;;){var o=fe.charCodeAt(_e);if(r(o))Fi&&(t+=fe.charAt(_e)),++_e;else{if(92!==o)break;Fi||(t=fe.slice(n,_e)),Fi=!0,117!=fe.charCodeAt(++_e)&&i(_e,"Expecting Unicode escape sequence \\uXXXX"),++_e;var a=T(4),u=String.fromCharCode(a);u||i(_e-1,"Invalid Unicode escape"),(e?s(a):r(a))||i(_e-4,"Invalid Unicode escape"),t+=u}e=!1}return Fi?t:fe.slice(n,_e)}function A(){var t=I(),e=ze;return Fi||(Ui(t)?e=ci[t]:(pe.forbidReserved&&(3===pe.ecmaVersion?Ri:Vi)(t)||De&&qi(t))&&i(we,"The keyword '"+t+"' is reserved")),u(e,t)}function j(){Ie=we,Ae=be,je=ke,b()}function M(t){De=t,_e=Ae,c(),b()}function L(){this.type=null,this.start=we,this.end=null}function D(){this.start=xe,this.end=null,null!==me&&(this.source=me)}function B(){var t=new L;return pe.locations&&(t.loc=new D),pe.ranges&&(t.range=[we,0]),t}function N(t){var e=new L;return e.start=t.start,pe.locations&&(e.loc=new D,e.loc.start=t.loc.start),pe.ranges&&(e.range=[t.range[0],0]),e}function O(t,e){return t.type=e,t.end=Ae,pe.locations&&(t.loc.end=je),pe.ranges&&(t.range[1]=Ae),t}function z(t){return pe.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function F(t){return Ce===t?(j(),!0):void 0}function R(){return!pe.strictSemicolons&&(Ce===Fe||Ce===gi||Yi.test(fe.slice(Ae,we)))}function V(){F(_i)||R()||H()}function q(t){Ce===t?j():H()}function H(){i(we,"Unexpected token")}function U(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&i(t.start,"Assigning to rvalue"),De&&"Identifier"===t.type&&Hi(t.name)&&i(t.start,"Assigning to "+t.name+" in strict mode")}function W(t){Ie=Ae=_e,pe.locations&&(je=new o),Me=De=null,Le=[],b();var e=t||B(),i=!0;for(t||(e.body=[]);Ce!==Fe;){var n=G();e.body.push(n),i&&z(n)&&M(!0),i=!1}return O(e,"Program")}function G(){Ce===ki&&b(!0);var t=Ce,e=B();switch(t){case Re:case He:j();var n=t===Re;F(_i)||R()?e.label=null:Ce!==ze?H():(e.label=de(),V());for(var s=0;Le.length>s;++s){var r=Le[s];if(null==e.label||r.name===e.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(e.label&&n)break}}return s===Le.length&&i(e.start,"Unsyntactic "+t.keyword),O(e,n?"BreakStatement":"ContinueStatement");case Ue:return j(),V(),O(e,"DebuggerStatement");case Ge:return j(),Le.push(Qi),e.body=G(),Le.pop(),q(ni),e.test=$(),V(),O(e,"DoWhileStatement");case Je:if(j(),Le.push(Qi),q(mi),Ce===_i)return J(e,null);if(Ce===ii){var o=B();return j(),Z(o,!0),1===o.declarations.length&&F(hi)?Y(e,o):J(e,o)}var o=Q(!1,!0);return F(hi)?(U(o),Y(e,o)):J(e,o);case Ye:return j(),he(e,!0);case Ze:return j(),e.test=$(),e.consequent=G(),e.alternate=F($e)?G():null,O(e,"IfStatement");case Qe:return Me||i(we,"'return' outside of function"),j(),F(_i)||R()?e.argument=null:(e.argument=Q(),V()),O(e,"ReturnStatement");case Ke:j(),e.discriminant=$(),e.cases=[],q(fi),Le.push(Ki);for(var a,u;Ce!=gi;)if(Ce===Ve||Ce===We){var l=Ce===Ve;a&&O(a,"SwitchCase"),e.cases.push(a=B()),a.consequent=[],j(),l?a.test=Q():(u&&i(Ie,"Multiple default clauses"),u=!0,a.test=null),q(wi)}else a||H(),a.consequent.push(G());return a&&O(a,"SwitchCase"),j(),Le.pop(),O(e,"SwitchStatement");case ti:return j(),Yi.test(fe.slice(Ae,we))&&i(Ae,"Illegal newline after throw"),e.argument=Q(),V(),O(e,"ThrowStatement");case ei:for(j(),e.block=X(),e.handlers=[];Ce===qe;){var h=B();j(),q(mi),h.param=de(),De&&Hi(h.param.name)&&i(h.param.start,"Binding "+h.param.name+" in strict mode"),q(vi),h.guard=null,h.body=X(),e.handlers.push(O(h,"CatchClause"))}return e.finalizer=F(Xe)?X():null,e.handlers.length||e.finalizer||i(e.start,"Missing catch or finally clause"),O(e,"TryStatement");case ii:return j(),e=Z(e),V(),e;case ni:return j(),e.test=$(),Le.push(Qi),e.body=G(),Le.pop(),O(e,"WhileStatement");case si:return De&&i(we,"'with' in strict mode"),j(),e.object=$(),e.body=G(),O(e,"WithStatement");case fi:return X();case _i:return j(),O(e,"EmptyStatement");default:var c=Se,d=Q();if(t===ze&&"Identifier"===d.type&&F(wi)){for(var s=0;Le.length>s;++s)Le[s].name===c&&i(d.start,"Label '"+c+"' is already declared");var p=Ce.isLoop?"loop":Ce===Ke?"switch":null;return Le.push({name:c,kind:p}),e.body=G(),Le.pop(),e.label=d,O(e,"LabeledStatement")}return e.expression=d,V(),O(e,"ExpressionStatement")}}function $(){q(mi);var t=Q();return q(vi),t}function X(){var t,e=B(),i=!0,n=!1;for(e.body=[],q(fi);!F(gi);){var s=G();e.body.push(s),i&&z(s)&&(t=n,M(n=!0)),i=!1}return n&&!t&&M(!1),O(e,"BlockStatement")}function J(t,e){return t.init=e,q(_i),t.test=Ce===_i?null:Q(),q(_i),t.update=Ce===vi?null:Q(),q(vi),t.body=G(),Le.pop(),O(t,"ForStatement")}function Y(t,e){return t.left=e,t.right=Q(),q(vi),t.body=G(),Le.pop(),O(t,"ForInStatement")}function Z(t,e){for(t.declarations=[],t.kind="var";;){var n=B();if(n.id=de(),De&&Hi(n.id.name)&&i(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=F(Ci)?Q(!0,e):null,t.declarations.push(O(n,"VariableDeclarator")),!F(yi))break}return O(t,"VariableDeclaration")}function Q(t,e){var i=K(e);if(!t&&Ce===yi){var n=N(i);for(n.expressions=[i];F(yi);)n.expressions.push(K(e));return O(n,"SequenceExpression")}return i}function K(t){var e=te(t);if(Ce.isAssign){var i=N(e);return i.operator=Se,i.left=e,j(),i.right=K(t),U(e),O(i,"AssignmentExpression")}return e}function te(t){var e=ee(t);if(F(xi)){var i=N(e);return i.test=e,i.consequent=Q(!0),q(wi),i.alternate=Q(!0,t),O(i,"ConditionalExpression")}return e}function ee(t){return ie(ne(t),-1,t)}function ie(t,e,i){var n=Ce.binop;if(null!=n&&(!i||Ce!==hi)&&n>e){var s=N(t);s.left=t,s.operator=Se,j(),s.right=ie(ne(i),n,i);var s=O(s,/&&|\|\|/.test(s.operator)?"LogicalExpression":"BinaryExpression");return ie(s,e,i)}return t}function ne(t){if(Ce.prefix){var e=B(),n=Ce.isUpdate;return e.operator=Se,e.prefix=!0,j(),e.argument=ne(t),n?U(e.argument):De&&"delete"===e.operator&&"Identifier"===e.argument.type&&i(e.start,"Deleting local variable in strict mode"),O(e,n?"UpdateExpression":"UnaryExpression")}for(var s=se();Ce.postfix&&!R();){var e=N(s);e.operator=Se,e.prefix=!1,e.argument=s,U(s),j(),s=O(e,"UpdateExpression")}return s}function se(){return re(oe())}function re(t,e){if(F(bi)){var i=N(t);return i.object=t,i.property=de(!0),i.computed=!1,re(O(i,"MemberExpression"),e)}if(F(di)){var i=N(t);return i.object=t,i.property=Q(),i.computed=!0,q(pi),re(O(i,"MemberExpression"),e)}if(!e&&F(mi)){var i=N(t);return i.callee=t,i.arguments=ce(vi,!1),re(O(i,"CallExpression"),e)}return t}function oe(){switch(Ce){case oi:var t=B();return j(),O(t,"ThisExpression");case ze:return de();case Be:case Oe:case Ne:var t=B();return t.value=Se,t.raw=fe.slice(we,be),j(),O(t,"Literal");case ai:case ui:case li:var t=B();return t.value=Ce.atomValue,t.raw=Ce.keyword,j(),O(t,"Literal");case mi:var e=xe,i=we;j();var n=Q();return n.start=i,n.end=be,pe.locations&&(n.loc.start=e,n.loc.end=ke),pe.ranges&&(n.range=[i,be]),q(vi),n;case di:var t=B();return j(),t.elements=ce(pi,!0,!0),O(t,"ArrayExpression");case fi:return ue();case Ye:var t=B();return j(),he(t,!1);case ri:return ae();default:H()}}function ae(){var t=B();return j(),t.callee=re(oe(),!0),t.arguments=F(mi)?ce(vi,!1):[],O(t,"NewExpression")}function ue(){var t=B(),e=!0,n=!1;for(t.properties=[],j();!F(gi);){if(e)e=!1;else if(q(yi),pe.allowTrailingCommas&&F(gi))break;var s,r={key:le()},o=!1;if(F(wi)?(r.value=Q(!0),s=r.kind="init"):pe.ecmaVersion>=5&&"Identifier"===r.key.type&&("get"===r.key.name||"set"===r.key.name)?(o=n=!0,s=r.kind=r.key.name,r.key=le(),Ce!==mi&&H(),r.value=he(B(),!1)):H(),"Identifier"===r.key.type&&(De||n))for(var a=0;t.properties.length>a;++a){var u=t.properties[a];if(u.key.name===r.key.name){var l=s==u.kind||o&&"init"===u.kind||"init"===s&&("get"===u.kind||"set"===u.kind);l&&!De&&"init"===s&&"init"===u.kind&&(l=!1),l&&i(r.key.start,"Redefinition of property")}}t.properties.push(r)}return O(t,"ObjectExpression")}function le(){return Ce===Be||Ce===Oe?oe():de(!0)}function he(t,e){Ce===ze?t.id=de():e?H():t.id=null,t.params=[];var n=!0;for(q(mi);!F(vi);)n?n=!1:q(yi),t.params.push(de());var s=Me,r=Le;if(Me=!0,Le=[],t.body=X(!0),Me=s,Le=r,De||t.body.body.length&&z(t.body.body[0]))for(var o=t.id?-1:0;t.params.length>o;++o){var a=0>o?t.id:t.params[o];if((qi(a.name)||Hi(a.name))&&i(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var u=0;o>u;++u)a.name===t.params[u].name&&i(a.start,"Argument name clash in strict mode")}return O(t,e?"FunctionDeclaration":"FunctionExpression")}function ce(t,e,i){for(var n=[],s=!0;!F(t);){if(s)s=!1;else if(q(yi),e&&pe.allowTrailingCommas&&F(t))break;i&&Ce===yi?n.push(null):n.push(Q(!0))}return n}function de(t){var e=B();return e.name=Ce===ze?Se:t&&!pe.forbidReserved&&Ce.keyword||H(),j(),O(e,"Identifier")}t.version="0.1.01";var pe,fe,ge,me;t.parse=function(t,i){return fe=t+"",ge=fe.length,e(i),a(),W(pe.program)};var ve=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null},ye=t.getLineInfo=function(t,e){for(var i=1,n=0;;){Zi.lastIndex=n;var s=Zi.exec(t);if(!(s&&e>s.index))break;++i,n=s.index+s[0].length}return{line:i,column:e-n}};t.tokenize=function(t,i){function n(t){return b(t),s.start=we,s.end=be,s.startLoc=xe,s.endLoc=ke,s.type=Ce,s.value=Se,s}fe=t+"",ge=fe.length,e(i),a();var s={};return n.jumpTo=function(t,e){if(_e=t,pe.locations){Ee=Te=Zi.lastIndex=0;for(var i;(i=Zi.exec(fe))&&t>i.index;)++Ee,Te=i.index+i[0].length}fe.charAt(t-1),Pe=e,c()},n};var _e,we,be,xe,ke,Ce,Se,Pe,Ee,Te,Ie,Ae,je,Me,Le,De,Be={type:"num"},Ne={type:"regexp"},Oe={type:"string"},ze={type:"name"},Fe={type:"eof"},Re={keyword:"break"},Ve={keyword:"case",beforeExpr:!0},qe={keyword:"catch"},He={keyword:"continue"},Ue={keyword:"debugger"},We={keyword:"default"},Ge={keyword:"do",isLoop:!0},$e={keyword:"else",beforeExpr:!0},Xe={keyword:"finally"},Je={keyword:"for",isLoop:!0},Ye={keyword:"function"},Ze={keyword:"if"},Qe={keyword:"return",beforeExpr:!0},Ke={keyword:"switch"},ti={keyword:"throw",beforeExpr:!0},ei={keyword:"try"},ii={keyword:"var"},ni={keyword:"while",isLoop:!0},si={keyword:"with"},ri={keyword:"new",beforeExpr:!0},oi={keyword:"this"},ai={keyword:"null",atomValue:null},ui={keyword:"true",atomValue:!0},li={keyword:"false",atomValue:!1},hi={keyword:"in",binop:7,beforeExpr:!0},ci={"break":Re,"case":Ve,"catch":qe,"continue":He,"debugger":Ue,"default":We,"do":Ge,"else":$e,"finally":Xe,"for":Je,"function":Ye,"if":Ze,"return":Qe,"switch":Ke,"throw":ti,"try":ei,"var":ii,"while":ni,"with":si,"null":ai,"true":ui,"false":li,"new":ri,"in":hi,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":oi,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},di={type:"[",beforeExpr:!0},pi={type:"]"},fi={type:"{",beforeExpr:!0},gi={type:"}"},mi={type:"(",beforeExpr:!0},vi={type:")"},yi={type:",",beforeExpr:!0},_i={type:";",beforeExpr:!0},wi={type:":",beforeExpr:!0},bi={type:"."},xi={type:"?",beforeExpr:!0},ki={binop:10,beforeExpr:!0},Ci={isAssign:!0,beforeExpr:!0},Si={isAssign:!0,beforeExpr:!0},Pi={binop:9,prefix:!0,beforeExpr:!0},Ei={postfix:!0,prefix:!0,isUpdate:!0},Ti={prefix:!0,beforeExpr:!0},Ii={binop:1,beforeExpr:!0},Ai={binop:2,beforeExpr:!0},ji={binop:3,beforeExpr:!0},Mi={binop:4,beforeExpr:!0},Li={binop:5,beforeExpr:!0},Di={binop:6,beforeExpr:!0},Bi={binop:7,beforeExpr:!0},Ni={binop:8,beforeExpr:!0},Oi={binop:10,beforeExpr:!0};t.tokTypes={bracketL:di,bracketR:pi,braceL:fi,braceR:gi,parenL:mi,parenR:vi,comma:yi,semi:_i,colon:wi,dot:bi,question:xi,slash:ki,eq:Ci,name:ze,eof:Fe,num:Be,regexp:Ne,string:Oe};for(var zi in ci)t.tokTypes[zi]=ci[zi];var Fi,Ri=n("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Vi=n("class enum extends super const export import"),qi=n("implements interface let package private protected public static yield"),Hi=n("eval arguments"),Ui=n("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Wi=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,Gi="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",$i="------------------------------------------------------------------------------------------------------------------------------------------",Xi=RegExp("["+Gi+"]"),Ji=RegExp("["+Gi+$i+"]"),Yi=/[\n\r\u2028\u2029]/,Zi=/\r\n|[\n\r\u2028\u2029]/g,Qi={kind:"loop"},Ki={kind:"switch"}}("undefined"==typeof exports?self.acorn={}:exports);var PaperScript=this.PaperScript=new function(){function _$_(t,e,i){var n=binaryOperators[e];if(t&&t[n]){var s=t[n](i);return"!="===e?!s:s}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;case"%":return t%i;case"==":return t==i;case"!=":return t!=i}}function $_(t,e){var i=unaryOperators[t];if(i&&e&&e[i])return e[i]();switch(t){case"+":return+e;case"-":return-e}}function compile(t){function e(t){for(var e=0,i=r.length;i>e;e++){var n=r[e];if(n[0]>=t)break;t+=n[1]}return t}function i(i){return t.substring(e(i.range[0]),e(i.range[1]))}function n(i,n){for(var s=e(i.range[0]),o=e(i.range[1]),a=0,u=r.length-1;u>=0;u--)if(s>r[u][0]){a=u+1;break}r.splice(a,0,[s,n.length-o+s]),t=t.substring(0,s)+n+t.substring(o)}function s(t){for(var e in t)if("range"!==e){var r=t[e];if(Array.isArray(r))for(var o=0,a=r.length;a>o;o++)s(r[o]);else r&&"object"==typeof r&&s(r)}switch(t&&t.type){case"BinaryExpression":if(t.operator in binaryOperators&&"Literal"!==t.left.type){var u=i(t.left),l=i(t.right);n(t,"_$_("+u+', "'+t.operator+'", '+l+")")}break;case"AssignmentExpression":if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var u=i(t.left),l=i(t.right);n(t,u+" = _$_("+u+', "'+t.operator[0]+'", '+l+")")}break;case"UpdateExpression":if(!t.prefix){var h=i(t.argument);n(t,h+" = _$_("+h+', "'+t.operator[0]+'", 1)')}break;case"UnaryExpression":if(t.operator in unaryOperators&&"Literal"!==t.argument.type){var h=i(t.argument);n(t,'$_("'+t.operator+'", '+h+")")}}}var r=[];return s(acorn.parse(t,{ranges:!0})),t}function evaluate(code,scope){paper=scope;var view=scope.project&&scope.project.view,res;with(scope)(function(){var onActivate,onDeactivate,onEditOptions,onMouseDown,onMouseUp,onMouseDrag,onMouseMove,onKeyDown,onKeyUp,onFrame,onResize;
res=eval(compile(code)),/on(?:Key|Mouse)(?:Up|Down|Move|Drag)/.test(code)&&Base.each(Tool.prototype._events,function(key){var value=eval(key);value&&(scope.getTool()[key]=value)}),view&&(view.setOnResize(onResize),view.fire("resize",{size:view.size,delta:new Point}),view.setOnFrame(onFrame),view.draw())}).call(scope);return res}function request(t,e){var i=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return i.open("GET",t,!0),i.overrideMimeType&&i.overrideMimeType("text/plain"),i.onreadystatechange=function(){return 4===i.readyState?evaluate(i.responseText,e):void 0},i.send(null)}function load(){for(var t=document.getElementsByTagName("script"),e=0,i=t.length;i>e;e++){var n=t[e];if(/^text\/(?:x-|)paperscript$/.test(n.type)&&!n.getAttribute("data-paper-ignore")){var s=PaperScript.getAttribute(n,"canvas"),r=PaperScope.get(s)||new PaperScope(n).setup(s);n.src?request(n.src,r):evaluate(n.innerHTML,r),n.setAttribute("data-paper-ignore",!0)}}}function handleAttribute(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}var binaryOperators={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"modulo","==":"equals","!=":"equals"},unaryOperators={"-":"negate","+":null};return"complete"===document.readyState?setTimeout(load):DomEvent.add(window,{load:load}),{compile:compile,evaluate:evaluate,load:load,getAttribute:handleAttribute("get"),hasAttribute:handleAttribute("has")}};return this.enumerable=!0,new(PaperScope.inject(this))}}function loadFroogaLoop(){window.Froogaloop=function(){function t(e){return new t.fn.init(e)}function e(t,e,i){if(!i.contentWindow.postMessage)return!1;var n=i.getAttribute("src").split("?")[0],t=JSON.stringify({method:t,value:e});"//"===n.substr(0,2)&&(n=window.location.protocol+n),i.contentWindow.postMessage(t,n)}function i(t){var e,i;try{e=JSON.parse(t.data),i=e.event||e.method}catch(n){}if("ready"==i&&!r&&(r=!0),t.origin!=o)return!1;var t=e.value,a=e.data,u=""===u?null:e.player_id;return e=u?s[u][i]:s[i],i=[],e?(void 0!==t&&i.push(t),a&&i.push(a),u&&i.push(u),i.length>0?e.apply(null,i):e.call()):!1}function n(t,e,i){i?(s[i]||(s[i]={}),s[i][t]=e):s[t]=e}var s={},r=!1,o="";return t.fn=t.prototype={element:null,init:function(t){"string"==typeof t&&(t=document.getElementById(t)),this.element=t,t=this.element.getAttribute("src"),"//"===t.substr(0,2)&&(t=window.location.protocol+t);for(var t=t.split("/"),e="",i=0,n=t.length;n>i&&3>i;i++)e+=t[i],2>i&&(e+="/");return o=e,this},api:function(t,i){if(!this.element||!t)return!1;var s=this.element,r=""!==s.id?s.id:null,o=i&&i.constructor&&i.call&&i.apply?null:i,a=i&&i.constructor&&i.call&&i.apply?i:null;return a&&n(t,a,r),e(t,o,s),this},addEvent:function(t,i){if(!this.element)return!1;var s=this.element,o=""!==s.id?s.id:null;return n(t,i,o),"ready"!=t?e("addEventListener",t,s):"ready"==t&&r&&i.call(null,o),this},removeEvent:function(t){if(!this.element)return!1;var i,n=this.element;t:{if((i=""!==n.id?n.id:null)&&s[i]){if(!s[i][t]){i=!1;break t}s[i][t]=null}else{if(!s[t]){i=!1;break t}s[t]=null}i=!0}"ready"!=t&&i&&e("removeEventListener",t,n)}},t.fn.init.prototype=t.fn,window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i),window.Froogaloop=window.$f=t}()}function loadFilterUTImage(){(function(){"use strict";window.filterUTImageData=function(t,e,i,n){if(i&&i.parameters){var s=function(t){t*=1;var e=.3086,i=.6094,n=.082,s=(1-t)*e,r=(1-t)*i,o=(1-t)*n,a=[s+t,r,o,0,0,s,r+t,o,0,0,s,r,o+t,0,0,0,0,0,1,0];return a.join(" ")},r=function(t){var e={saturation:0,gammaR:0,gammaG:0,gammaB:0,vignette:0};t&&t.parameters&&(e={saturation:s(t.parameters.saturation),gammaR:t.parameters.gammaR,gammaG:t.parameters.gammaG,gammaB:t.parameters.gammaB,amplitudeR:t.parameters.amplitudeR||1,amplitudeG:t.parameters.amplitudeG||1,amplitudeB:t.parameters.amplitudeB||1,exponentR:t.parameters.exponentR||1,exponentG:t.parameters.exponentG||1,exponentB:t.parameters.exponentB||1,vignette:t.parameters.vignette});var i='<filter id="blackAndWhite" x="0" y="0" width="100%" height="100%" filterUnits="objectBoundingBox" primitiveUnits="userSpaceOnUse"><feColorMatrix id="saturation-0" result="flt1" values="'+e.saturation+'"/>'+'<feComponentTransfer in="flt1" result="flt2">'+'<feFuncR type="gamma" id="redChannel-0"   amplitude="'+e.amplitudeR+'" exponent="'+e.exponentR+'" offset="'+e.gammaR+'"/>'+'<feFuncG type="gamma" id="greenChannel-0" amplitude="'+e.amplitudeG+'" exponent="'+e.exponentG+'" offset="'+e.gammaG+'"/>'+'<feFuncB type="gamma" id="blueChannel-0"  amplitude="'+e.amplitudeB+'" exponent="'+e.exponentB+'" offset="'+e.gammaB+'"/>'+"</feComponentTransfer>"+"</filter>";return i},o=function(){var s=this.width,o=this.height,a=r(i),u='<svg class="ut-image-view" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 '+s+" "+o+'" enable-background="new 0 0 '+s+" "+o+'" xml:space="preserve" preserveAspectRatio="none">'+"<defs>"+a+"</defs>"+'<image filter="url(#blackAndWhite)" class="ut-image-view-svg-img" preserveAspectRatio="xMidYMid meet" width="'+s+'px" height="'+o+'px" xlink:href="{file}"/>'+'<g><radialGradient id="MyGradient"><stop offset="10%" stop-color="#000000" stop-opacity="0" /><stop offset="100%" stop-color="#000000" stop-opacity="'+i.parameters.vignette+'" id="vignette" /></radialGradient><ellipse fill="url(#MyGradient)" cx="50%" cy="50%" rx="100%" ry="100%"/></ellipse></g>'+"</svg>";e.svg(u.replace("{file}",""),"image[xlink:href]"),e.svg(function(){t.save()});var l=!(void 0===window.SVGFEColorMatrixElement||2!==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE);l?n($(u.replace("{file}",e.url)),{w:s,h:o,d:e}):e.filter([{filter:"saturation",parameters:{strength:1-i.parameters.saturation}},{filter:"gammaRGB",parameters:{amplitudeR:i.parameters.amplitudeR,exponentR:i.parameters.exponentR,offsetR:i.parameters.gammaR,amplitudeG:i.parameters.amplitudeG,exponentG:i.parameters.exponentG,offsetG:i.parameters.gammaG,amplitudeB:i.parameters.amplitudeB,exponentB:i.parameters.exponentB,offsetB:i.parameters.gammaB}},{filter:"vignette",parameters:{size:i.parameters.vignette/2,amount:.14,centerX:.5,centerY:.5,r:0,g:0,b:0}}],function(t){setTimeout(function(){n($("<div>").css("background-image","url("+t.url+")"),{w:s,h:o,d:e})},0)})},a=new Image;a.onload=o,a.src=e.url}else if(n){var u=new Image;u.onload=function(){n($("<div>").css("background-image","url("+e.url+")"),{w:this.width,h:this.height,d:e})},u.src=e.url}},window.filterUTImageDataView=function(t,e){var i=new Image;i.onload=function(){if(t.rasterUrl)e({obj:$("<div>").css("background-image","url("+this.src+")"),w:this.width,h:this.height});else if(t.svgTemplate&&t.svgCssSelector){var i=t.svgTemplate.replace("<image ",'<image xlink:href="'+this.src+'" ');e({obj:$(i),w:this.width,h:this.height})}else e({obj:$("<div>").css("background-image","url("+this.src+")"),w:this.width,h:this.height})},i.src=t.rasterUrl||t.url}})()}function loadUTImage(){(function(t,e,i,n){"use strict";var s={nextPanelToAddImage:-1,init:function(i){return this.each(function(){if(this.utImage)return"object"==typeof i&&(this.utImage.options=t.extend(!0,this.utImage.options,i),i&&i.styles&&i.styles.linkPosition&&(this.utImage.options.styles.linkPosition=t.extend(!0,{},i.styles.linkPosition)),i&&i.styles&&i.styles.menuPosition&&(this.utImage.options.styles.menuPosition=t.extend(!0,{},i.styles.menuPosition)),i.data&&this.utImage.firstTimeImageLoad()),this.utImage.updateElement(),this.utImage.createElements(),this.utImage.resizeContainer(),n;var r={ready:"utImage:ready",buttonClick:"utImage:buttonClick",mediaBeforeAdd:"utImage:mediaBeforeAdd",mediaAdd:"utImage:mediaAdd",mediaCrop:"utImage:mediaCrop",mediaRemove:"utImage:mediaRemove",mediaReady:"utImage:mediaReady",change:"utImage:change",focus:"utImage:focus",blur:"utImage:blur",destroy:"utImage:destroy",dialogOpen:"utImage:dialogOpen",dialogCancel:"utImage:dialogCancel",resize:"utImage:resize"},o={id:"",editable:!0,ui:{add:!0,edit:!0,remove:!0,source:!1},type:"background",data:null,autoSave:!0,styles:{width:"auto",height:!1,minHeight:n,maxHeight:n,minWidth:n,maxWidth:n,flexRatio:!0,autoCrop:!0,linkPosition:{},menuPosition:{},filters:[],groupMode:!1,autoResize:!0,listenMedia:!0,svgFilterName:"",svgFilterData:"",expandPreloader:!1},i18n:{dialogLabel:n},dialog:{preferedFormat:!1},reuse:!1},a={};this.utImage=a,a.initialized=!1;var u=t(this);a.options=t.extend(!0,o,i),a.isTouch="ontouchstart"in e||e.navigator.msMaxTouchPoints>0,a.isEditMode=!1,a.data={pictureData:null,image:null,imageWidth:0,imageHeight:0,scrollTop:0,scrollBottom:0},a.view={addButton:null,ctrlPanel:null,editButton:null,removeButton:null},UT.Expression.ready(function(e){a.post=e,a.isEditMode=e.context.editor,a.options.editable=a.isEditMode?a.options.editable:!1,a.initialized&&(setTimeout(function(){if(u.trigger(r.ready,{id:a.options.id,data:a.options.data||a.post.storage["utImage_"+a.options.id+"_img"]}),a.options.styles.autoResize&&a.post.storage["utImage_"+a.options.id+"_ratio"]){var t={width:u.width(),height:Math.round(a.width()/a.post.storage["utImage_"+a.options.id+"_ratio"]),ratio:a.post.storage["utImage_"+a.options.id+"_ratio"]};t.height!==u.height()&&(u.height(t.height),u.trigger(r.resize,t))}},0),a.addMediaListener()),setTimeout(function(){t(".webdoc_expression_wrapper").on("touchmove",a.onTouchMove),a.post.on("scroll",a.onPostScroll)},0)}),a.updateElement=function(){a.options.styles.groupMode?u.addClass("ut-image-in-group"):u.removeClass("ut-image-in-group"),""===u.attr("id")&&a.options.id&&(a.options.id="image-"+UT.uuid()),""!==a.options.id?u.attr("id",a.options.id):a.options.id=u.attr("id")},a.prepareElement=function(){u.addClass("ut-image"),a.updateElement(),u.on("click",function(){!u.hasClass("ut-image-focus")||u.hasClass("ut-image-inscroll")?(u.removeClass("ut-image-inscroll"),a.focus()):a.options.styles.groupMode&&a.blur()})},a.createElements=function(){return a.view.addButton&&(a.view.addButton.remove(),a.view.addButton=null),a.view.ctrlPanel&&(a.view.ctrlPanel.remove(),a.view.ctrlPanel=null),a.updateSourceLink(),a.options.editable?(u.addClass("ut-image-edit"),a.options.ui.add&&(a.view.addButton=t("<div>",{"class":"ut-image-button-add ut-button ut-media-button icon_camera"}).appendTo(u).html(i18n.get("add_image")),a.view.addButton.on("click",a.onAddButtonClick)),(a.options.ui.edit||a.options.ui.remove)&&(a.view.ctrlPanel=t("<div>",{"class":"ut-image-control-panel"}).appendTo(u),a.options.ui.edit&&(a.view.editButton=t("<div>",{"class":"ut-image-button-edit"}).appendTo(a.view.ctrlPanel),t("<span>").appendTo(a.view.editButton).html('<span class="icon_camera">&nbsp;</span>'+i18n.get("edit")),a.view.editButton.on("click",a.onEditButtonClick)),a.options.ui.remove&&(a.view.removeButton=t("<div>",{"class":"ut-image-button-remove"}).appendTo(a.view.ctrlPanel),t("<span>").appendTo(a.view.removeButton).html('<span class="icon_trash"></span>'),a.view.removeButton.on("click",a.onRemoveButtonClick)),a.options.styles.menuPosition.left!==n?a.view.ctrlPanel.css({left:parseInt(a.options.styles.menuPosition.left,10)+"px",right:"auto"}):a.options.styles.menuPosition.right!==n?a.view.ctrlPanel.css({right:parseInt(a.options.styles.menuPosition.right,10)+"px",left:"auto"}):a.view.ctrlPanel.css({left:"15px",right:"auto"})),a.updateButtonsPosition(),n):(u.removeClass("ut-image-edit"),n)},a._onLinkTouch=function(t){t.stopPropagation(),a.data.srcLink.hasClass("showText")&&e.open(a.data.srcLink.attr("data-href"),"_blank")},a._onImageTouch=function(){a.data.srcLink.hasClass("show")?a.data.srcLink.removeClass("show").removeClass("showText"):(t(".sourceLink").not(a.data.srcLink).removeClass("show").removeClass("showText"),a.data.srcLink.addClass("show"))},a._onIconTouch=function(t){a.data.srcLink.hasClass("show")&&(a.data.srcLink.addClass("showText"),t.stopPropagation())},a._onImageMouseEnter=function(){a.data.srcLink.hasClass("show")||a.data.srcLink.addClass("show")},a._onImageMouseLeave=function(){a.data.srcLink.removeClass("show").removeClass("showText")},a._onLinkMouseEnter=function(){a.data.srcLink.hasClass("show")&&a.data.srcLink.addClass("showText")},a._onLinkMouseLeave=function(){a.data.srcLink.removeClass("showText")},a._onLinkMouseClick=function(t){a.data.srcLink.hasClass("showText")&&e.open(a.data.srcLink.attr("data-href"),"_blank"),t.stopPropagation(),t.preventDefault()},a.updateSourceLink=function(){var e=function(){a.data.srcLink&&(a.isTouch?(a.data.srcLink.off("click",a._onLinkTouch),u.find(".ut-image-source-link-icon").off("click",a._onIconTouch)):(a.data.srcLink.off("mouseenter",a._onLinkMouseEnter).off("mouseleave",a._onLinkMouseLeave),a.data.srcLink.off("click",a._onLinkMouseClick)),a.data.srcLink.remove(),a.data.srcLink=null),a.isTouch?u.off("click",a._onImageTouch):u.off("mouseenter",a._onImageMouseEnter).off("mouseleave",a._onImageMouseLeave)};if(e(),!a.options.editable&&a.options.ui.source&&a.data.pictureData&&a.data.pictureData.info&&a.data.pictureData.info.source){var i=a.data.pictureData.info.source.match(/\/\/([^\/]+)\//i);if(!(i&&i[0]||(i=a.data.pictureData.info.source.replace(/^http(s)?\:/i,"").match(/^([^\/]+)\//i),i&&i[0])))return e(),n;var s=(i[1]?i[1]:i[0]).replace(/(^(\/\/)?www\.|\/)/g,"");if(0>=s.length||-1!==s.indexOf("urturn.com"))return e(),n;var r=a.data.pictureData.info.source;r.match(/^http\:\/\/|^https\:\/\/|^\/\//i)||(r="//"+r),a.options.styles.linkPosition.direction||(a.options.styles.linkPosition.left!==n&&parseInt(a.options.styles.linkPosition.left,10)>u.width()/2||a.options.styles.linkPosition.right!==n&&parseInt(a.options.styles.linkPosition.right,10)<u.width()/2)&&(a.options.styles.linkPosition.direction="left"),a.data.srcLink=t("<a>",{"class":"ut-image-source-link","data-href":r}).appendTo(u),a.options.styles.linkPosition&&"left"===a.options.styles.linkPosition.direction?(a.data.srcLink.html('<span class="ut-image-source-link-text"><span><span>'+s+'</span></span></span><span class="ut-image-source-link-icon icon_link"></span>'),a.data.srcLink.addClass("left")):a.data.srcLink.html('<span class="ut-image-source-link-icon icon_link"></span><span class="ut-image-source-link-text"><span><span>'+s+"</span></span></span>"),a.options.styles.linkPosition.top!==n?a.data.srcLink.css("top",a.options.styles.linkPosition.top):a.options.styles.linkPosition.bottom!==n?a.data.srcLink.css("bottom",a.options.styles.linkPosition.bottom):a.data.srcLink.css("bottom","0"),a.options.styles.linkPosition.left!==n?a.data.srcLink.css("left",a.options.styles.linkPosition.left):a.options.styles.linkPosition.right!==n?a.data.srcLink.css("right",a.options.styles.linkPosition.right):a.data.srcLink.css("left","0"),a.isTouch?(a.data.srcLink.on("click",a._onLinkTouch),u.on("click",a._onImageTouch),u.find(".ut-image-source-link-icon").on("click",a._onIconTouch)):(u.on("mouseenter",a._onImageMouseEnter).on("mouseleave",a._onImageMouseLeave),a.data.srcLink.on("mouseenter",a._onLinkMouseEnter).on("mouseleave",a._onLinkMouseLeave),a.data.srcLink.on("click",a._onLinkMouseClick))}},a.getSize=function(e){var i={};return e.styles.width===n||"auto"===e.styles.width?(i.width=u.width(),e.styles.height===n||"auto"===e.styles.height||e.styles.height===!1&&e.styles.flexRatio!==!0?(i.height=u.height(),a.post&&(0>=i.width||0>=i.height)&&(i.width=t(a.post.node).width(),i.height=t(a.post.node).height())):e.styles.height!==!1&&(a.post&&0>=i.width&&(i.width=t(a.post.node).width()),i.height=parseInt(e.styles.height,10))):e.styles.width!==!1&&(i.width=parseInt(e.styles.width,10),e.styles.height===n||"auto"===e.styles.height||e.styles.height===!1&&e.styles.flexRatio!==!0?i.height=a.post&&0>=u.height()?Math.floor(i.width*t(a.post.node).height()/t(a.post.node).width()):Math.floor(i.width*u.height()/u.width()):e.styles.height!==!1&&(i.height=parseInt(e.styles.height,10))),e.styles.minHeight!==n&&(i.minHeight=parseInt(e.styles.minHeight,10)),e.styles.maxHeight!==n&&(i.maxHeight=parseInt(e.styles.maxHeight,10)),e.styles.minWidth!==n&&(i.minWidth=parseInt(e.styles.minWidth,10)),e.styles.maxWidth!==n&&(i.maxWidth=parseInt(e.styles.maxWidth,10)),i.autoCrop=!!e.styles.autoCrop,i.adaptUI=!0,i.flexRatio=!!e.styles.flexRatio,i},a.onAddButtonClick=function(e){a.focus();var i=t.Event(r.buttonClick);u.trigger(i,"add"),i.isDefaultPrevented()||(a.queryImage(),e.stopPropagation(),e.preventDefault())},a.onEditButtonClick=function(e){var i=t.Event(r.buttonClick);u.trigger(i,"edit"),i.isDefaultPrevented()||(a.focus(),a.recropImage({autoCrop:!1}),e.stopPropagation(),e.preventDefault())},a.onRemoveButtonClick=function(){var e=t.Event(r.buttonClick);u.trigger(e,"remove"),e.isDefaultPrevented()||a.queryImage()},a.queryImage=function(e){var i={},s=t.extend(!0,{},a.options);s=e?t.extend(!0,s,e):s,i.size=a.getSize(s),s.styles.filters&&s.styles.filters.length>0&&(i.applyShaders=t.extend(!0,[],s.styles.filters)),i=t.extend(!0,i,s.dialog),s.i18n.dialogLabel&&(i.dialogLabel=s.i18n.dialogLabel),a.options.styles.expandPreloader&&a.showLoader(),u.trigger(r.dialogOpen),a.post.dialog("image",i,function(e,i){return i?n:t.isEmptyObject(e)||!e.url?(a.hideLoader(),u.trigger(r.dialogCancel),n):(a.onImageAdded(e,!1),n)},function(){a.hideLoader(),u.trigger(r.dialogCancel,arguments)})},a.showLoader=function(){var e=u.find(".ut-image-loading");e&&e.length>0||(e=t('<div class="ut-image-loading"></div>').appendTo(u).html('<div class="icon_spinner"></div>'),u.addClass("loading"))},a.hideLoader=function(){var t=u.find(".ut-image-loading");t&&t.length>0&&t.remove(),u.removeClass("loading")},a.getImageSizeData=function(t,e){return{width:t.width,height:t.height,containerWidth:e.width,containerHeight:e.height,desiredContainerWidth:Math.floor(t.width*(e.height/t.height)),desiredContainerHeight:Math.floor(t.height*(e.width/t.width))}},a.__setImage=function(e){var i;e===n||null===e||e===!1?("background"===a.options.type?(i=u[0].getAttribute("style")||"",i=i.replace(/background\-image\:([^\(;]+\([^\)]+\)+|[^;]*);?/gi,""),u[0].setAttribute("style",i)):"image"===a.options.type?u.find(".ut-image-view").remove():"svg"===a.options.type?u.find(".ut-image-view").remove():"canvas"===a.options.type&&u.find(".ut-image-view").remove(),u.removeClass("ut-image-full")):"background"===a.options.type?(i=u[0].getAttribute("style")||"",i=i.replace(/background\-image\:([^\(;]+\([^\)]+\)+|[^;]*);?/gi,""),u[0].setAttribute("style",i+'background-image:url("'+e.src+'")'),u.addClass("ut-image-full")):"image"===a.options.type?(u.find(".ut-image-view").remove(),t(e).addClass("ut-image-view").appendTo(u),u.addClass("ut-image-full"),a.__coverImage()):"svg"===a.options.type&&(u.find(".ut-image-view").remove(),u.append('<svg class="ut-image-view" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 '+e.width+" "+e.height+'" enable-background="new 0 0 '+e.width+" "+e.height+'" xml:space="preserve" preserveAspectRatio="none">'+"<defs>"+(a.options.styles.svgFilterData?a.options.styles.svgFilterData:"")+"</defs>"+"<image "+(a.options.styles.svgFilterName?'filter="url(#'+a.options.styles.svgFilterName+')" ':"")+'class="ut-image-view-svg-img" preserveAspectRatio="xMidYMid meet" width="'+e.width+'px" height="'+e.height+'px" xlink:href="'+e.src+'"/>'+"</svg>"),u.addClass("ut-image-full"),a.__coverImage())},a.__coverImage=function(){var t=u.find(".ut-image-view");if(!(0>=t.length)){var e=u.width(),i=u.height(),n=Math.max(e/a.data.imageWidth,i/a.data.imageHeight),s=e-a.data.imageWidth*n>>1,r=i-a.data.imageHeight*n>>1;t.width(0|a.data.imageWidth*n).height(0|a.data.imageHeight*n),t.css({left:(0|s)+"px",top:(0|r)+"px"})}},a.onImageAdded=function(e,i){if(e){if(i===!1){var n=t.Event(r.mediaBeforeAdd);if(u.trigger(n,e),n.isDefaultPrevented())return}i||a.showLoader();var s=new Image;s.onload=function(){a.data.image=this,a.data.pictureData=e,a.options.data=e,a.data.imageWidth=s.width,a.data.imageHeight=s.height,a.saveData(),a.__setImage(s),a.hideLoader(),a.updateSourceLink();var t=a.getImageSizeData({width:a.data.imageWidth,height:a.data.imageHeight},{width:u.width(),height:u.height()});t.data=a.data.pictureData,(i===!0||i===!1)&&u.trigger(i?r.mediaCrop:r.mediaAdd,t),a.options.styles.autoResize&&a.resizeContainer(),u.trigger(r.mediaReady,t),a.triggerChangeEvent()},s.onerror=function(){a.hideLoader()},s.src=e.url}},a.resizeContainer=function(){if(!a.options.styles.autoResize||!a.data.imageWidth||!a.data.imageHeight)return a.__coverImage(),n;var t={width:Math.round(u.width()),height:Math.round(u.width()*a.data.imageHeight/a.data.imageWidth),ratio:a.data.imageWidth/a.data.imageHeight};(t.width!==u.width()||t.height!==u.height())&&(u.height(t.height),a.updateButtonsPosition(),a.__coverImage(),u.trigger(r.resize,t))},a.recropImage=function(e){if(a.data.pictureData){var i={};a.options.styles.width===n||"auto"===a.options.styles.width||a.options.styles.width===!1?(i.width=u.width(),a.options.styles.height===n||"auto"===a.options.styles.height||a.options.styles.height===!1?(i.height=u.height(),a.post&&(0>=i.width||0>=i.height)&&(i.width=t(a.post.node).width(),i.height=t(a.post.node).height())):(a.post&&0>=i.width&&(i.width=t(a.post.node).width()),i.height=parseInt(a.options.styles.height,10))):(i.width=parseInt(a.options.styles.width,10),i.height=a.options.styles.height===n||"auto"===a.options.styles.height||a.options.styles.height===!1?a.post&&0>=u.height()?Math.floor(i.width*t(a.post.node).height()/t(a.post.node).width()):Math.floor(i.width*u.height()/u.width()):parseInt(a.options.styles.height,10)),a.options.styles.minHeight!==n&&(i.minHeight=parseInt(a.options.styles.minHeight,10)),a.options.styles.maxHeight!==n&&(i.maxHeight=parseInt(a.options.styles.maxHeight,10)),a.options.styles.minWidth!==n&&(i.minWidth=parseInt(a.options.styles.minWidth,10)),a.options.styles.maxWidth!==n&&(i.maxWidth=parseInt(a.options.styles.maxWidth,10)),i.autoCrop=!!a.options.styles.autoCrop,i.adaptUI=!0,i.flexRatio=!!a.options.styles.flexRatio,i=t.extend(!0,i,a.options.dialog),i=t.extend(!0,i,e),a.options.styles.expandPreloader&&a.showLoader(),i.autoCrop!==!0&&u.trigger(r.dialogOpen),a.post.dialog("crop",{image:a.data.pictureData,size:i},function(e){return t.isEmptyObject(e)||!e.url?(i.autoCrop!==!0&&(a.hideLoader(),u.trigger(r.dialogCancel)),n):(a.onImageAdded(e,!0),n)},function(){a.hideLoader(),u.trigger(r.dialogCancel,arguments)})}},a.removeImage=function(){a.__setImage(null),a.data.pictureData=null,a.options.data=null,a.data.image=null,a.data.imageWidth=null,a.data.imageHeight=null,a.saveData(),u.trigger(r.mediaRemove),a.triggerChangeEvent()},a.saveData=function(){a.options.editable&&a.options.autoSave&&(a.post.storage["utImage_"+a.options.id+"_img"]=a.data.pictureData,a.post.storage["utImage_"+a.options.id+"_ratio"]=a.data.pictureData&&a.data.imageHeight?a.data.imageWidth/a.data.imageHeight:null,a.post.save())},a.firstTimeImageLoad=function(t){var e="utImage_"+a.options.id+"_img";if(a.options.data&&("string"==typeof a.options.data||a.options.data.url))"string"==typeof a.options.data&&(a.options.data={url:a.options.data}),a.onImageAdded(a.options.data);else{var i=a.post.storage[e];i&&i.url?(a.options.data=i,a.onImageAdded(a.options.data)):t&&(a.options.reuse||a.options.styles.reuse)?a.post.collection("parent")&&a.post.collection("parent")[e]&&(a.options.data=a.post.collection("parent")[e],a.onImageAdded(a.options.data)):a.options.data=null}},a.onTouchMove=function(){u.addClass("ut-image-inscroll")},a.onPostScroll=function(t){a.data.scrollTop=parseInt(t.scrollTop,10),a.data.scrollBottom=parseInt(t.scrollBottom,10),a.updateButtonsPosition(),u.removeClass("ut-image-inscroll")},a.updateButtonsPosition=function(){var e=t(a.post.node).height(),i=u.offset();i.height=u.height(),i.bottom=i.top+i.height;var s=Math.max(i.top,a.data.scrollTop)-i.top,r=Math.max(e-i.bottom,a.data.scrollBottom)-(e-i.bottom);if(a.view.addButton&&a.view.addButton.css("top",s+(i.height-s-r)/2+"px"),a.view.ctrlPanel){var o=0;o=a.options.styles.menuPosition.top!==n?s+parseInt(a.options.styles.menuPosition.top,10):a.options.styles.menuPosition.bottom!==n?i.height-r-parseInt(a.options.styles.menuPosition.bottom,10)-a.view.ctrlPanel.height():s+15,a.view.editButton&&(o+a.view.editButton.height()/2>(s+u.height()-r)/2?a.view.editButton.addClass("top"):a.view.editButton.removeClass("top")),a.view.ctrlPanel.css({top:o+"px",bottom:"auto"})}},a.addMediaListener=function(){if(0>s.nextPanelToAddImage&&a.options.styles.listenMedia){var e=function(e){for(var i=t(a.post.node),n=i.find(".ut-image"),r=null,o=0;n.length>o;o++){var u=(o+s.nextPanelToAddImage)%n.length;if(n[u]&&n[u].utImage&&(!n[u].utImage.data.pictureData||!n[u].utImage.data.pictureData.url)){r=n[u];break}}r||(r=n[s.nextPanelToAddImage++%n.length]),r&&r.utImage.onImageAdded.call(r,e,!1)};a.post.on("image",e),s.nextPanelToAddImage=0}},a.getOptionsDifference=function(e,i){var s={newValue:{},oldValue:{}},r={newValue:n,oldValue:n};return t.each(e,function(t){e[t]===i[t]||"object"==typeof e[t]&&"object"==typeof i[t]&&JSON.stringify(e[t])===JSON.stringify(i[t])||(s.newValue[t]=e[t],s.oldValue[t]=i[t])}),t.isEmptyObject(s.newValue)?r:s},a.triggerChangeEvent=function(){var e=a.getOptionsDifference(a.options,a.oldOptions);u.trigger(r.change,[e.newValue,e.oldValue]),a.oldOptions=t.extend(!0,{},a.options)},a.hide=function(){u.css("display","none")},a.show=function(){u.css("display","")},a.focus=function(){a.options.editable&&!u.hasClass("ut-image-focus")&&(a.options.styles.groupMode&&t("body").find(".ut-image.ut-image-in-group").utImage("blur"),u.addClass("ut-image-focus"),u.trigger(r.focus,a.options.id))},a.blur=function(){u.hasClass("ut-image-focus")&&(u.removeClass("ut-image-focus"),a.options.editable&&u.trigger(r.blur,a.options.id))},a.destroy=function(){u.trigger(r.destroy,a.options.id),a.options.editable&&a.options.autoSave&&(a.post.storage["utImage_"+a.options.id+"_img"]=null,a.post.storage["utImage_"+a.options.id+"_ratio"]=null,a.post.save()),u.remove()},a.editable=function(t){a.options.editable=t,a.createElements(),a.options.styles.groupMode||a.focus()},a.listenMedia=function(t){t?(a.options.styles.listenMedia=!0,a.addMediaListener()):(a.options.styles.listenMedia=!1,a.post.off("media"),a.post.off("image"),s.nextPanelToAddImage=-1)};var l=0>=jQuery(".ut-image").length;a.prepareElement(),a.createElements(),(!a.options.styles.groupMode||l)&&a.focus(),a.firstTimeImageLoad(!0),a.initialized=!0,a.post&&(setTimeout(function(){if(u.trigger(r.ready,{id:a.options.id,data:a.options.data||a.post.storage["utImage_"+a.options.id+"_img"]}),a.options.styles.autoResize&&a.post.storage["utImage_"+a.options.id+"_ratio"]){var t={width:u.width(),height:Math.round(u.width()/a.post.storage["utImage_"+a.options.id+"_ratio"]),ratio:a.post.storage["utImage_"+a.options.id+"_ratio"]};t.height!==u.height()&&(u.height(t.height),u.trigger(r.resize,t))}},0),a.addMediaListener()),a.oldOptions=t.extend(!0,{},a.options)}),this},show:function(){return this.each(function(){this.utImage&&this.utImage.show&&this.utImage.show.call(this)}),this},hide:function(){return this.each(function(){this.utImage&&this.utImage.hide&&this.utImage.hide.call(this)}),this},focus:function(){return this.each(function(){this.utImage&&this.utImage.focus&&this.utImage.focus.call(this)}),this},blur:function(){return this.each(function(){this.utImage&&this.utImage.blur&&this.utImage.blur.call(this)}),this},update:function(t){return s.init.call(this,t),this},empty:function(){return this.each(function(){this.utImage&&this.utImage.removeImage&&this.utImage.removeImage.call(this)}),this},remove:function(){return s.destroy.apply(this)},destroy:function(){return this.each(function(){this.utImage&&this.utImage.destroy&&this.utImage.destroy.call(this)}),this},data:function(){var t=null;return this.length>0&&this[0].utImage&&(t=this[0].utImage.data.pictureData),t},image:function(){var t=null;return this.length>0&&this[0].utImage&&(t=this[0].utImage.data.image),t},ratio:function(){var t=0;return this.length>0&&this[0].utImage&&(t=this[0].utImage.data.imageHeight>0?this[0].utImage.data.imageWidth/this[0].utImage.data.imageHeight:0),t},dialog:function(t){return this.length>0&&this[0].utImage&&this[0].utImage.queryImage.call(this[0],t),this},crop:function(t){return this.length>0&&this[0].utImage&&this[0].utImage.recropImage.call(this[0],t),this},editable:function(t){return this.each(function(){this.utImage&&this.utImage.editable&&this.utImage.editable.call(this,t)}),this},listenMedia:function(t){return this.each(function(){this.utImage&&this.utImage.editable&&this.utImage.listenMedia.call(this,t)}),this},showLoader:function(){return this.each(function(){this.utImage&&this.utImage.showLoader&&this.utImage.showLoader.call(this)}),this},hideLoader:function(){return this.each(function(){this.utImage&&this.utImage.hideLoader&&this.utImage.hideLoader.call(this)}),this}};t.fn.utImage=function(e){if("object"!=typeof e&&e){if(s[e])return s[e].apply(this,Array.prototype.slice.call(arguments,1));t.error("Method "+e+" does not exist on $.utImage")}else s.init.apply(this,arguments);return this}})(jQuery,window,document,void 0)}function loadUTAudio(){loadJPlayer(),loadUTAudioEngine(),function(t){"use strict";var e={nextPlayerToAddSound:-1,init:function(i){return this.each(function(){var n=t(this),s={};this.utAudio=s;var r={ready:"utAudio:ready",change:"utAudio:change",buttonClick:"utAudio:buttonClick",mediaAdd:"utAudio:mediaAdd",mediaRemove:"utAudio:mediaRemove",mediaReady:"utAudio:mediaReady",timeUpdate:"utAudio:timeUpdate",play:"utAudio:play",pause:"utAudio:pause",stop:"utAudio:stop",finish:"utAudio:finish",seek:"utAudio:seek",error:"utAudio:error",dialogOpen:"utAudio:dialogOpen",dialogCancel:"utAudio:dialogCancel"},o={data:void 0,skin:"bottom-over",id:!1,ui:{play:!0,progress:!0,time:!0,title:!0,source:!0,artwork:!0},styles:{autoPause:!0,listenMedia:!0,staticLink:!1},editable:!0,i18n:{add:"add sound",change:"",error:"Error occurred",dialogLabel:void 0}};if(!s.post&&UT&&UT.Expression&&UT.Expression.ready&&UT.Expression.ready(function(t){s.post=t,s.initialized&&(setTimeout(function(){s.update(),n.trigger(r.ready,{id:s.options.id,data:s.options.data})},0),s.addMediaListener())}),s.options=t.extend(!0,o,i),s.isTouch="ontouchstart"in window||window.navigator.msMaxTouchPoints>0,s.sckey="T8Yki6U2061gLUkWvLA",s.doNotMakeAnimationFlag=!1,s.eventNS="",s.storageNS="utAudio_",s.stateNS="ut-audio-state",s.editableNS="ut-audio-editable",s.uiNS="ut-audio-ui",s.modeNS="ut-audio-mode",s.skinNS="ut-audio-skin",s.serviceNS="ut-audio-service",s.aspectNS="ut-audio-aspect",s.sizeNS="ut-audio-size",s.touchNS="ut-audio-touch",s.options.ui===!1||s.options.ui===!0){var a=s.options.ui;s.options.ui={play:a,progress:a,time:a,title:a,source:a,artwork:a}}s.addMediaListener=function(){0>e.nextPlayerToAddSound&&s.options.styles.listenMedia&&(s.post.on("sound",function(i){for(var n=t(s.post.node),r=n.find(".ut-audio"),o=null,a=0;r.length>a;a++){var u=(a+e.nextPlayerToAddSound)%r.length;if(r[u]&&r[u].utAudio&&r[u].utAudio.options&&!r[u].utAudio.options.data){o=r[u];break}}o||(o=r[e.nextPlayerToAddSound++%r.length]),o&&(o.utAudio.options.data=i,o.utAudio.update())}),e.nextPlayerToAddSound=0)},s.getOptionsDifference=function(e,i){var n={newValue:{},oldValue:{}},s={newValue:void 0,oldValue:void 0};return t.each(e,function(t){e[t]===i[t]||"object"==typeof e[t]&&"object"==typeof i[t]&&JSON.stringify(e[t])===JSON.stringify(i[t])||(n.newValue[t]=e[t],n.oldValue[t]=i[t])}),t.isEmptyObject(n.newValue)?s:n},s.triggerChangeEvent=function(){var e=s.getOptionsDifference(s.options,s.oldOptions);n.trigger(r.change,e.newValue,e.oldValue),s.oldOptions=t.extend(!0,{},s.options)},s.requestSoundcloudAboutAppData=function(e,i){var n=("https:"===document.location.protocol||/^h ttps/i.test(e)?"https":"http")+"://api.soundcloud.com/resolve?url="+e+"&format=json&consumer_key="+s.sckey+"&callback=?";t.getJSON(n,function(t){i.call(this,t)})},s.requestItunesAboutAppData=function(e,i){var n=!1,r=e.split("i=");
r[1]&&(n=parseInt(r[1].split("&")[0].split("?")[0].split(":")[0],10));var o=function(i,n,s,r){var o=("https:"===document.location.protocol||/^https/i.test(e)?"https":"http")+"://itunes.apple.com/lookup?media=music&country="+n+"&id="+i+"&callback=?";t.getJSON(o,function(t){t&&t.results&&t.results[0]?s.call(this,t.results[0]):r.call(this,n)})},a=function(t){s.setState("error"),console&&console.warn&&console.warn("utAaudio can't find the url="+e+" with id="+n+" in "+t+" itunes music store")},u=function(t){i.call(this,t)};o(n,"US",u,function(t){a(t),o(n,"GB",u,function(t){a(t)})})},s.setState=function(t){s.currents.state=t,s.ui.container.removeClass().addClass([s.uiNS,s.stateNS+"-"+t,s.editableNS+"-"+(s.options.editable&&!s.post.context.player?"true":"false"),s.currents.serviceData?s.serviceNS+"-"+s.currents.serviceData.service_name:"",s.skinNS+"-"+s.options.skin,s.modeNS+"-"+(s.post.context.player?"player":"editor"),s.aspectNS+"-"+s.aspect,s.sizeNS+"-"+s.size,s.touchNS+"-"+(s.isTouch?"true":"false"),"ut-media-placeholder"].join(" "))},s.setPlayPos=function(t,e){if(s.doNotMakeAnimationFlag&&e)return!1;if(0>t||!s.currents.serviceData)return!1;t>s.currents.serviceData.duration&&(t=s.currents.serviceData.duration),s.ui.progress&&s.ui.progress.find("."+s.uiNS+"-progress-playing").css("width",100*(t/s.currents.serviceData.duration)+"%");var i=Math.round(t/1e3);if((t>0||-1===t)&&n.trigger(r.timeUpdate,i),s.currents.serviceData&&s.currents.serviceData.duration){var o='<span class="'+s.uiNS+'-progress-time-current">'+s.formatTime(t)+'</span><span class="'+s.uiNS+'-progress-time-left">'+s.formatTime(s.currents.serviceData.duration)+"</span>";s.ui.time&&s.ui.time.html(o)}else s.ui.time&&s.ui.time.html("");return s.doNotMakeAnimationFlag=!0,setTimeout(function(){s&&(s.doNotMakeAnimationFlag=!1)},1e3),!0},s.formatTime=function(t){var e={h:Math.floor(t/36e5),m:Math.floor(t/6e4%60),s:Math.floor(t/1e3%60)},i=[];return e.h>0&&i.push(e.h),i.push(10>e.m&&e.h>0?"0"+e.m:e.m),i.push(10>e.s?"0"+e.s:e.s),i.join(":")},s.updateUiContent=function(){var t=s.currents.serviceData||{};if(s.ui.artwork&&t.artwork_url){var e=new window.Image;e.onload=function(){s.ui.artwork.css("backgroundImage","url("+t.artwork_url+")")},e.src=t.artwork_url}s.ui.play&&(s.ui.play.html('<span class="icon_spinner '+s.uiNS+'-seek-icon"></span><span class="icon_play '+s.uiNS+'-play-icon"></span><span class="icon_pause '+s.uiNS+'-pause-icon"></span>'),s.ui.play.on("click",function(){"launch"!==s.currents.state&&"finish"!==s.currents.state&&"pause"!==s.currents.state?s.utPause():s.utPlay()}),s.ui.play.on("touchend",function(){}),s.ui.play.on("touchstart",function(){})),s.ui.title&&(s.ui.title.html(t.title||""),s.ui.title.off("click").on("click",function(t){t.stopPropagation()})),s.ui.error&&(s.ui.error.html("<div>"+(s.options.i18n.error||"Error")+"</div>"),s.ui.error.off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),s.setState("launch")})),s.ui.progress&&s.ui.progress.html('<span class="'+s.uiNS+'-progress-playing"></span><span class="'+s.uiNS+'-progress-marker"><span class="'+s.uiNS+'-progress-marker-time"></span><span class="'+s.uiNS+'-progress-time">'),!s.isTouch&&s.ui.progress&&s.ui.progress.off("mouseenter").on("mouseenter",function(){("play"===s.currents.state||"pause"===s.currents.state)&&s.ui.progress.find("."+s.uiNS+"-progress-marker").addClass(s.uiNS+"-progress-marker-visible")}).off("mouseleave").on("mouseleave",function(){s.ui.progress.find("."+s.uiNS+"-progress-marker").removeClass(s.uiNS+"-progress-marker-visible")}).off("mousemove").on("mousemove",function(t){var e=t.pageX-s.ui.progress.offset().left,i=(s.currents.serviceData.duration||0)/s.ui.progress.width()*e;s.ui.progress.find("."+s.uiNS+"-progress-marker").css("left",e+"px"),s.ui.progress.find("."+s.uiNS+"-progress-marker-time").html(s.formatTime(i))});var i=function(t){var e=s.ui.progress.offset(),i=t.pageX?t.pageX:t.originalEvent&&t.originalEvent.pageX?t.originalEvent.pageX:t.originalEvent.touches&&t.originalEvent.touches[0]&&t.originalEvent.touches[0].pageX?t.originalEvent.touches[0].pageX:0,r=(i-parseInt(e.left,10))/s.ui.progress.width();("play"===s.currents.state||"pause"===s.currents.state)&&n.utAudioEngine("seek",r)};s.ui.progress&&s.ui.progress.on("touchstart mousedown",function(t){i(t)}),s.ui.source&&s.ui.source.html('<span class="icon_'+t.service_name+" "+s.uiNS+'-source-icon"></span>').prop("target","_blank").prop("title","listen on "+t.service_name),s.ui.source&&s.ui.source.prop("href",s.options.styles.staticLink?s.options.styles.staticLink:t.source),s.setPlayPos(0)},s.seek=function(t){("play"===s.currents.state||"pause"===s.currents.state)&&n.utAudioEngine("seek",t)},s.getServiceName=function(){if(s.options.data&&s.options.data.service)return s.options.data.service;if(s.options.data&&s.options.data.url&&-1!==s.options.data.url.toLowerCase().indexOf("soundcloud"))return"soundcloud";if(s.options.data&&s.options.data.url&&-1!==s.options.data.url.toLowerCase().indexOf("itunes.apple"))return"itunes";var t="Something went wrong with defining service name that you want to play";return console.error(t,s.options.data),s.setState("error",t),!1},s.formatServiceData=function(t){"soundcloud"===s.getServiceName()?s.currents.serviceData={title:t.title,source:t.permalink_url,artwork_url:(t.artwork_url?t.artwork_url:"").replace(/\-large\./gi,"-t500x500."),duration:t.duration,artist:t.user&&t.user.username?t.user.username:"",trackName:t.title}:"itunes"===s.getServiceName()&&(s.currents.serviceData={title:t.artistName+" - "+t.trackName,source:t.trackViewUrl,artwork_url:(t.artworkUrl100?t.artworkUrl100:"").replace("100x100","600x600"),duration:3e4,artist:t.artistName,trackName:t.trackName}),s.currents.serviceData.service_name=s.getServiceName()},s.requestServiceData=function(t){var e=setTimeout(function(){!s||s.currents&&s.currents.serviceData||s.setState("error","We can't get data to play this track in 15 sec")},15e3);s.options.data.appData?(clearTimeout(e),t(s.options.data.appData)):"soundcloud"===s.getServiceName()?s.requestSoundcloudAboutAppData(s.options.data.url,function(i){clearTimeout(e),t(i)}):"itunes"===s.getServiceName()&&s.requestItunesAboutAppData(s.options.data.url,function(i){clearTimeout(e),t(i)})},s.setupServiceDataIntoPlayer=function(t){var e,i;if("soundcloud"===s.getServiceName()){var o=t.stream_url;i=o+(/\?/.test(o)?"&":"?")+"consumer_key="+s.sckey,e="mp3"}else i=t.previewUrl,e="m4a";s.formatServiceData(t),s.utAudioEngineOptions={duration:s.currents.serviceData&&s.currents.serviceData.duration?s.currents.serviceData.duration:!1,url:i,type:e,onReady:function(){s.setPlayPos(0)},onPlay:function(){s.setState("play"),n.trigger(r.play)},onPause:function(){s.setState("pause"),n.trigger(r.pause)},onStop:function(){s.setState("finish"),n.trigger(r.stop),s.setPlayPos(0)},onFinish:function(){s.setState("finish"),n.trigger(r.finish),s.setPlayPos(0)},onSeekStart:function(){"launch"!==s.currents.state&&"finish"!==s.currents.state&&"empty"!==s.currents.state&&(s.setState("seek"),n.trigger(r.seek))},onSeekEnd:function(){"launch"!==s.currents.state&&"finish"!==s.currents.state&&"empty"!==s.currents.state&&s.setState("play")},onTimeUpdate:function(t){s.setPlayPos(t,!0)},onError:function(t){n.trigger(r.error,t),s.setState("error")}},s.updateUiContent(),n.utAudioEngine?(s.setState("launch"),n.utAudioEngine(s.utAudioEngineOptions),setTimeout(function(){n.trigger(r.mediaReady,s.currents.serviceData),s.triggerChangeEvent()},10)):s.setState("error","Sound Player !!! The library not found.")},s.update=function(){s.currents={id:s.options.id||n.attr("id"),sourceEmbedData:null,state:"loading"},n.addClass("ut-audio");var e=s.post.storage[s.storageNS+s.currents.id];return e&&!s.options.data&&(s.options.data=JSON.parse(e)),"string"==typeof s.options.data&&(s.options.data={url:s.options.data}),s.currents.id?t('[id="'+s.currents.id+'"]').length>1?(console.error("utAudio: Your audio container should have unique id. Now, more then one element have id = ",s.currents.id),void 0):(n.utAudioEngine&&s.utStop(),s.ui={},"relative"!==n.css("position")&&"absolute"!==n.css("position")&&(n.css("position","relative"),console&&console.warn&&console.warn("Your container (id="+s.currents.id+') css position was set as "relative" as requirement of utAudio component. You can set it "absolute" or "relative" in the css to avoid this warning in console')),n.find("."+s.uiNS).remove(),s.ui.container=t('<div class="'+s.uiNS+'"></div>').appendTo(n),s.ui.error=t('<div class="'+s.uiNS+'-error"></div>').appendTo(s.ui.container),s.ui.loading=t('<div class="'+s.uiNS+'-loading"></div>').append('<div class="icon_spinner '+s.uiNS+'-error-icon"></div>').appendTo(s.ui.container),s.options.ui.artwork&&(s.ui.artwork=t('<div class="'+s.uiNS+'-artwork">').appendTo(s.ui.container)),s.options.ui.title&&(s.ui.title=t('<div class="'+s.uiNS+'-title">').appendTo(s.ui.container)),s.options.ui.play&&(s.ui.play=t('<div class="'+s.uiNS+'-play needsclick">').appendTo(s.ui.container)),s.options.ui.progress&&(s.ui.progress=t('<div class="'+s.uiNS+'-progress">').appendTo(s.ui.container)),s.options.ui.time&&(s.ui.time=t('<div class="'+s.uiNS+'-time">').appendTo(s.ui.container)),s.options.ui.source&&(s.ui.source=t('<a class="'+s.uiNS+'-source">').appendTo(s.ui.container)),s.options.editable&&(s.ui.add=t('<a class="'+s.uiNS+'-add icon_sound ut-media-button ut-button"></a>').html(s.options.i18n.add).appendTo(s.ui.container).on("click",s.onAddClick),s.ui.remove=t('<a class="'+s.uiNS+'-remove icon_trash"></a>').html(s.options.i18n.change).appendTo(s.ui.container).on("click",s.onRemoveClick)),s.aspect="square",n.width()>1.25*n.height()&&(s.aspect="horizontal"),1.25*n.width()<n.height()&&(s.aspect="vertical"),s.size="middle",(n.width()>300||n.height()>300)&&(s.size="big"),(200>=n.width()||200>=n.height())&&(s.size="small"),s.post&&s.post.on("pause",s.utPause),s.options.data&&(s.options.data.appData||s.options.data.url)?(s.setState("loading"),s.requestServiceData(s.setupServiceDataIntoPlayer)):s.setState("empty"),void 0):(console.error('utAudio: Please specify an id of your audio container. Example: "<div id="myPlayer1"></div>"'),void 0)},s.onAddClick=function(e){var i=t.Event(r.buttonClick);n.trigger(i,"add"),i.isDefaultPrevented()||(s.utDialog({}),e.stopPropagation(),e.preventDefault())},s.onRemoveClick=function(e){var i=t.Event(r.buttonClick);n.trigger(i,"remove"),i.isDefaultPrevented()||(e.stopPropagation(),e.preventDefault(),s.utDialog({}))},s.utEmpty=function(){s.post.storage[s.storageNS+s.currents.id]=null,s.post.save(),s.options.data=null,s.update()},s.utPlay=function(t){s.post&&s.post.stopAllOther&&s.options.styles.autoPause&&s.post.stopAllOther(),s.setState("seek"),n.utAudioEngine&&n.utAudioEngine("play",t)},s.utPause=function(){n.utAudioEngine&&n.utAudioEngine("pause")},s.utStop=function(){n.utAudioEngine&&n.utAudioEngine("stop"),s.setPlayPos(-1)},s.utVolume=function(t){n.utAudioEngine&&n.utAudioEngine("volume",t)},s.utDestroy=function(){s.post.storage[s.storageNS+s.currents.id]=null,s.post.save(),n.empty(),s=null},s.utUpdate=function(){s.update()},s.utDialog=function(e){var i={inputTypes:["search"],label:s.options.i18n.dialogLabel};t.isEmptyObject(e)||(i=t.extend(!0,i,e)),n.trigger(r.dialogOpen),s.post.dialog("sound",i,function(t){t?(s.options.data=t,s.update(),s.post.storage[s.storageNS+s.currents.id]=JSON.stringify(t),s.post.save(),n.trigger(r.mediaAdd)):n.trigger(r.dialogCancel)},function(){n.trigger(r.dialogCancel)})},s.listenMedia=function(t){t?(s.options.styles.listenMedia=!0,s.addMediaListener()):(s.options.styles.listenMedia=!1,s.post.off("sound"),e.nextPlayerToAddSound=-1)},s.oldOptions=t.extend(!0,{},s.options),s.initialized=!0,s.post&&(setTimeout(function(){s.update(),n.trigger(r.ready,{id:s.options.id,data:s.options.data})},0),s.addMediaListener())}),this},empty:function(){return this.each(function(){this.utAudio&&this.utAudio.utEmpty.call(this)}),this},play:function(t){return this.each(function(){this.utAudio&&this.utAudio.utPlay.call(this,t)}),this},pause:function(){return this.each(function(){this.utAudio&&this.utAudio.utPause.call(this)}),this},stop:function(){return this.each(function(){this.utAudio&&this.utAudio.utStop.call(this)}),this},seek:function(t){return this.each(function(){this.utAudio&&this.utAudio.seek.call(this,t)}),this},volume:function(t){return this.each(function(){this.utAudio&&this.utAudio.utVolume.call(this,t)}),this},update:function(){return this.each(function(){this.utAudio&&this.utAudio.utUpdate&&this.utAudio.utUpdate.call(this)}),this},remove:function(){e.destroy.apply(this,arguments)},destroy:function(){return this.each(function(){this.utAudio&&this.utAudio.utDestroy.call(this)}),this},dialog:function(t){return this.each(function(){this.utAudio&&this.utAudio.utDialog.call(this,t)}),this},listenMedia:function(t){return this.each(function(){this.utAudio&&this.utAudio.listenMedia.call(this,t)}),this}};t.fn.utAudio=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):("object"!=typeof i&&i?t.error("Method "+i+" does not exist on $.utAudio"):e.init.apply(this,arguments),this)}}(window.$||window.Zepto||window.jq)}function loadUTAudioEngine(){(function(t){"use strict";var e={init:function(e){return this.each(function(){var i={path:"http://ds4kgpk6gzsw2.cloudfront.net/expression/lib/urturn-expression-api/0.9.2/components/jquery.ut-audio/swf/",url:null,type:"mp3",duration:!1,startBuffering:window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!1:!0,autoPlay:!1,debug:!1,createPlayerBeforePlaying:!0,onReady:function(){},onPlay:function(){},onPause:function(){},onStop:function(){},onFinish:function(){},onTimeUpdate:function(){},onSeekStart:function(){},onSeekEnd:function(){},onError:function(){}},n=t(this),s={};this.utAudioEngine=s,s.options=t.extend(!0,i,e),s.trackDuration=s.options.duration?s.options.duration:0,s.flagPlayerInitializing=!1,s.flagPlayerInited=!1,s.flagLoadedData=!1,s.flagPlaying=!1,s.globalUtAudioPauseEvent="globalUtAudioPauseEvent",s.uid=Math.ceil(1e9*Math.random())+(new Date).getTime(),s.player=t("<div style='opacity: 0;'></div>").appendTo(n),s.doOnCanPlay=function(){},s.doOnReady=function(){},s.initPlayer=function(){s.player.jPlayer({supplied:s.options.type,swfPath:s.options.path,errorAlerts:!1,warningAlerts:!1,preload:s.options.startBuffering,ready:function(t){s.environment={flash:t.jPlayer.flash.used,html:t.jPlayer.html.used},s.flagPlayerReady=!0,s.loadTrack(s.options.url),s.options.autoPlay&&(s.environment.flash?s.player.jPlayer("play"):s.doOnCanPlay=function(){s.player.jPlayer("play")}),s.options.onReady()},loadeddata:function(){s.flagLoadedData=!0},progress:function(){},canplay:function(){s.flagCanPlay=!0,s.flagPlaying&&setTimeout(function(){s.doOnCanPlay()},100),s.options.onSeekEnd()},canplaythrough:function(){},seeking:function(){s.options.onSeekStart()},seeked:function(){s.options.onSeekEnd()},play:function(){s.flagPlaying=!0,s.options.onPlay()},pause:function(t){s.flagPlaying=!1,0===t.jPlayer.status.currentTime?s.options.onStop():s.options.onPause()},ended:function(){s.flagPlaying=!1,s.options.onFinish()},timeupdate:function(t){var e=t.jPlayer.status;if(s.trackDuration>0){var i=1e3*s.trackDuration>0?e.currentTime/s.trackDuration:0;s.options.onTimeUpdate(1e3*e.currentTime,i,1e3*s.trackDuration)}},error:function(t){s.flagPlaying=!1,s.options.onError("error",t)}}),s.flagPlayerInited=!0},s.play=function(e){s.flagPlayerInited||(s.options.onSeekStart(),s.options.createPlayerBeforePlaying||s.initPlayer()),s.flagPlayerReady&&(s.environment.flash?s.player.jPlayer("play",e):s.flagCanPlay?s.player.jPlayer("play",e):s.player.find("audio")[0].play()),s.flagPlaying=!0,t("body").trigger(s.globalUtAudioPauseEvent,s.uid)},s.pause=function(){s.flagPlaying=!1,s.flagSetMedia&&s.player.jPlayer("pause")},s.stop=function(){s.flagPlaying=!1,s.flagPlayerInited&&s.player.jPlayer("stop")},s.volume=function(t){s.player.jPlayer("volume",t)},s.seek=function(t){var e=s.trackDuration?t*s.trackDuration/1e3:0;setTimeout(function(){s.player.jPlayer("play",e)},100)},s.loadTrack=function(t){"m4a"===s.options.type?s.player.jPlayer("setMedia",{m4a:t}):s.player.jPlayer("setMedia",{mp3:t}),s.flagSetMedia=!0},s.killallhumans=function(){s.player.jPlayer("destroy")},s.options.createPlayerBeforePlaying&&s.initPlayer()}),this},play:function(t){return this.each(function(){this.utAudioEngine&&this.utAudioEngine.play&&this.utAudioEngine.play.call(this,t)}),this},pause:function(){return this.each(function(){this.utAudioEngine&&this.utAudioEngine.pause&&this.utAudioEngine.pause.call(this)}),this},stop:function(){return this.each(function(){this.utAudioEngine&&this.utAudioEngine.stop&&this.utAudioEngine.stop.call(this)}),this},seek:function(t){return this.each(function(){this.utAudioEngine&&this.utAudioEngine.seek&&this.utAudioEngine.seek.call(this,t)}),this},volume:function(t){return this.each(function(){this.utAudioEngine&&this.utAudioEngine.volume&&this.utAudioEngine.volume.call(this,t)}),this},killallhumans:function(t){return this.each(function(){this.utAudioEngine&&this.utAudioEngine.killallhumans&&this.utAudioEngine.killallhumans.call(this,t)}),this}};t.fn.utAudioEngine=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):("object"!=typeof i&&i?t.error("Method "+i+" does not exist on $.utAudioEngine"):e.init.apply(this,arguments),this)}})(window.$||window.Zepto||window.jq)}function loadUTVideo(){loadFroogaLoop(),function(t){"use strict";var e={nextPlayerToAddVideo:-1,init:function(i){return this.each(function(){var n=t(this),s={};this.utVideo=s;var r={ready:"utVideo:ready",buttonClick:"utVideo:buttonClick",mediaAdd:"utVideo:mediaAdd",mediaRemove:"utVideo:mediaRemove",mediaReady:"utVideo:mediaReady",play:"utVideo:play",pause:"utVideo:pause",stop:"utVideo:stop",finish:"utVideo:finish",destroy:"utVideo:destroy",change:"utVideo:change",error:"utVideo:error",dialogOpen:"utVideo:dialogOpen",dialogCancel:"utVideo:dialogCancel"},o={id:!1,data:void 0,editable:!0,ui:{artwork:!0,loading:!0,play:!0,title:!0,source:!0,playing:!0},styles:{skin:"default",autoPause:!0,listenMedia:!0}};if(s.options=t.extend(!0,o,i),s.options.manualMode&&(s.options.editable=!1,s.options.styles.listenMedia=!1,s.post={storage:[],on:function(){},off:function(){},save:function(){},context:{player:!0}}),!s.post&&window.UT&&UT.Expression&&UT.Expression.ready&&UT.Expression.ready(function(t){s.post=t,s.initialized&&(setTimeout(function(){n.trigger(r.ready,{id:s.options.id,data:s.options.data})},0),s.addMediaListener())}),s.isTouch="ontouchstart"in window||window.navigator.msMaxTouchPoints>0,s.isMobileSafari=s.isTouch,s.canplay=!1,s.eventNS="utVideo:",s.storageNS="utVideo_",s.stateNS="ut-video-state",s.editableNS="ut-video-editable",s.uiNS="ut-video-ui",s.modeNS="ut-video-mode",s.skinNS="ut-video-skin",s.serviceNS="ut-video-service",s.aspectNS="ut-video-aspect",s.sizeNS="ut-video-size",s.touchNS="ut-video-touch",s.options.ui===!1||s.options.ui===!0){var a=s.options.ui;s.options.ui={artwork:a,loading:a,play:a,title:a,source:a,playing:a}}s.addMediaListener=function(){0>e.nextPlayerToAddVideo&&s.options.styles.listenMedia&&(s.post.on("video",function(i){for(var n=t(s.post.node),r=n.find(".ut-video"),o=null,a=0;r.length>a;a++){var u=(a+e.nextPlayerToAddVideo)%r.length;if(r[u]&&r[u].utVideo&&r[u].utVideo.options&&!r[u].utVideo.options.data){o=r[u];break}}o||(o=r[e.nextPlayerToAddVideo++%r.length]),o&&(o.utVideo.options.data=i,o.utVideo.update())}),e.nextPlayerToAddVideo=0)},s.getOptionsDifference=function(e,i){var n={newValue:{},oldValue:{}},s={newValue:void 0,oldValue:void 0};return t.each(e,function(t){e[t]===i[t]||"object"==typeof e[t]&&"object"==typeof i[t]&&JSON.stringify(e[t])===JSON.stringify(i[t])||(n.newValue[t]=e[t],n.oldValue[t]=i[t])}),t.isEmptyObject(n.newValue)?s:n},s.triggerChangeEvent=function(){var e=s.getOptionsDifference(s.options,s.oldOptions);n.trigger(r.change,[e.newValue,e.oldValue]),s.oldOptions=t.extend(!0,{},s.options)};var u={debug:!1,defaultWorker:"embedly",getVideoPlayerParameters:function(t,e,i,n){var r={};-1!==t.indexOf("youtu.be/")&&(t="//youtube.com?v="+t.split("youtu.be/")[1]),r.url=t,r.appData=e,r.source=this._getSourceNameByUrl(t),r.options=i,s.autoplay=s.options.autoPlay||!s.isMobileSafari,r.worker=this._sources[r.source]?this._sources[r.source].worker:this.defaultWorker,this._workers[r.worker](r,i,n)},embedVideoByParameters:function(t,e){t.url&&t.status&&(this._sources[t.source]&&this._sources[t.source].embedVideo&&"function"==typeof this._sources[t.source].embedVideo?this._sources[t.source].embedVideo(t,e):s.ui.video.html(t.html))},_sources:{youtube:{urlPart:"youtube.com",worker:"youtube",getVideoId:function(t){var e="";if(t.indexOf("#")>=0&&(t=t.substr(0,t.indexOf("#"))),-1!==t.indexOf("v="))e=t.split("v=")[1].split("&")[0];else if(-1!==t.indexOf("video_ids=")){var i=t.split("video_ids=")[1].split("%2C"),n=-1!==t.indexOf("index=")?t.split("index=")[1].split("&")[0]:0;e=i[n].split("&")[0]}else if(-1!==t.indexOf("v%3D"))e=t.split("v%3D")[1].split("&")[0];else{var s=t.split("/");e=s[s.length-1]}return e},prepareEmbedCode:function(t){return t.id=this.getVideoId(t.url),t},embedVideo:function(e){function i(){window.youtubeApiReady=!0,s.onPlayerReady=function(t){i.addEventListener("onStateChange",s.onPlayerStateChange),s.autoplay&&t.target.playVideo()},s.onPlayerStateChange=function(t){t.data===window.YT.PlayerState.PLAYING&&(n.trigger(r.play),s.setState("play")),t.data===window.YT.PlayerState.ENDED&&(s.utStop(),i.stopVideo(),i.destroy(),i=null,n.trigger(r.finish)),t.data===window.YT.PlayerState.PAUSED&&(n.trigger(r.pause),s.setState("pause"))};var t=s.options.ui.playing?null:{controls:0,showinfo:0},i=new window.YT.Player(a,{height:"100%",width:"100%",videoId:e.id,playerVars:t,events:{onReady:s.onPlayerReady}});o.off("continueAfterPause pauseVideo").on("continueAfterPause",function(){i.playVideo()}).on("pauseVideo",function(){i.pauseVideo()})}var o=s.ui.video.empty(),a="iframe_"+s.currents.id;if(t('<div id="'+a+'" width="100%" height="100%" frameborder="0"></div>').appendTo(o),window.youtubeApiReady)i();else{var u=document.createElement("script");u.src="//www.youtube.com/iframe_api";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(u,l)}window.onYouTubeIframeAPIReady=function(){i()}}},vimeo:{urlPart:"vimeo.com",worker:"vimeo",getVideoId:function(t){return t.indexOf("#")>=0&&(t=t.substr(0,t.indexOf("#"))),t.split("vimeo.com/")[1].split("/")[0].split("&")[0]},prepareEmbedCode:function(t){return t},embedVideo:function(e){function i(t){window.Froogaloop(t).addEvent("play",function(){n.trigger(r.play)}),window.Froogaloop(t).addEvent("finish",function(){n.trigger(r.finish),s.utStop()}),window.Froogaloop(t).addEvent("pause",function(){n.trigger(r.pause),s.setState("pause")}),o.off("continueAfterPause pauseVideo").on("continueAfterPause",function(){window.Froogaloop(t).api("play")}).on("pauseVideo",function(){window.Froogaloop(t).api("pause")})}var o=s.ui.video.empty(),a="iframe_"+s.currents.id,u="//player.vimeo.com/video/"+this.getVideoId(e.url)+(s.autoplay?"?autoplay=1&":"?")+" api=1&player_id="+a,l=t('<iframe  id="'+a+'" allowfullscreen="1" width="100%" height="100%" frameborder="0"></iframe>').appendTo(o)[0];l.src=u,window.Froogaloop(l).addEvent("ready",i)}},dailymotion:{getVideoId:function(t){var e;return t.indexOf("#")>=0&&(t=t.substr(0,t.indexOf("#"))),e=-1!==t.indexOf("request=%2F")?t.split("request=%2F")[1].split("video%2F")[1].split("_")[0]:t.substr(t.lastIndexOf("/")+1,t.length).split("_")[0]},urlPart:"dailymotion.com",worker:"embedly",prepareEmbedCode:function(t){var e=this.getVideoId(t.url);return t.html='<iframe frameborder="0" allowfullscreen="1" width="100%" height="100%" src="//www.dailymotion.com/embed/video/'+e+'"></iframe>',t},embedVideo:function(t){s.ui.video.empty();var e=jQuery("<div>").appendTo(s.ui.video);(function(){var t=document.createElement("script");t.async=!0,t.src=document.location.protocol+"//api.dmcdn.net/all.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)})();var i=this,o=function(){var o="video-ui-"+s.currents.id;e.prop("id",o);var a={video:i.getVideoId(t.url),width:"100%",height:"100%"};s.autoplay&&(a.params={autoplay:1});var u=window.DM.player(o,a);u.addEventListener("apiready",function(t){var i=t;s.autoplay&&n.trigger(r.play),t.target.addEventListener("ended",function(){n.trigger(r.finish),s.utStop()}),t.target.addEventListener("pause",function(){n.trigger(r.pause),s.setState("pause")}),e.off("continueAfterPause pauseVideo").on("continueAfterPause",function(){i.target.play()}).on("pauseVideo",function(){i.target.pause()})})};window.dmAsyncInit=function(){o()}}},metacafe:{urlPart:"metacafe.com",worker:"embedly",prepareEmbedCode:function(t){return t.html=t.html.replace(/<embed/gi,'<embed flashVars="playerVars=showStats='+(t.details?"yes":"no")+"|"+(s.autoplay?"autoPlay=yes|":"")+'"'),t}},myspace:{urlPart:"myspace.com",worker:"embedly",prepareEmbedCode:function(t){return t.html=t.html.replace(/media\/embed.aspx\/(.*?)"/gi,"media/embed.aspx/$1"+(s.autoplay?",ap=1":"")+'"'),t}},veoh:{urlPart:"veoh.com",worker:"embedly",prepareEmbedCode:function(t){return t.html=t.html.replace(/videoAutoPlay=(.*?)&/gi,"videoAutoPlay="+s.autoplay+"&"),t}},liveleak:{urlPart:"liveleak.com",worker:"embedly",prepareEmbedCode:function(t){return t.html=t.html.replace(/<embed/gi,"<embed "+(s.autoplay?'flashvars="autostart=true"':"")),t}},viddler:{urlPart:"viddler.com",worker:"embedly",prepareEmbedCode:function(t){return t.html=t.html.replace(/<embed/gi,"<embed "+(s.autoplay?'flashvars="autoplay=t"':"")),t}},blip:{urlPart:"blip.tv",worker:"embedly",prepareEmbedCode:function(t){return t.html=t.html.replace(/src="(.*?)"/gi,'src="$1?'+(s.autoplay?"autostart=true":"")+'"'),t}},crackle:{urlPart:"crackle.com",worker:"embedly",prepareEmbedCode:function(t){return t.html=t.html.replace(/<embed/gi,"<embed "+(s.autoplay?'flashvars="autoplay=true"':"")),t}},ustream:{urlPart:"ustream.tv",worker:"ustream",prepareEmbedCode:function(t){return t.html=t.html.replace(/autoplay=(.*?)&/gi,"autoplay="+(s.autoplay?"true":"false")+"&"),t}},revver:{urlPart:"revver.com",worker:"noworker",prepareEmbedCode:function(t){var e=this.getVideoId(t.url);return t.html='<embed src="//flash.revver.com/player/1.0/player.swf" flashvars="mediaId='+e+'" width="100%" height="100%" type="application/x-shockwave-flash" ></embed>',t}},google:{urlPart:"video.google.com",worker:"embedly",prepareEmbedCode:function(t){return t.html=t.html.replace(/<embed/gi,'<embed flashvars="playerMode='+t.gskins+(s.autoplay?"&autoPlay=true":"")+(t.loop?"&loop=true":"")),t.html=t.html.replace("&hl=en&fs=true",""),t}},megavideo:{urlPart:"megavideo.com",worker:"noworker",getVideoId:function(t){return t.indexOf("#")>=0&&(t=t.substr(0,t.indexOf("#"))),t.split("v=")[1].split("/")[0].split("&")[0]},prepareEmbedCode:function(t){var e=this.getVideoId(t.url);return t.html='<object wmode="transparent" width="100%" height="100%"><param name="movie" value="//www.megavideo.com/v/'+e+'"/><param name="allowFullScreen" value="true"/><param name="wmode" value="transparent"/><embed wmode="transparent" src="//www.megavideo.com/v/'+e+'" type="application/x-shockwave-flash" allowfullscreen="true" width="100%" height="100%"></embed></object>',t}},joost:{urlPart:"joost.com",worker:"noworker",getVideoId:function(t){return t.indexOf("#")>=0&&(t=t.substr(0,t.indexOf("#"))),-1!==t.indexOf("container_info=")?t.split("container_info=")[1].split("/")[0].split("&")[0]:-1!==t.indexOf("joost.com/")?t.split("joost.com/")[1].split("/")[0].split("&")[0]:void 0},prepareEmbedCode:function(t){var e=this.getVideoId(t.url);return t.html='<object width="100%" height="100%"><param name="movie" value="//www.joost.com/embed/'+e+(s.autoplay?"?autoplay=true":"")+'"></param><param name="allowFullScreen" value="true"/><param name="allowNetworking" value="all"/><param name="allowScriptAccess" value="always"/><embed src="//www.joost.com/embed/'+e+(s.autoplay?"?autoplay=true":"")+'" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" allownetworking="all" width="100%" height="100%"></embed></object>',t}}},_workers:{youtube:function(e,i,n){u.log(e.worker+" started with parameters = ",e);var s=function(t){if(t){e.status=!0,e.duration=t.media$group.yt$duration?parseInt(t.media$group.yt$duration.seconds,10):0,e.duration_formatted=u._timeConverter(e.duration);var i=t.media$group.media$thumbnail,s=null;if(i&&i.length>0)for(var r=0;i.length>r;r++)(!s||s.width<i[r].width)&&(s=i[r]);e.thumbnail_url=s?s.url:!1,e.favicon_url="//www.youtube.com/favicon.ico",e.service_name="YouTube",e.provider_url="//youtube.com",e.html=!1,e.views=t.yt$statistics&&t.yt$statistics.viewCount?t.yt$statistics.viewCount:0,e.title=t.title?t.title.$t:"",e.author=t.author&&t.author[0]&&t.author[0].name&&t.author[0].name.$t?t.author[0].name.$t:"",e=u._paramEmbedCodeNormalizer(u._sources[e.source].prepareEmbedCode(e))}else e.status=!1;u.log(e.worker+" receive parameters = ",e),n(e)};if(e.appData)s(e.appData);else{var r=u._sources[e.source].getVideoId(e.url),o="//gdata.youtube.com/feeds/api/videos/"+r+"?alt=json-in-script&v=2&&callback=?";t.getJSON(o,function(t){s(t.entry)})}},vimeo:function(e,i,n){u.log(e.worker+" started with parameters = ",e);var s=function(t){t?(e.status=!0,e.duration=t.duration,e.duration_formatted=u._timeConverter(e.duration),e.thumbnail_url=t.thumbnail_large||(t.thumbnails&&t.thumbnails.thumbnail&&t.thumbnails.thumbnail[2]?t.thumbnails.thumbnail[2]._content:""),e.favicon_url="//vimeo.com/favicon.ico",e.service_name="Vimeo",e.provider_url="//vimeo.com",e.title=t.title||"",e.html=!1,e.views=t.stats_number_of_plays,e=u._paramEmbedCodeNormalizer(u._sources[e.source].prepareEmbedCode(e)),e.author=t.user_name||""):e.status=!1,u.log(e.worker+" receive parameters = ",e),n(e)};if(e.appData)s(e.appData);else{var r=u._sources[e.source].getVideoId(e.url),o="//vimeo.com/api/v2/video/"+r+".json?&callback=?";t.getJSON(o,function(t){s(t[0])})}},embedly:function(e,i,n){u.log(e.worker+" started with parameters = ",e);var r=encodeURIComponent(e.url),o="//api.embed.ly/1/oembed?key=c6544dc839bd11e088ae4040f9f86dcd&url="+r+(s.autoplay?"":"&autoplay=1")+"&callback=?";t.getJSON(o,function(t){t&&t.html?(e.status=!0,e.duration=!1,e.duration_formatted=!1,e.thumbnail_url=t.thumbnail_url?t.thumbnail_url:"",e.favicon_url=t.favicon_url,"dailymotion"===e.source&&(e.favicon_url="//favicon.yandex.net/favicon/dailymotion.com"),e.service_name=t.provider_name,e.provider_url=t.provider_url,e.html=t.html,e.title=t.title||"",e.views=!1,u._sources[e.source]&&u._sources[e.source].prepareEmbedCode&&(e=u._sources[e.source].prepareEmbedCode(e)),e.author=t.author_name||"",e=u._paramEmbedCodeNormalizer(e)):e.appData&&e.appData.id&&"dailymotion"===e.source?(e.status=!0,e.duration=!1,e.duration_formatted=!1,e.thumbnail_url=e.appData.thumbnail_small_url,e.favicon_url="//favicon.yandex.net/favicon/dailymotion.com",e.service_name="Dailymotion",e.provider_url="http://www.dailymotion.com",e.html='<iframe src="http://www.dailymotion.com/embed/video/'+e.appData.id+(s.autoplay?"":"?autoPlay=1")+'" width="480" height="301" frameborder="0"></iframe>',e.title=e.appData.title||"",e.views=!1,u._sources[e.source]&&u._sources[e.source].prepareEmbedCode&&(e=u._sources[e.source].prepareEmbedCode(e)),e.author=t.author_name||"",e=u._paramEmbedCodeNormalizer(e)):e.status=!1,u.log(e.worker+" receive parameters = ",e),n(e)})},ustream:function(e,i,n){if(u.log(e.worker+" started with parameters = ",e),null===e.url.match(/\/channel\//)){var s=e.url.split("/").pop(),r="//api.ustream.tv/json/video/"+s+"/getInfo?key=CA8D42389DA4266B9489912DE63A817F&callback=?";t.getJSON(r,function(t){t?(e.status=!0,e.duration=t.lengthInSecond,e.duration_formatted=!1,e.thumbnail_url=t.imageUrl.medium||t.imageUrl.small||"",e.title=t.title||"",e.description=t.description||"",e.rating=t.rating||"",e.numberOf=t.numberOf||"",e.html=t.embedTag,u._sources[e.source]&&u._sources[e.source].prepareEmbedCode&&(e=u._sources[e.source].prepareEmbedCode(e)),e=u._paramEmbedCodeNormalizer(e)):e.status=!1,u.log(e.worker+" receive parameters = ",e),n(e)
})}else this.embedly(e,i,n)},m4v:function(t,e,i){var n=t.url,s="m4v",r="Video";if(n.indexOf("#")){var o=n.match(/##webdoc,([^,]*)?,(.*)/gi);o&&o.length>0&&(o=o[0].split(","),r=decodeURIComponent(o[1]),s=decodeURIComponent(o[2])),n=n.substr(n.indexOf("#"))}u.log(t.worker+" started with parameters = ",t),t.status=!0,t.duration=!1,t.duration_formatted=!1,t.thumbnail_url=s,t.favicon_url="",t.service_name="m4v",t.provider_url="m4v",t.html=!1,t.service_name="",t.provider_url=n,t.title=r,t.views=!1,u._sources[t.source]&&u._sources[t.source].prepareEmbedCode&&(t=u._sources[t.source].prepareEmbedCode(t)),t=u._paramEmbedCodeNormalizer(t),u.log(t.worker+" receive parameters = ",t),i(t)},noworker:function(t,e,i){u.log(t.worker+" started with parameters = ",t),t.status=!0,t.duration=!1,t.duration_formatted=!1,t.thumbnail_url=!1,t.favicon_url="",t.service_name="",t.provider_url="",t.html=!1,t.views=!1,u._sources[t.source]&&u._sources[t.source].prepareEmbedCode&&(t=u._sources[t.source].prepareEmbedCode(t)),t=u._paramEmbedCodeNormalizer(t),u.log(t.worker+" receive parameters = ",t),i(t)}},_getSourceNameByUrl:function(t){for(var e in this._sources)if(-1!==t.indexOf(this._sources[e].urlPart))return e;return!1},_paramEmbedCodeNormalizer:function(t){return t.html&&(t.html=t.html.replace(/width="(.*?)"/gi,"width='100%'").replace(/height="(.*?)"/gi,"height='100%'").replace(/width=(.*?)px/gi,"width='100%'").replace(/height=(.*?)px/gi,"height='100%'").replace("><embed","><param name='wmode' value='transparent'/><embed ").replace("<embed","<embed wmode='transparent'").replace("<object","<object wmode='transparent'")),t},_timeConverter:function(t){var e=0,i=0;return e=Math.floor(t/60),i=Math.floor(t-60*e),t=e+":"+(0===i?"00":i>9?i:"0"+i)},log:function(t,e,i,n,s,r,o,a){this.debug&&console.log(" :::::: video.embedProcessor::debug::message --- >",t||"",e||"",i||"",n||"",s||"",r||"",o||"",a||"")}};s.pauseOtherPlayers=function(){s.options.styles.autoPause&&s.post&&s.post.stopAllOther&&s.post.stopAllOther()},s.updatePreViewVideoData=function(){var t=s.currents.sourceEmbedData||{};s.ui.artwork&&s.ui.artwork.css("backgroundImage","url("+t.thumbnail_url+")"),s.ui.play&&(s.ui.play.off("click"),s.ui.play.html('<span class="icon_play '+s.uiNS+'-play-icon"></span>'),s.ui.play.on("click",function(t){s.utPlay(),t.stopPropagation(),t.preventDefault()})),s.ui.title&&(s.ui.title.html(t.title||""),s.ui.title.on("click",function(t){t.stopPropagation()})),s.ui.source&&(s.ui.source.prop("href",t.url),s.ui.source.prop("target","_blank"),s.ui.source.prop("title","Watch on "+t.service_name),s.ui.source.on("click",function(t){t.stopPropagation()}),"youtube"===t.source||"vimeo"===t.source||"dailymotion"===t.source?s.ui.source.html('<span class="icon_'+t.source+" "+s.uiNS+'-source-icon"></span>'):s.ui.source.html(t.favicon_url?'<img src="'+t.favicon_url+'" border=0 />':"")),s.options.autoPlay&&s.utPlay(),s.currents.videoDataReceived=!0},s.processEmbedData=function(t){s._embedVideoByDataTO&&(clearTimeout(s._embedVideoByDataTO),s._embedVideoByDataTO=0),s.currents.sourceEmbedData=t,t.source?(s.canplay=!0,s.isMobileSafari?s.utPlay():(s.updatePreViewVideoData(),s.autoplay||s.setState("launch")),setTimeout(function(){n.trigger(r.mediaReady,t),s.triggerChangeEvent()},10)):(n.trigger(r.error,[!1,"sorry: utVideo can not play this source of video"]),s.setState("error"))},s.utDestroy=function(){s.options.data=null,s.post.storage[s.storageNS+s.currents.id]=null,s.post.save(),n.trigger(r.destroy),s.ui.container.remove(),s=null},s.utChange=function(t){s.options.data=t,s.update()},s.utPlay=function(){s.canplay&&(s.pauseOtherPlayers(),"pause"===s.currents.state?s.ui.video.trigger("continueAfterPause"):(s.setState("video"),u.embedVideoByParameters(s.currents.sourceEmbedData,s.options)))},s.utPause=function(){s.ui.video.trigger("pauseVideo")},s.utStop=function(){s.ui.video.find("iframe").prop("src",""),s.ui.video.empty(),n.trigger(r.stop),s.setState("launch")},s.utUpdate=function(){s.update()},s.utDialog=function(e){var i={inputTypes:["search"],label:s.options.i18n.dialogLabel};t.isEmptyObject(e)||(i=t.extend(!0,i,e)),n.trigger(r.dialogOpen),s.post.dialog("video",i,function(t){t?(s.options.data=t,s.update(),s.post.storage[s.storageNS+s.currents.id]=JSON.stringify(t),s.post.save(),n.trigger(r.mediaAdd)):n.trigger(r.dialogCancel)},function(){n.trigger(r.dialogCancel,arguments)})},s.setState=function(t){s.currents.state=t,s.ui.container.removeClass().addClass([s.uiNS,s.stateNS+"-"+t,s.editableNS+"-"+(s.options.editable&&!s.post.context.player?"true":"false"),s.currents.serviceData?s.serviceNS+"-"+s.currents.serviceData.service_name:"",s.skinNS+"-"+s.options.styles.skin,s.modeNS+"-"+(s.post.context.player?"player":"editor"),s.aspectNS+"-"+s.aspect,s.sizeNS+"-"+s.size,s.touchNS+"-"+(s.isTouch?"true":"false"),"ut-media-placeholder"].join(" "))},s._embedVideoByDataTO=0,s.embedVideoByData=function(t){s._embedVideoByDataTO=0,s.setState("loading"),s._embedVideoByDataTO=setTimeout(function(){!s.currents.videoDataReceived&&"error"!==s.currents.state&&s.options.data&&(n.trigger(r.error,[!1,"sorry: utVideo can not embed this video"]),s.setState("error"))},15e3),u.getVideoPlayerParameters(t.url,t.appData||!1,{},s.processEmbedData)},s.update=function(){s.currents={id:s.options.id||n.attr("id"),videoDataReceived:!1,sourceEmbedData:null,state:null},n.addClass("ut-video");var e=s.post.storage[s.storageNS+s.currents.id];return e&&!s.options.data&&(s.options.data=JSON.parse(e)),"string"==typeof s.options.data&&(s.options.data={url:s.options.data}),s.currents.id?t("#"+s.currents.id).length>1?(console.error("utVideo: Your video container should have unique id. Now, more then one element have id = ",s.currents.id),void 0):(/Firefox[\/\s](\d+\.\d+)/.test(window.navigator.userAgent)&&n.parents().each(function(){("none"!==t(this).css("transform")||"none"!==t(this).css("-moz-transform"))&&(t(this).css({"-moz-transform":"none",transform:"none"}),console&&console.warn&&console.warn("WARNING!!! css property translate for firefox removed in order to avoid problems with FLASH"))}),s.ui={},"relative"!==n.css("position")&&"absolute"!==n.css("position")&&(n.css("position","relative"),console&&console.warn&&console.warn("Your container (id="+s.currents.id+') css position was set as "relative" as requirement of utVideo component. You can set it "absolute" or "relative" in the css to avoid this warning in console')),n.find("."+s.uiNS).remove(),s.ui.container=t('<div class="'+s.uiNS+'"></div>').appendTo(n),s.ui.video=t('<div class="'+s.uiNS+'-video"></div>').appendTo(s.ui.container),s.ui.error=t('<div class="'+s.uiNS+'-error"></div>').append(t("<div>").html(i18n.get("error"))).appendTo(s.ui.container),s.options.ui.artwork&&(s.ui.artwork=t('<div class="'+s.uiNS+'-artwork">').appendTo(s.ui.container)),s.options.ui.loading&&(s.ui.loading=t('<div class="'+s.uiNS+'-loading"></div>').append('<div class="icon_spinner '+s.uiNS+'-loading-icon"></div>').appendTo(s.ui.container)),s.options.ui.play&&(s.ui.play=t('<div class="'+s.uiNS+'-play">').appendTo(s.ui.container)),s.options.ui.title&&(s.ui.title=t('<h1  class="'+s.uiNS+'-title"></h1>').appendTo(s.ui.container)),s.options.ui.source&&(s.ui.source=t('<a   class="'+s.uiNS+'-source"></a>').appendTo(s.ui.container)),s.options.editable&&(s.ui.add=t('<a class="'+s.uiNS+'-add icon_video ut-media-button ut-button"></a>').html(i18n.get("add_video")).appendTo(s.ui.container),s.ui.remove=t('<a class="'+s.uiNS+'-remove icon_trash"></a>').html(i18n.get("edit")).appendTo(s.ui.container),s.ui.add.on("click",s.onAddButtonClick),s.ui.remove.on("click",s.onRemoveButtonClick)),s.aspect="square",n.width()>1.25*n.height()&&(s.aspect="horizontal"),1.25*n.width()<n.height()&&(s.aspect="vertical"),s.size="middle",(n.width()>300||n.height()>300)&&(s.size="big"),(200>=n.width()||200>=n.height())&&(s.size="small"),s.post&&s.post.on("pause",s.utPause),s.options.data&&(s.options.data.appData||s.options.data.url)?s.embedVideoByData(s.options.data):s.setState("empty"),void 0):(console.error('utVideo: Please specify an id of your video container. Example: "<div id="myPlayer1"></div>"'),void 0)},s.onAddButtonClick=function(e){var i=t.Event(r.buttonClick);n.trigger(i,"add"),i.isDefaultPrevented()||(s.utDialog({}),e.stopPropagation(),e.preventDefault())},s.onRemoveButtonClick=function(e){var i=t.Event(r.buttonClick);n.trigger(i,"remove"),i.isDefaultPrevented()||(s.utDialog({}),e.stopPropagation(),e.preventDefault())},s.removeVideo=function(){s.options.data=null,s.post.storage[s.storageNS+s.currents.id]=null,s.post.save(),n.trigger(r.mediaRemove),s.triggerChangeEvent(),s.update()},s.listenMedia=function(t){t?(s.options.styles.listenMedia=!0,s.addMediaListener()):(s.options.styles.listenMedia=!1,s.post.off("video"),e.nextPlayerToAddVideo=-1)},s.oldOptions=t.extend(!0,{},s.options),s.update(),s.initialized=!0,s.post&&(setTimeout(function(){n.trigger(r.ready,{id:s.options.id,data:s.options.data})},0),s.addMediaListener())}),this},play:function(){return this.each(function(){this.utVideo&&this.utVideo.utPlay&&this.utVideo.canplay&&this.utVideo.utPlay.call(this)}),this},pause:function(){return this.each(function(){this.utVideo&&this.utVideo.utPause&&this.utVideo.canplay&&this.utVideo.utPause.call(this)}),this},stop:function(){return this.each(function(){this.utVideo&&this.utVideo.utStop&&this.utVideo.canplay&&this.utVideo.utStop.call(this)}),this},update:function(){return this.each(function(){this.utVideo&&this.utVideo.utUpdate&&this.utVideo.utUpdate.call(this)}),this},destroy:function(){return this.each(function(){this.utVideo&&this.utVideo.utDestroy&&this.utVideo.utDestroy.call(this)}),this},dialog:function(t){return this.each(function(){this.utVideo&&this.utVideo.utDialog&&this.utVideo.utDialog.call(this,t)}),this},data:function(){var t=null;return this.length>0&&this[0].utVideo&&this[0].utVideo.options&&(t=this[0].utVideo.options.data),t},listenMedia:function(t){return this.each(function(){this.utVideo&&this.utVideo.listenMedia.call(this,t)}),this}};t.fn.utVideo=function(i){if("object"!=typeof i&&i){if(e[i])return e[i].apply(this,Array.prototype.slice.call(arguments,1));t.error("Method "+i+" does not exist on $.utVideo")}else e.init.apply(this,arguments);return this}}(window.$||window.Zepto||window.jq)}function loadUTText(){(function(t){"use strict";function e(e,i){function n(){_=t("<div>").addClass("ut-text-content"),i.fixedSize&&576>t(I.node).width()&&M&&L&&(M=Math.round(t(I.node).width()/576*M),L=Math.round(t(I.node).width()/576*L)),P.addClass("ut-text").append(_),s(),i.fixedSize?P.addClass("ut-text-fixed"):P.addClass("ut-text-flex"),j&&j.editor===!0&&(_.attr("contentEditable",!0).attr("spellcheck",!1),i.tabIndex&&_.attr("tabIndex",i.tabIndex),o()),A&&A[T]&&(j&&j.player===!0?_.html(I.autoLink(A[T])):_.text(A[T]),_.attr("data-div-placeholder-content","true")),i.chars&&j&&j.editor===!0&&(b=t("<div>").addClass("ut-text-countdown ut-action-button ut-small-button ut-button"),P.append(b),f()),D&&(x=P.height(),P.css({backgroundSize:"cover"})),i.reuse&&v(),i.fixedSize&&M&&L&&(h(),I.on("resize",function(){h()})),0===p()&&_.html("<br/>"),r("ready")}function s(){k=fontdetect.whichFont(_[0]),C=fontdetect.isFontLoaded(k),C||(P.append(jQuery("<div/>").css("fontFamily",k).addClass("ut-font-detect")),fontdetect.onFontLoaded(k,function(){C=!0,t(".ut-font-detect",P).remove()},function(){C=!1,t(".ut-font-detect",P).remove()},{msInterval:100,msTimeout:1e4}))}function r(t,e){P.trigger(E+":"+t,e)}function o(){_.attr("data-placeholder",i.placeholder),B?_.on("touchstart",function(){I.dialog("text",{value:g(),max:i.chars||null,multiline:!0},function(t){_.html(t).trigger("input"),r("mobileInput",t),t.length>=1&&_.attr("data-div-placeholder-content","true"),c()})}):_.on("paste keypress keydown input",function(e){j&&j.editor===!0&&(_[0].textContent&&p()>=1?_.attr("data-div-placeholder-content","true"):_.removeAttr("data-div-placeholder-content")),"paste"===e.type&&m(),13===e.which&&N&&e.preventDefault();var n=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145];-1===t.inArray(e.keyCode,n)&&i.chars&&p()>=i.chars&&!e.metaKey&&(e.preventDefault(),e.stopPropagation()),w&&clearTimeout(w),w=setTimeout(c,50)})}function a(){i.fixedSize?h():D?u():l(),i.chars&&j&&j.editor===!0&&f()}function u(){_.outerHeight()+10>x?P.height(_.outerHeight()+10):P.height(x)}function l(){I.size({height:t(".webdoc_expression_wrapper").outerHeight()})}function h(){P.textfill({debug:!1,maxFontPixels:M,minFontPixels:L,innerTag:".ut-text-content"})}function c(){a(),d()}function d(){A[T]=g(),I.save(),r("save",g())}function p(){return _.text().replace(/<[^>]*>/g,"").length}function f(){var t=i.chars-p();0===t?b.addClass("ut-text-countdown-max"):b.removeClass("ut-text-countdown-max"),b.text(t+" / "+i.chars)}function g(){var e=_.html().replace(/<br\s*\/?>/gm,"\n");return e=e.replace(/<div>/gi,"\n").replace(/<\/div>/gi,""),e=e.replace(/(<([^>]+)>)/gi,""),t.trim(e.replace(/&nbsp;/gi,""))}function m(){setTimeout(function(){i.chars&&p()>=i.chars?_.text(g().substr(0,i.chars)):_.text(g())},50)}function v(){!A[T]&&I.collection("parent")&&I.collection("parent")[T]&&(_.html(I.collection("parent")[T]),_.attr("data-div-placeholder-content","true"),d())}function y(){P.each(function(){P.trigger("destroy"),P.removeData("utText").removeClass("ut-text ut-text-editable ut-text-placeholder").remove(".ut-text-content"),_.off()})}i=t.extend({},t.fn.utText.defaults,i);var _,w,b,x,k,C,S=e,P=t(S),E="utText",T=E+S.id,I=i.post||{},A=I.storage,j=I.context,M=parseInt(i.maxFontSize,10)||null,L=parseInt(i.minFontSize,10)||null,D=P.data("utImage"),B=/(urturn)/i.test(navigator.userAgent),N=/(msie)/i.test(navigator.userAgent);return n(),{options:i,destroy:y,sizeChange:a,adaptFontSize:h,getText:g,saveText:d}}t.fn.utText=function(i){if("string"==typeof arguments[0]){var n,s=arguments[0],r=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!t.data(this,"utText")||"function"!=typeof t.data(this,"utText")[s])throw Error("Method "+s+" does not exist on jQuery.utText");n=t.data(this,"utText")[s].apply(this,r)}),void 0!==n?n:this}return"object"!=typeof i&&i?void 0:this.each(function(){t.data(this,"utText")||(i&&i.post||!UT||!UT.Expression||!UT.Expression.ready||UT.Expression.ready(function(t){i||(i={}),i.post=t}),t.data(this,"utText",new e(this,i)))})},t.expr[":"].utText=function(e){return t(e).hasClass("ut-text")},t.fn.utText.defaults={placeholder:"Enter some text",fixedSize:!1,chars:!1,maxFontSize:!1,minFontSize:!1,reuse:!1,tabIndex:!1}})(jQuery)}function loadUTSticker(){(function(t,e,i,n,s){"use strict";var r={init:function(r){return this.each(function(){if(this.utSticker)return"object"==typeof r&&(this.utSticker.options=e.extend(!0,this.utSticker.options,r)),this.utSticker.update&&this.utSticker.update.call(this,r&&r.styles&&r.styles.pos?r.styles.pos:null),s;var o={ready:"utSticker:ready",change:"utSticker:change",rotate:"utSticker:rotate",resize:"utSticker:resize",move:"utSticker:move",buttonClick:"utSticker:buttonClick",destroy:"utSticker:destroy",click:"utSticker:click",dblClick:"utSticker:dblClick",focus:"utSticker:focus",blur:"utSticker:blur"},a={id:"",editable:!0,ui:{edit:!1,resize:null,rotate:null,remove:!0},i18n:{dialogLabel:s},styles:{proportional:!0,autoflip:!0,useBounds:!0,pos:{width:s,ratio:s,height:s,cx:s,cy:s,left:s,right:s,top:s,bottom:s,rotation:0,zIndex:s},parentIndent:{top:null,left:null,bottom:null,right:null},selfOutdent:{top:"0%",left:"0%",bottom:"0%",right:"0%"},sizeLimits:{minWidth:"10%",minHeight:"10%",maxWidth:"90%",maxHeight:"90%"},rotationLimits:{min:"-180",max:"180"},rotationSnap:{base:90,precision:3},topOnFocus:!0,preventAutoRemove:!1,preventEventsBubble:!0}},u={};this.utSticker=u,u.initialized=!1;var l=this.getBoundingClientRect(),h=parseInt(l.width,10),c=parseInt(l.height,10),d=this.parentNode,p=e(this),f=e("<div>").appendTo(d);p.detach(),f.append(p),f[0].utSticker=this.utSticker,r&&r.style&&!r.styles&&console.warn("utSticker :: The 'styles' parameter not found, but 'style' present."),u.options=e.extend(!0,a,r),u.isTouch="ontouchstart"in i||i.navigator.msMaxTouchPoints>0,u.isMSIE=-1!==i.navigator.userAgent.indexOf("MSIE"),u.data={editable:!0,parentWidth:0,parentHeight:0,curBounds:{},movable:!1,rotatable:!1,resizable:!1,minAngle:-Math.PI,maxAngle:Math.PI,parentIndent:{},minWidth:0,minHeight:0,maxWidth:1e4,maxHeight:1e4,selfOutdent:{}},u.view={},u.pos={},u.post=null,u.isEditMode=!1,i.utStickerLastZIndex===s&&(i.utStickerLastZIndex=10);var g=i.getComputedStyle(n.body,null),m="transform";g.webkitTransform!==s?m="webkitTransform":g.MozTransform!==s?m="MozTransform":g.msTransform!==s?m="msTransform":g.OTransform!==s&&(m="OTransform");var v=u.isTouch?"touchstart":"mousedown",y=u.isTouch?"touchmove":"mousemove",_=u.isTouch?"touchend touchcancel":"mouseup mouseleave";t.Expression.ready(function(t){u.post=t,u.isEditMode=t.context.editor,u.options.editable=u.isEditMode?u.options.editable:!1,u.initialized&&setTimeout(function(){u.post.storage["utSticker_"+u.options.id+"_pos"]||u._savePosition(),p.trigger(o.ready,{id:u.options.id,data:u._getCurrentData()})},0)}),u._updateParentSize=function(){var t=i.getComputedStyle(d,null);"static"===t.position&&(d.style.position="relative");var e=!1,n=parseInt(t.width,10),s=parseInt(t.height,10);return n&&n>0&&n!==u.data.parentWidth&&(u.data.parentWidth=n,e=!0),s&&s>0&&s!==u.data.parentHeight&&(u.data.parentHeight=s,e=!0),(0===n||0===s)&&console.warn("utSticker :: parent size has zero value"),e},u.catchEvents=function(t,i){var n={},s={},r=0,o=e("body"),a=function(e){r=0;var a=e.pageX?e.pageX:e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]?e.originalEvent.touches[0].pageX:0,c=e.pageY?e.pageY:e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]?e.originalEvent.touches[0].pageY:0;n={x:a,y:c},s={x:a,y:c},o.on(y,h),o.on(_,l),i&&i.call(t,"down",{x:a,y:c,offStart:{x:0,y:0},offLast:{x:0,y:0}})===!1&&(e.stopPropagation(),u.options.styles.preventEventsBubble&&e.preventDefault())},l=function(e){var a=e.pageX?e.pageX:e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]?e.originalEvent.touches[0].pageX:0,c=e.pageY?e.pageY:e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]?e.originalEvent.touches[0].pageY:0;i&&i.call(t,"up",{x:a,y:c,offStart:{x:a-n.x,y:c-n.y},offLast:{x:a-s.x,y:c-s.y}})===!1&&(e.stopPropagation(),u.options.styles.preventEventsBubble&&e.preventDefault()),3>r&&u.options.styles.preventEventsBubble&&u.isTouch&&t.trigger("click"),s={x:a,y:c},o.off(y,h),o.off(_,l)},h=function(e){var o=e.pageX?e.pageX:e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]?e.originalEvent.touches[0].pageX:0,a=e.pageY?e.pageY:e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]?e.originalEvent.touches[0].pageY:0;r+=Math.abs(o-s.x)+Math.abs(a-s.y),i&&i.call(t,"move",{x:o,y:a,offStart:{x:o-n.x,y:a-n.y},offLast:{x:o-s.x,y:a-s.y}})===!1&&(e.stopPropagation(),u.options.styles.preventEventsBubble&&e.preventDefault()),s={x:o,y:a}};t.on(v,a)},u.createButtons=function(){f.find(".ut-sticker-button").remove(),u.view.remove=null,u.view.edit=null,u.view.rotate=null,u.view.resize=null,u.options.ui.remove&&(u.view.remove=e("<a>").addClass("ut-sticker-button ut-sticker-button-remove icon_delete").attr("data-bkey","remove").attr("title",i18n.get("remove")).appendTo(f),u.view.remove.on(v,u.onButtonDown),u.view.remove.on(_,u.onButtonUp),u.view.remove.on("click",u.onButtonClick)),u.options.ui.edit&&(u.view.edit=e("<a>").addClass("ut-sticker-button ut-sticker-button-edit icon_edit").attr("data-bkey","edit").attr("title",i18n.get("edit")).appendTo(f),u.view.edit.on(v,u.onButtonDown),u.view.edit.on(_,u.onButtonUp),u.view.edit.on("click",u.onButtonClick)),u.options.ui.rotate=u.data.rotatable?u.options.ui.rotate:!1,u.options.ui.resize=u.data.resizable?u.options.ui.resize:!1,null===u.options.ui.rotate&&(u.options.ui.rotate=u.options.styles.proportional?!u.options.ui.resize:!0),null===u.options.ui.resize&&(u.options.ui.resize=u.options.styles.proportional?!u.options.ui.rotate:!0),u.options.ui.rotate&&(u.view.rotate=e("<a>").addClass("ut-sticker-button ut-sticker-button-rotate icon_fullscreen").attr("title",i18n.get("rotate")).appendTo(f),u.catchEvents(u.view.rotate,u.onElementRotate)),u.options.ui.resize&&(u.view.resize=e("<a>").addClass("ut-sticker-button ut-sticker-button-resize icon_fullscreen").attr("title",i18n.get("resize")).appendTo(f),u.catchEvents(u.view.resize,u.onElementResize)),u.view.rotate&&!u.view.resize||!u.view.rotate&&u.view.resize?f.addClass("ut-sticker-one-scale-size-button"):f.removeClass("ut-sticker-one-scale-size-button");for(var t in u.options.ui)if(u.options.ui[t]){if("edit"===t||"resize"===t||"rotate"===t||"remove"===t)continue;var i=u.options.ui[t],n=e("<a>").addClass("ut-sticker-button ut-sticker-button-custom "+i);i18n.get(t)&&n.attr("title",i18n.get(t)),n.appendTo(f),n.attr("data-bkey",t),n.on(v,u.onButtonDown),n.on(_,u.onButtonUp),n.on("click",u.onButtonClick)}},u.preventButtonEvents=null,u.onButtonDown=function(t){u.preventButtonEvents=e(this).attr("data-bkey"),t.stopPropagation()},u.onButtonUp=function(t){return u.preventButtonEvents&&u.preventButtonEvents===e(this).attr("data-bkey")?(u.preventButtonEvents=null,"mouseup"===t.type&&t.stopPropagation(),s):(u.preventButtonEvents=null,s)},u.onButtonClick=function(t){var i=e(this).attr("data-bkey"),n=!1,s=!1;if("remove"!==i||u.options.styles.preventAutoRemove){var r=e.Event(o.buttonClick);p.trigger(r,i),n=r.isPropagationStopped(),s=r.isDefaultPrevented()}else u.removeElement();(n||u.options.styles.preventEventsBubble&&u.isEditMode&&u.data.editable)&&t.stopPropagation(),(s||u.options.styles.preventEventsBubble&&u.isEditMode&&u.data.editable)&&t.preventDefault()},u.prepareElement=function(){f.addClass("ut-sticker"),u.isMSIE&&f.addClass("msie"),f[0].style.position="absolute",p.addClass("ut-sticker-content"),""===p[0].getAttribute("id")&&u.options.id&&(u.options.id="sticker-"+t.uuid(),console.warn("utSticker :: element ID not found, generating new:",u.options.id)),""!==u.options.id?p[0].setAttribute("id",u.options.id):u.options.id=p[0].getAttribute("id"),p[0].style.width="100%",p[0].style.height="100%",u.isEditMode&&f.addClass("ut-sticker-edit"),u.catchEvents(f,u.onElementMouse),f.on("click",u.onElementClick),e("body").on(v,u.onBodyClick)},u.parseSizeValue=function(t,e,i){var n;return n=(""+t).match(/([+\-]?[0-9]*(\.[0-9]+)?)(px|%)?/i),!n||n[3]!==s&&null!==n[3]&&"px"!==n[3]?n&&"%"===n[3]?parseFloat(n[1])/100*e:i!==s?i:null:parseFloat(n[1])},u.preparePosition=function(){u.pos=u.post.storage["utSticker_"+u.options.id+"_pos"]||{};var t=0,e=0;u.pos.width!==s||u.pos.ratio!==s||u.options.styles.pos.width!==s&&null!==u.options.styles.pos.width&&u.options.styles.pos.width!==!1&&"auto"!==u.options.styles.pos.width||u.options.styles.pos.ratio!==s&&null!==u.options.styles.pos.ratio&&u.options.styles.pos.ratio!==!1&&"auto"!==u.options.styles.pos.ratio||u.options.styles.pos.height!==s&&null!==u.options.styles.pos.height&&u.options.styles.pos.height!==!1&&"auto"!==u.options.styles.pos.height||!h||!c?(u.pos.width===s?(t=u.parseSizeValue(u.options.styles.pos.width,u.data.parentWidth,.3*u.data.parentWidth),u.pos.width=t/u.data.parentWidth):t=u.pos.width*u.data.parentWidth,u.pos.ratio===s&&("auto"===u.options.styles.pos.ratio||"auto"===u.options.styles.pos.height?u.pos.ratio=h/c:u.options.styles.pos.ratio!==s&&null!==u.options.styles.pos.ratio&&u.options.styles.pos.ratio!==!1&&"auto"!==u.options.styles.pos.ratio?(u.pos.ratio=parseFloat(u.options.styles.pos.ratio),e=t/u.pos.ratio):u.options.styles.pos.height!==s&&null!==u.options.styles.pos.height&&u.options.styles.pos.height!==!1&&"auto"!==u.options.styles.pos.height?(e=u.parseSizeValue(u.options.styles.pos.height,u.data.parentHeight,.3*u.data.parentHeight),u.pos.ratio=t/e):(e=t,u.pos.ratio=t/e))):(t=h,e=c,u.pos.width=t/u.data.parentWidth,u.pos.ratio=t/e),u.pos.left===s&&(u.options.styles.pos.cx!==s&&null!==u.options.styles.pos.cx&&u.options.styles.pos.cx!==!1?u.pos.left=u.parseSizeValue(u.options.styles.pos.cx,u.data.parentWidth,.5*u.data.parentWidth):u.options.styles.pos.left!==s&&null!==u.options.styles.pos.left&&u.options.styles.pos.left!==!1?(u.pos.left=u.parseSizeValue(u.options.styles.pos.left,u.data.parentWidth,.5*u.data.parentWidth),u.pos.left+=t/2):u.options.styles.pos.right!==s&&null!==u.options.styles.pos.right&&u.options.styles.pos.right!==!1?(u.pos.left=u.data.parentWidth-u.parseSizeValue(u.options.styles.pos.right,u.data.parentWidth,.5*u.data.parentWidth),u.pos.left-=t/2):u.pos.left=.5*u.data.parentWidth,u.pos.left=u.pos.left/u.data.parentWidth),u.pos.top===s&&(u.options.styles.pos.cy!==s&&null!==u.options.styles.pos.cy&&u.options.styles.pos.cy!==!1?u.pos.top=u.parseSizeValue(u.options.styles.pos.cy,u.data.parentHeight,.5*u.data.parentHeight):u.options.styles.pos.top!==s&&null!==u.options.styles.pos.top&&u.options.styles.pos.top!==!1?(u.pos.top=u.parseSizeValue(u.options.styles.pos.top,u.data.parentHeight,.5*u.data.parentHeight),u.pos.top+=e/2):u.options.styles.pos.bottom!==s&&null!==u.options.styles.pos.bottom&&u.options.styles.pos.bottom!==!1?(u.pos.top=u.data.parentHeight-u.parseSizeValue(u.options.styles.pos.bottom,u.data.parentHeight,.5*u.data.parentHeight),u.pos.top-=e/2):u.pos.top=.5*u.data.parentHeight,u.pos.top=u.pos.top/u.data.parentHeight),u.pos.angle===s&&(u.pos.angle=u.options.styles.pos.rotation===s?0:parseFloat(u.options.styles.pos.rotation)/180*Math.PI),u.pos.zIndex===s&&(u.pos.zIndex=u.options.styles.pos.zIndex===s?i.utStickerLastZIndex++:parseInt(u.options.styles.pos.zIndex,10)),i.utStickerLastZIndex<=u.pos.zIndex&&(i.utStickerLastZIndex=u.pos.zIndex+1)},u.applyNewPosition=function(t){var e,i,n=!1;return t.width!==s&&null!==t.width&&t.width!==!1&&"auto"!==t.width?(e=u.parseSizeValue(t.width,u.data.parentWidth,.3*u.data.parentWidth),u.pos.width=e/u.data.parentWidth,n=!0):e=u.pos.width*u.data.parentWidth,t.ratio!==s&&null!==t.ratio&&t.ratio!==!1&&"auto"!==t.ratio?(u.pos.ratio=parseFloat(t.ratio),i=e/u.pos.ratio,n=!0):t.height!==s&&null!==t.height&&t.height!==!1&&"auto"!==t.height?(i=u.parseSizeValue(t.height,u.data.parentHeight,.3*u.data.parentHeight),u.pos.ratio=e/i,n=!0):i=e*u.data.parentWidth,t.cx!==s&&null!==t.cx&&t.cx!==!1?(u.pos.left=u.parseSizeValue(t.cx,u.data.parentWidth,.5*u.data.parentWidth),u.pos.left=u.pos.left/u.data.parentWidth,n=!0):t.left!==s&&null!==t.left&&t.left!==!1?(u.pos.left=u.parseSizeValue(t.left,u.data.parentWidth,.5*u.data.parentWidth),u.pos.left+=e/2,u.pos.left=u.pos.left/u.data.parentWidth,n=!0):t.right!==s&&null!==t.right&&t.right!==!1&&(u.pos.left=u.data.parentWidth-u.parseSizeValue(t.right,u.data.parentWidth,.5*u.data.parentWidth),u.pos.left-=e/2,u.pos.left=u.pos.left/u.data.parentWidth,n=!0),t.cy!==s&&null!==t.cy&&t.cy!==!1?(u.pos.top=u.parseSizeValue(t.cy,u.data.parentHeight,.5*u.data.parentHeight),u.pos.top=u.pos.top/u.data.parentHeight,n=!0):t.top!==s&&null!==t.top&&t.top!==!1?(u.pos.top=u.parseSizeValue(t.top,u.data.parentHeight,.5*u.data.parentHeight),u.pos.top+=i/2,u.pos.top=u.pos.top/u.data.parentHeight,n=!0):t.bottom!==s&&null!==t.bottom&&t.bottom!==!1&&(u.pos.top=u.data.parentHeight-u.parseSizeValue(t.bottom,u.data.parentHeight,.5*u.data.parentHeight),u.pos.top-=i/2,u.pos.top=u.pos.top/u.data.parentHeight,n=!0),t.rotation!==s&&null!==t.rotation&&t.rotation!==!1&&(u.pos.angle=parseFloat(t.rotation)/180*Math.PI,n=!0),t.zIndex!==s&&null!==t.zIndex&&t.zIndex!==!1&&(u.pos.zIndex=parseInt(t.zIndex,10),n=!0),n},u.removeElement=function(){p.trigger(o.destroy,u.options.id),f.remove(),u.post&&(u.post.storage["utSticker_"+u.options.id+"_pos"]=null,u.post.save())},u.updateAngleForSnap=function(t){var e=parseFloat(u.options.styles.rotationSnap.base)/180*Math.PI,i=parseFloat(u.options.styles.rotationSnap.precision)/180*Math.PI,n=u.pos.angle-Math.round(u.pos.angle/e)*e;return i>Math.abs(n)?Math.round(u.pos.angle/e)*e:t},u.updateAngle=function(){var t=u.updateAngleForSnap(u.pos.angle),e="rotateZ("+t+"rad) rotateX(0)";u.isMSIE&&(e="rotate("+t+"rad)");var i=f[0];i.style[m]=e,u.updateButtonsAngle(),u.options.styles.autoflip&&u.updateContentAngle()},u.updateContentAngle=function(){var t=u.updateAngleForSnap(u.pos.angle);t=(t/(2*Math.PI)-Math.floor(t/(2*Math.PI)))*2*Math.PI,Math.abs(t)>Math.PI/2&&Math.abs(t)<3*Math.PI/2?p[0].classList?p[0].classList.add("ut-sticker-flip"):p.addClass("ut-sticker-flip"):p[0].classList?p[0].classList.remove("ut-sticker-flip"):p.removeClass("ut-sticker-flip")},u.updateButtonsAngle=function(){var t=u.updateAngleForSnap(u.pos.angle);t*=-1;var e,i,n,s=f[0].getElementsByClassName("ut-sticker-button");if(s&&s.length>0)for(n="rotateZ("+t+"rad) rotateX(0)",u.isMSIE&&(n="rotate("+t+"rad)"),e=0;s.length>e;++e)i=s[e],i.style[m]=n},u.updateSize=function(){f[0].style.width=Math.round(u.pos.width*u.data.parentWidth)+"px",f[0].style.height=Math.round(u.pos.width/u.pos.ratio*u.data.parentWidth)+"px",f[0].style.marginLeft=-Math.round(u.pos.width*u.data.parentWidth/2)+"px",f[0].style.marginTop=-Math.round(u.pos.width/u.pos.ratio*u.data.parentWidth/2)+"px"},u.updatePosition=function(){f[0].style.left=Math.round(u.pos.left*u.data.parentWidth)+"px",f[0].style.top=Math.round(u.pos.top*u.data.parentHeight)+"px",f[0].style.zIndex=u.pos.zIndex},u.getBounds=function(t,e,i){var n=t.jquery?t[0]:t,s=n.getBoundingClientRect();if(!s)return{left:0,top:0,right:0,bottom:0,width:0,height:0};if(i){i=i.jquery?i[0]:i;var r=i.getBoundingClientRect();return{left:s.left-r.left,top:s.top-r.top,right:s.left-r.left+s.width,bottom:s.top-r.top+s.height,width:s.width,height:s.height}}return{left:s.left,top:s.top,right:s.left+s.width,bottom:s.top+s.height,width:s.width,height:s.height}},u._updateBoundsInfo=function(){u.options.styles.useBounds&&(u.data.curBounds=u.getBounds(f,!1,d))},u.validateSizeInBounds=function(t){var e=Math.min(u.data.parentWidth/u.data.curBounds.width,u.data.parentHeight/u.data.curBounds.height);return 1>e?(t!==!1&&(u.pos.width*=e),!0):!1},u.validateSize=function(){var t=u.validateSizeInBounds(),e=u.pos.width*u.data.parentWidth,i=e/u.pos.ratio,n=Math.min(Math.max(u.data.minWidth,e),u.data.maxWidth),s=Math.min(Math.max(u.data.minHeight,i),u.data.maxHeight);return n===e&&s===i?t||!1:(u.options.styles.proportional?(s>n/u.pos.ratio&&(n=s*u.pos.ratio),u.pos.width=n/u.data.parentWidth):(u.pos.ratio=n/s,u.pos.width=n/u.data.parentWidth),!0)},u.validatePosition=function(){var t=!1;if(!u.options.styles.useBounds){var e=u.pos.width*u.data.parentWidth,i=e/u.pos.ratio,n=u.pos.left*u.data.parentWidth,s=u.pos.top*u.data.parentHeight;return null!==u.data.parentIndent.left&&u.data.parentIndent.left-u.data.selfOutdent.left>n-e/2&&(n=u.data.parentIndent.left-u.data.selfOutdent.left+e/2,t=!0),null!==u.data.parentIndent.top&&u.data.parentIndent.top-u.data.selfOutdent.top>s-i/2&&(s=u.data.parentIndent.top-u.data.selfOutdent.top+i/2,t=!0),null!==u.data.parentIndent.right&&n+e/2>u.data.parentWidth-u.data.parentIndent.right+u.data.selfOutdent.right&&(n=u.data.parentWidth-u.data.parentIndent.right+u.data.selfOutdent.right-e/2,t=!0),null!==u.data.parentIndent.bottom&&s+i/2>u.data.parentHeight-u.data.parentIndent.bottom+u.data.selfOutdent.bottom&&(s=u.data.parentHeight-u.data.parentIndent.bottom+u.data.selfOutdent.bottom-i/2,t=!0),t&&(u.pos.left=n/u.data.parentWidth,u.pos.top=s/u.data.parentHeight),t}return null!==u.data.parentIndent.left&&u.data.curBounds.left<u.data.parentIndent.left-u.data.selfOutdent.left&&(u.pos.left+=(u.data.parentIndent.left-u.data.selfOutdent.left-u.data.curBounds.left)/u.data.parentWidth,t=!0),null!==u.data.parentIndent.top&&u.data.curBounds.top<u.data.parentIndent.top-u.data.selfOutdent.top&&(u.pos.top+=(u.data.parentIndent.top-u.data.selfOutdent.top-u.data.curBounds.top)/u.data.parentHeight,t=!0),null!==u.data.parentIndent.right&&u.data.curBounds.right>u.data.parentWidth-u.data.parentIndent.right+u.data.selfOutdent.right&&(u.pos.left-=(u.data.curBounds.right-(u.data.parentWidth-u.data.parentIndent.right+u.data.selfOutdent.right))/u.data.parentWidth,t=!0),null!==u.data.parentIndent.bottom&&u.data.curBounds.bottom>u.data.parentHeight-u.data.parentIndent.bottom+u.data.selfOutdent.bottom&&(u.pos.top-=(u.data.curBounds.bottom-(u.data.parentHeight-u.data.parentIndent.bottom+u.data.selfOutdent.bottom))/u.data.parentHeight,t=!0),t
},u.validateAngle=function(){var t,e,i=!1;return u.data.minAngle<u.data.maxAngle?(u.pos.angle<u.data.minAngle||u.pos.angle>u.data.maxAngle)&&(t=Math.abs(u.data.minAngle-u.pos.angle),t>Math.PI&&(t=2*Math.PI-t),e=Math.abs(u.data.maxAngle-u.pos.angle),e>Math.PI&&(e=2*Math.PI-e),e>t?(u.pos.angle=u.data.minAngle,i=!0):(u.pos.angle=u.data.maxAngle,i=!0)):u.pos.angle<u.data.minAngle&&u.pos.angle>u.data.maxAngle&&(t=Math.abs(u.data.minAngle-u.pos.angle),t>Math.PI&&(t=2*Math.PI-t),e=Math.abs(u.data.maxAngle-u.pos.angle),e>Math.PI&&(e=2*Math.PI-e),e>t?(u.pos.angle=u.data.minAngle,i=!0):(u.pos.angle=u.data.maxAngle,i=!0)),i},u.updateParams=function(){var t=!1;return u._updateParentSize()&&(t=!0),u._updateEditableState(),u._updateRotationLimits(),u._updateSizeLimits(),u._updateParentIndent(),t},u._updateEditableState=function(){u.isEditMode||(u.options.editable=!1),u.options.editable===!0||u.options.editable===!1?u.data.editable=u.data.movable=u.data.rotatable=u.data.resizable=u.options.editable===!0:"object"==typeof u.options.editable&&(u.data.movable=!!u.options.editable.movable,u.data.rotatable=!!u.options.editable.rotatable,u.data.resizable=!!u.options.editable.resizable,u.data.editable=u.data.movable||u.data.rotatable||u.data.resizable),u.data.editable===!1&&f.hasClass("ut-sticker-focus")&&u.blur()},u._updateRotationLimits=function(){u.options.styles.rotationLimits.min>180&&(u.options.styles.rotationLimits.min=360-u.options.styles.rotationLimits.min),-180>u.options.styles.rotationLimits.min&&(u.options.styles.rotationLimits.min=360+u.options.styles.rotationLimits.min),u.options.styles.rotationLimits.max>180&&(u.options.styles.rotationLimits.max=360-u.options.styles.rotationLimits.max),-180>u.options.styles.rotationLimits.max&&(u.options.styles.rotationLimits.max=360+u.options.styles.rotationLimits.max),u.data.minAngle=parseFloat(u.options.styles.rotationLimits.min)/180*Math.PI,u.data.maxAngle=parseFloat(u.options.styles.rotationLimits.max)/180*Math.PI},u._updateSizeLimits=function(){u.data.minWidth=u.parseSizeValue(u.options.styles.sizeLimits.minWidth,u.data.parentWidth),null===u.data.minWidth&&(u.data.minWidth=0),u.data.minHeight=u.parseSizeValue(u.options.styles.sizeLimits.minHeight,u.data.parentHeight),null===u.data.minHeight&&(u.data.minHeight=0),u.data.maxWidth=u.parseSizeValue(u.options.styles.sizeLimits.maxWidth,u.data.parentWidth),null===u.data.maxWidth&&(u.data.maxWidth=0),u.data.maxHeight=u.parseSizeValue(u.options.styles.sizeLimits.maxHeight,u.data.parentHeight),null===u.data.maxHeight&&(u.data.maxHeight=0)},u._updateParentIndent=function(){if(u.options.styles.parentIndent!==s&&null!==u.options.styles.parentIndent&&u.options.styles.parentIndent!==!1){if("object"!=typeof u.options.styles.parentIndent){var t=u.parseSizeValue(u.options.styles.parentIndent,u.data.parentWidth,0);return u.data.parentIndent.left=u.data.parentIndent.right=t,t=u.parseSizeValue(u.options.styles.parentIndent,u.data.parentHeight,0),u.data.parentIndent.top=u.data.parentIndent.bottom=t,s}u.data.parentIndent.left=null!==u.options.styles.parentIndent.left?u.parseSizeValue(u.options.styles.parentIndent.left,u.data.parentWidth,0):null,u.data.parentIndent.top=null!==u.options.styles.parentIndent.top?u.parseSizeValue(u.options.styles.parentIndent.top,u.data.parentHeight,0):null,u.data.parentIndent.right=null!==u.options.styles.parentIndent.right?u.parseSizeValue(u.options.styles.parentIndent.right,u.data.parentWidth,0):null,u.data.parentIndent.bottom=null!==u.options.styles.parentIndent.bottom?u.parseSizeValue(u.options.styles.parentIndent.bottom,u.data.parentHeight,0):null}},u._updateSelfOutdent=function(){if(u.options.styles.selfOutdent!==s&&null!==u.options.styles.selfOutdent&&u.options.styles.selfOutdent!==!1)if("object"!=typeof u.options.styles.selfOutdent){var t=u.parseSizeValue(u.options.styles.selfOutdent,f.width(),0);u.data.selfOutdent.left=u.data.selfOutdent.right=t,t=u.parseSizeValue(u.options.styles.selfOutdent,f.height(),0),u.data.selfOutdent.top=u.data.selfOutdent.bottom=t}else u.data.selfOutdent.left=u.parseSizeValue(u.options.styles.selfOutdent.left,f.width(),0),u.data.selfOutdent.top=u.parseSizeValue(u.options.styles.selfOutdent.top,f.height(),0),u.data.selfOutdent.right=u.parseSizeValue(u.options.styles.selfOutdent.right,f.width(),0),u.data.selfOutdent.bottom=u.parseSizeValue(u.options.styles.selfOutdent.bottom,f.height(),0)},u._savePosition=function(){u.isEditMode&&u.data.editable&&(u.post.storage["utSticker_"+u.options.id+"_pos"]=u.pos,u.post.save())},u._getCurrentData=function(){return{left:u.pos.left*u.data.parentWidth,top:u.pos.top*u.data.parentHeight,width:u.pos.width*u.data.parentWidth,height:u.pos.width/u.pos.ratio*u.data.parentWidth,rotation:180*u.pos.angle/Math.PI,zIndex:u.pos.zIndex}};var w=!1,b=600,x=0;u.onElementClick=function(t){var i=o.click,n=(new Date).getTime();b>n-x&&(i=o.dblClick),x=n;var s=!1,r=!1;if(!u.isEditMode||!u.data.editable||!w){var a=e.Event(i);p.trigger(a),s=a.isPropagationStopped(),r=a.isDefaultPrevented()}(s||u.options.styles.preventEventsBubble&&u.isEditMode&&u.data.editable)&&t.stopPropagation(),(r||u.options.styles.preventEventsBubble&&u.isEditMode&&u.data.editable)&&t.preventDefault()},u.onElementMouse=function(t,e){return u.isEditMode&&u.data.editable?("down"===t?(u.focus(!0),w=!1):"move"===t&&u.data.movable?(f[0].classList?f[0].classList.add("ut-sticker-moving"):f.addClass("ut-sticker-moving"),u.pos.left+=e.offLast.x/u.data.parentWidth,u.pos.top+=e.offLast.y/u.data.parentHeight,u.options.styles.useBounds&&(u.updatePosition(),p.trigger(o.move,u._getCurrentData()),u._updateBoundsInfo()),u.validatePosition()!==!0&&u.options.styles.useBounds||(u.updatePosition(),p.trigger(o.move,u._getCurrentData()),u._updateBoundsInfo()),w=!0):"up"===t&&u.data.movable&&(f[0].classList?f[0].classList.remove("ut-sticker-moving"):f.removeClass("ut-sticker-moving"),u._savePosition(),p.trigger(o.change,u._getCurrentData())),!1):!0},u.onElementResize=function(t,e){if(u.isEditMode){if(u.data.rotatable&&u.data.resizable&&u.options.styles.proportional&&!u.view.rotate)return u.onElementRotateAndResize(t,e);if("down"===t&&u.data.resizable)return u.focus(!0),!1;if("move"===t&&u.data.resizable){var i=e.offLast.x*Math.cos(u.pos.angle)+e.offLast.y*Math.sin(u.pos.angle),n=-e.offLast.x*Math.sin(u.pos.angle)+e.offLast.y*Math.cos(u.pos.angle),r=2*i,a=2*n,l=u.pos.width*u.data.parentWidth,h=l/u.pos.ratio;return l+=r,h+=a,u.options.styles.proportional?u.pos.width=l/u.data.parentWidth:(u.pos.width=l/u.data.parentWidth,u.pos.ratio=l/h),u.validateSize(),u.updateSize(),p.trigger(o.resize,u._getCurrentData()),u.options.styles.useBounds&&u._updateBoundsInfo(),u._updateSelfOutdent(),u.validatePosition()===!0&&(u.updatePosition(),p.trigger(o.move,u._getCurrentData()),u._updateBoundsInfo()),!1}return"up"===t&&u.data.resizable?(u._savePosition(),p.trigger(o.change,u._getCurrentData()),!1):s}},u._fullOffsetLeft=function(t){for(var e=t,i=0;e;)i+=e.offsetLeft,e=e.offsetParent;return i},u._fullOffsetTop=function(t){for(var e=t,i=0;e;)i+=e.offsetTop,e=e.offsetParent;return i},u.onElementRotate=function(t,e){if(u.isEditMode){if(u.data.rotatable&&u.data.resizable&&u.options.styles.proportional&&!u.view.resize)return u.onElementRotateAndResize(t,e);if("down"===t&&u.data.rotatable)return u.focus(!0),!1;if("move"===t&&u.data.rotatable){var i=parseInt(u._fullOffsetLeft(d),10)+parseInt(f.css("left"),10),n=parseInt(u._fullOffsetTop(d),10)+parseInt(f.css("top"),10),r=e.x-i,a=e.y-n,l=Math.atan2(a,r),h=Math.atan2(u.pos.width/u.pos.ratio,u.pos.width);return u.pos.angle=l-h,u.pos.angle>Math.PI&&(u.pos.angle=u.pos.angle-2*Math.PI),u.pos.angle<-Math.PI&&(u.pos.angle=u.pos.angle+2*Math.PI),u.validateAngle(),u.updateAngle(),p.trigger(o.rotate,u._getCurrentData()),u.options.styles.useBounds&&(u._updateBoundsInfo(),u._updateSelfOutdent()),u.validateSizeInBounds(!1)===!0&&(u.validateSize(),u.updateSize(),p.trigger(o.resize,u._getCurrentData()),u.options.styles.useBounds&&(u._updateBoundsInfo(),u._updateSelfOutdent())),u.validatePosition()===!0&&(u.updatePosition(),p.trigger(o.move,u._getCurrentData()),u._updateBoundsInfo()),!1}return"up"===t&&u.data.rotatable?(u._savePosition(),p.trigger(o.change,u._getCurrentData()),!1):s}},u.onElementRotateAndResize=function(t,e){if("down"===t)return u.focus(!0),!1;if("move"===t){var i=parseInt(u._fullOffsetLeft(d),10)+parseInt(f.css("left"),10),n=parseInt(u._fullOffsetTop(d),10)+parseInt(f.css("top"),10),s=e.x-i,r=e.y-n,a=2*Math.sqrt((s-e.offLast.x)*(s-e.offLast.x)+(r-e.offLast.y)*(r-e.offLast.y)),l=2*Math.sqrt(s*s+r*r);u.pos.width*=l/a;var h=Math.atan2(r,s),c=Math.atan2(u.pos.width/u.pos.ratio,u.pos.width);return u.pos.angle=h-c,u.pos.angle>Math.PI&&(u.pos.angle=u.pos.angle-2*Math.PI),u.pos.angle<-Math.PI&&(u.pos.angle=u.pos.angle+2*Math.PI),u.validateAngle(),u.updateAngle(),u.validateSize(),u.updateSize(),p.trigger(o.rotate,u._getCurrentData()),p.trigger(o.resize,u._getCurrentData()),u.options.styles.useBounds&&(u._updateBoundsInfo(),u._updateSelfOutdent()),u.validatePosition()===!0&&(u.updatePosition(),p.trigger(o.move,u._getCurrentData()),u._updateBoundsInfo()),!1}return"up"===t?(u._savePosition(),p.trigger(o.change,u._getCurrentData()),!1):!0},u.onBodyClick=function(){f.hasClass("ut-sticker-focus")&&0>=e(this).closest(".ut-sticker").length&&u.blur()},u.hide=function(){f[0].style.display="none",p[0].style.display="none"},u.show=function(){f[0].style.display="",p[0].style.display=""},u.focus=function(t){if(u.data.editable&&!f.hasClass("ut-sticker-focus")){var n=d.getElementsByClassName("ut-sticker");n&&n[0]&&e(n).utSticker("blur"),f.addClass("ut-sticker-focus"),f.trigger(o.focus,u.options.id),u.options.styles.topOnFocus&&t&&(u.pos.zIndex=i.utStickerLastZIndex++,f[0].style.zIndex=u.pos.zIndex,p.trigger(o.change,u._getCurrentData()))}},u.blur=function(){f.hasClass("ut-sticker-focus")&&(f.removeClass("ut-sticker-focus"),f.trigger(o.blur,u.options.id))},u.update=function(t){var e=!1;u.updateParams()&&(e=!0),u.createButtons(),t&&u.applyNewPosition(t)&&(e=!0),u.updateSize(),u.updatePosition(),u.options.autoflip||p.removeClass("ut-sticker-flip"),u.validateAngle(),u.updateAngle(),u._updateBoundsInfo(),u._updateSelfOutdent(),u.data.resizable&&u.validateSize()===!0&&(e=!0,u.updateSize()),u.data.movable&&u.validatePosition()===!0&&(e=!0,u.updatePosition()),u._updateBoundsInfo(),u._updateSelfOutdent(),e&&(p.trigger(o.change,u._getCurrentData()),u._savePosition())},u.editable=function(t){u.options.editable="object"==typeof t?e.extend(!0,{},t):t,u._updateEditableState()};var k=!1;u.updateParams(),u.prepareElement(),u.createButtons(),u.preparePosition(),u.updateSize(),u.updatePosition(),u.updateAngle(),u._updateBoundsInfo(),u._updateSelfOutdent(),u.data.resizable&&u.validateSize()===!0&&(u.updateSize(),k=!0),u.data.movable&&u.validatePosition()===!0&&(u.updatePosition(),k=!0),u._updateBoundsInfo(),u._updateSelfOutdent(),u.initialized=!0,u.post&&setTimeout(function(){u.post.storage["utSticker_"+u.options.id+"_pos"]||u._savePosition(),p.trigger(o.ready,{id:u.options.id,data:u._getCurrentData()})},0),k&&(setTimeout(function(){p.trigger(o.change,u._getCurrentData())},0),u._savePosition())}),this},hide:function(){return this.each(function(){this.utSticker&&this.utSticker.hide&&this.utSticker.hide.call(this)}),this},show:function(){return this.each(function(){this.utSticker&&this.utSticker.show&&this.utSticker.show.call(this)}),this},focus:function(){return this.each(function(){this.utSticker&&this.utSticker.focus&&this.utSticker.focus.call(this)}),this},blur:function(){return this.each(function(){this.utSticker&&this.utSticker.blur&&this.utSticker.blur.call(this)}),this},update:function(){return this.each(function(){this.utSticker&&this.utSticker.update&&this.utSticker.update.call(this)}),this},editable:function(t){return this.each(function(){this.utSticker&&this.utSticker.editable&&this.utSticker.editable.call(this,t)}),this},remove:function(){return this.each(function(){this.utSticker&&this.utSticker.removeElement&&this.utSticker.removeElement.call(this)}),this},destroy:function(){return r.remove.apply(this)}};e.fn.utSticker=function(t){if("object"!=typeof t&&t){if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));e.error("Method "+t+" does not exist on $.utSticker")}else r.init.apply(this,arguments);return this}})(UT,jQuery,window,document,void 0)}function loadAntiScroll(){(function(t){function e(e,i){this.el=t(e),this.options=i||{},this.x=!1,this.y=!1!==this.options.y||this.options.forceVertical,this.autoHide=!1!==this.options.autoHide,this.padding=void 0===this.options.padding?2:this.options.padding,this.inner=this.el.find(".antiscroll-inner"),this.inner.outerWidth()<=this.el.outerWidth()&&this.inner.css({width:"+="+(this.y?s():0)});var n={};this.x&&(n.width="+="+s()),this.inner.css(n),this.refresh()}function i(e){this.pane=e,this.pane.el.append(this.el),this.innerEl=this.pane.inner.get(0),this.dragging=!1,this.enter=!1,this.shown=!1,this.pane.el.mouseenter(t.proxy(this,"mouseenter")),this.pane.el.mouseleave(t.proxy(this,"mouseleave")),this.el.mousedown(t.proxy(this,"mousedown")),this.innerPaneScrollListener=t.proxy(this,"scroll"),this.pane.inner.scroll(this.innerPaneScrollListener),this.innerPaneMouseWheelListener=t.proxy(this,"mousewheel"),this.pane.inner.bind("mousewheel",this.innerPaneMouseWheelListener);var i=this.pane.options.initialDisplay;i!==!1&&(this.show(),this.pane.autoHide&&(this.hiding=setTimeout(t.proxy(this,"hide"),parseInt(i,10)||3e3)))}function n(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i}function s(){if(void 0===r){var e=t('<div class="antiscroll-inner" style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div style="height:100px;width:100%"></div>');t("body").append(e);var i=t(e).innerWidth(),n=t("div",e).innerWidth();t(e).remove(),r=i-n}return r}t.fn.antiscroll=function(e){return this.each(function(){return t(this).data("antiscroll")?(t(this).data("antiscroll").rebuild(),void 0):(t(this).data("antiscroll",new t.Antiscroll(this,e)),void 0)})},t.Antiscroll=e,e.prototype.refresh=function(){var t=this.inner.get(0).scrollWidth>this.el.width()+(this.y?s():0),e=this.inner.get(0).scrollHeight>this.el.height()+(this.x?s():0);this.x&&(!this.horizontal&&t?this.horizontal=new i.Horizontal(this):this.horizontal&&!t?(this.horizontal.destroy(),this.horizontal=null):this.horizontal&&this.horizontal.update()),this.y&&(!this.vertical&&e?this.vertical=new i.Vertical(this):this.vertical&&!e?(this.vertical.destroy(),this.vertical=null):this.vertical&&this.vertical.update())},e.prototype.destroy=function(){return this.horizontal&&(this.horizontal.destroy(),this.horizontal=null),this.vertical&&(this.vertical.destroy(),this.vertical=null),this},e.prototype.rebuild=function(){return this.destroy(),e.call(this,this.el,this.options),this},i.prototype.destroy=function(){return this.el.remove(),this.pane.inner.unbind("scroll",this.innerPaneScrollListener),this.pane.inner.unbind("mousewheel",this.innerPaneMouseWheelListener),this},i.prototype.mouseenter=function(){this.enter=!0,this.show()},i.prototype.mouseleave=function(){this.enter=!1,this.dragging||this.pane.autoHide&&this.hide()},i.prototype.scroll=function(){this.shown||(this.show(),this.enter||this.dragging||this.pane.autoHide&&(this.hiding=setTimeout(t.proxy(this,"hide"),1500))),this.update()},i.prototype.mousedown=function(e){e.preventDefault(),this.dragging=!0,this.startPageY=e.pageY-parseInt(this.el.css("top"),10),this.startPageX=e.pageX-parseInt(this.el.css("left"),10),this.el[0].ownerDocument.onselectstart=function(){return!1};var i=(this.pane,t.proxy(this,"mousemove")),n=this;t(this.el[0].ownerDocument).mousemove(i).mouseup(function(){n.dragging=!1,this.onselectstart=null,t(this).unbind("mousemove",i),n.enter||n.hide()})},i.prototype.show=function(){!this.shown&&this.update()&&(this.el.addClass("antiscroll-scrollbar-shown"),this.hiding&&(clearTimeout(this.hiding),this.hiding=null),this.shown=!0)},i.prototype.hide=function(){this.pane.autoHide!==!1&&this.shown&&(this.el.removeClass("antiscroll-scrollbar-shown"),this.shown=!1)},i.Horizontal=function(e){this.el=t('<div class="antiscroll-scrollbar antiscroll-scrollbar-horizontal">',e.el),i.call(this,e)},n(i.Horizontal,i),i.Horizontal.prototype.update=function(){var t=this.pane.el.width(),e=t-2*this.pane.padding,i=this.pane.inner.get(0);return this.el.css("width",e*t/i.scrollWidth).css("left",e*i.scrollLeft/i.scrollWidth),i.scrollWidth>t},i.Horizontal.prototype.mousemove=function(t){var e=this.pane.el.width()-2*this.pane.padding,i=t.pageX-this.startPageX,n=this.el.width(),s=this.pane.inner.get(0),r=Math.min(Math.max(i,0),e-n);s.scrollLeft=(s.scrollWidth-this.pane.el.width())*r/(e-n)},i.Horizontal.prototype.mousewheel=function(t,e,i){return 0>i&&0===this.pane.inner.get(0).scrollLeft||i>0&&this.innerEl.scrollLeft+Math.ceil(this.pane.el.width())==this.innerEl.scrollWidth?(t.preventDefault(),!1):void 0},i.Vertical=function(e){this.el=t('<div class="antiscroll-scrollbar antiscroll-scrollbar-vertical">',e.el),i.call(this,e)},n(i.Vertical,i),i.Vertical.prototype.update=function(){var t=this.pane.el.height(),e=t-2*this.pane.padding,i=this.innerEl,n=e*t/i.scrollHeight;n=20>n?20:n;var s=e*i.scrollTop/i.scrollHeight;if(s+n>e){var r=s+n-e;s=s-r-3}return this.el.css("height",n).css("top",s),i.scrollHeight>t},i.Vertical.prototype.mousemove=function(t){var e=this.pane.el.height(),i=e-2*this.pane.padding,n=t.pageY-this.startPageY,s=this.el.height(),r=this.innerEl,o=Math.min(Math.max(n,0),i-s);r.scrollTop=(r.scrollHeight-e)*o/(i-s)},i.Vertical.prototype.mousewheel=function(t,e,i,n){return n>0&&0===this.innerEl.scrollTop||0>n&&this.innerEl.scrollTop+Math.ceil(this.pane.el.height()+1)>=this.innerEl.scrollHeight?(t.preventDefault(),!1):void 0};var r})(jQuery)}function loadMediaPlayer(){(function(t){"use strict";function e(e){this._parent=jQuery(e.parent?e.parent:"body"),this._trackData=null,this._trackService="",this._trackType="",this._trackDuration=0,this._curState="loading",this._curStyle="circle",this._sourceLink="",this._isNeedShowAnim=!0,this._isTouch="ontouchstart"in t||t.navigator.msMaxTouchPoints>0,this.onExpand=null,this.onReady=null,this.post=null;var i=this;t.UT&&UT.Expression&&UT.Expression.ready&&UT.Expression.ready(function(t){i.post=t,i.post.on("publish",function(){"playing"===i._curState&&i.stop()})}),this.player=null,this.view={},this.view.container=jQuery("<div>",{"class":"media-player mp-container"}).appendTo(this._parent),this.view.container.css("display","none"),this.view.back=jQuery("<div>",{"class":"mp-ui-back"}).appendTo(this.view.container),this.view.trackInfo=jQuery("<div>",{"class":"mp-ui-track-info"}).appendTo(this.view.container),this.view.trackAuthor=jQuery("<div>",{"class":"mp-ui-track-author"}).appendTo(this.view.trackInfo),this.view.trackName=jQuery("<div>",{"class":"mp-ui-track-name"}).appendTo(this.view.trackInfo),this.view.artworkContainer=jQuery("<div>",{"class":"mp-ui-art-cont",target:"_blank"}).appendTo(this.view.back),this.view.artworkImage=jQuery("<div>",{"class":"mp-ui-art-image"}).appendTo(this.view.artworkContainer),this.view.artworkOverlay=jQuery("<div>",{"class":"mp-ui-art-overlay"}).appendTo(this.view.artworkContainer),this.view.button=jQuery("<div>",{"class":"mp-ui-ctrl-button"}).appendTo(this.view.back),this.view.buttonBack=jQuery("<div>",{"class":"mp-ui-ctrl-button-back"}).appendTo(this.view.button),this.view.buttonIcons=jQuery("<div>",{"class":"mp-ui-ctrl-button-icons"}).appendTo(this.view.button),jQuery("<span>",{"class":"mp-button-icon mp-play icon_play"}).appendTo(this.view.buttonIcons),jQuery("<span>",{"class":"mp-button-icon mp-pause icon_pause"}).appendTo(this.view.buttonIcons),jQuery("<span>",{"class":"mp-button-icon mp-wait icon_spinner"}).appendTo(this.view.buttonIcons),jQuery("<span>",{"class":"mp-button-icon mp-close icon_delete_alt"}).appendTo(this.view.buttonIcons),jQuery("<span>",{"class":"mp-button-icon mp-error icon_error"}).appendTo(this.view.buttonIcons).html("!"),this.view.buttonOverlay=jQuery("<div>",{"class":"mp-ui-ctrl-button-overlay"}).appendTo(this.view.button);var n="";n+='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="-2 -2 54 54" >',n+="<g>",n+='<path class="waitStatusLine" d="M26,2" stroke-linecap="round" fill="none" stroke="#ffffff" stroke-width="4"/>',n+='<path class="playStatusLine" d="M26,2" stroke-linecap="round" fill="none" stroke="#d2523e" stroke-width="4"/>',n+="</g>",n+="</svg>",this.view.buttonOverlay.html(n),this.setZIndex(e.zIndex),this.setStyle(e.style?e.style:"circle"),this.setState("loading"),this.view.trackInfo.on("click",".source",this._onSourceClick.bind(this)),this.view.button.on("click",this._onButtonClick.bind(this))}e.prototype._onSourceClick=function(){this.stop()},e.prototype.Load=function(t){if("string"==typeof t&&(-1!==t.toLowerCase().indexOf("soundcloud")?t={service:"soundcloud",url:t}:-1!==t.toLowerCase().indexOf("itunes.apple")?t={service:"itunes",pageUrl:t}:t.service="unknown"),void 0!==t.service){this.view.container.removeClass("mp-audio mp-video");var e=t.service.toLowerCase();"itunes"===e||"soundcloud"===e?(this._trackService=e,this._trackData=t,this._trackType="audio",this.view.container.addClass("mp-audio"),this.initAudioPlayer()):(this._trackService=e,this._trackData=t,this._trackType="video",this.view.container.addClass("mp-video"),this.initVideoPlayer()),this.view.container.css("display","")}},e.prototype.initAudioPlayer=function(){this.player&&(this.player.remove(),this.player=null);var t=this;t.setState("loading");var e="mp_player_"+(""+Math.floor(1e5*Math.random()));t.player=jQuery("<div>",{"class":"mp-player",id:e}).appendTo(t.view.container),t.player.on("utAudio:change",function(){}),t.player.on("utAudio:ready",function(){"loading"===t._curState&&t.setState("launched")}),t.player.on("utAudio:mediaReady",function(e,i){var n="";if(i.duration>0){t._trackDuration=i.duration;var s=Math.floor(t._trackDuration/1e3)%60,r=Math.floor(t._trackDuration/6e4);n=r+"."+t.zeroPad(s,2,"0")+" - "}else t._trackDuration=0;!t._trackData.artist&&i.artist&&(t._trackData.artist=i.artist),!t._trackData.title&&i.trackName&&(t._trackData.title=i.trackName),!t._trackData.cover&&i.artwork_url&&(t._trackData.cover=i.artwork_url,t.setCoverUrl(t._trackData.cover)),"itunes"===t._trackService?t.view.trackAuthor.html((t._trackData.artist||"")+" - "+n+'<a target="_blank" class="source">iTunes</a>'):t.view.trackAuthor.html((t._trackData.artist||"")+" - "+n+'<a target="_blank" class="source">SoundCloud</a>'),t.view.trackName.html(t._trackData.title||""),t._sourceLink&&t.view.trackAuthor.find(".source").attr("href",t._sourceLink),t.onReady&&t.onReady()}),t.player.on("utAudio:play",function(){t.setState("playing")}),t.player.on("utAudio:pause",function(){t.setState("paused"),t._isNeedShowAnim=!1}),t.player.on("utAudio:stop",function(){t.setState("finished"),t.showProgress(0),t._isNeedShowAnim=!0}),t.player.on("utAudio:finish",function(){t.setState("finished"),t.showProgress(0),t._isNeedShowAnim=!0}),t.player.on("utAudio:timeUpdate",function(e,i){t._trackDuration>0?t.showProgress(1e3*i/t._trackDuration):t.showProgress(0)}),t.player.on("utAudio:seek",function(){t.setState("seeking")});var i=jQuery.extend(!0,{},t._trackData),n={data:i,skin:"tiny-bottom",ui:{play:!1,progress:!1,time:!1,title:!1,source:!1,artwork:!1},editable:!1};"itunes"===t._trackService&&i.url&&i.pageUrl?(i.appData={previewUrl:i.url,artistName:i.artist,trackName:i.title,artworkUrl100:i.cover},i.link=i.url,i.url=i.pageUrl,t.view.trackAuthor.html((i.artist?i.artist+" - ":"")+'<a target="_blank" class="source">iTunes</a>')):"itunes"===t._trackService&&i.pageUrl?(i.url=i.pageUrl,t.view.trackAuthor.html((i.artist?i.artist+" - ":"")+'<a target="_blank" class="source">iTunes</a>')):t.view.trackAuthor.html((i.artist?i.artist+" - ":"")+'<a target="_blank" class="source">SoundCloud</a>'),t._sourceLink&&t.view.trackAuthor.find(".source").attr("href",t._sourceLink),t.view.trackName.html(i.title||""),i.cover?t.setCoverUrl(i.cover):t.setCoverUrl(""),i.pageUrl?t.setSourceLink(i.pageUrl):t.setSourceLink(""),t.player.utAudio(n)},e.prototype.initVideoPlayer=function(){this.player&&(this.player.remove(),this.player=null);var e=this;e.setState("loading");var i="mp_player_"+(""+Math.floor(1e5*Math.random()));e.player=jQuery("<div>",{"class":"mp-player",id:i}).appendTo(e.view.container),e.player.on("utVideo:ready",function(){"loading"===e._curState&&e.setState("launched")}),e.player.on("utVideo:mediaReady",function(t,i){var n=i.author?i.author+" - ":"",s=i.title?i.title:e._trackData.artist,r="";if(i.duration>0){e._trackDuration=1e3*i.duration;var o=Math.floor(e._trackDuration/1e3)%60,a=Math.floor(e._trackDuration/6e4);r=a+"."+e.zeroPad(o,2,"0")+" - "}else e._trackDuration=0;e.view.trackAuthor.html(n+r+'<a target="_blank" class="source">'+i.service_name+"</a>"),e.view.trackName.html(s),e._sourceLink&&e.view.trackAuthor.find(".source").attr("href",e._sourceLink),e.onReady&&e.onReady()}),e.player.on("utVideo:play",function(){e.setState("playing")}),e.player.on("utVideo:pause",function(){}),e.player.on("utVideo:stop",function(){e.setState("finished")}),e.player.on("utVideo:finish",function(){e.setState("finished")}),e.player.on("utVideo:error",function(){e.setState("error")}),e.view.trackAuthor.html(e._trackData.artist||""),e.view.trackName.html(e._trackData.title||""),e._trackData.cover?e.setCoverUrl(e._trackData.cover):e.setCoverUrl(""),e._trackData.pageUrl||e._trackData.url?e.setSourceLink(e._trackData.pageUrl||e._trackData.url):e.setSourceLink(""),t.ppp=e.player,e.player.utVideo({editable:!1,data:e._trackData.url,autoPlay:!1})},e.prototype.setZIndex=function(t){t&&this.view.container.css("z-index",t)},e.prototype.setStyle=function(t){var e=["mp-style-full","mp-style-full_m","mp-style-circle","mp-style-circle_m"];this.view.container.removeClass(e.join(" ")).addClass("mp-style-"+t),this._curStyle=t},e.prototype.setState=function(t){var e=["mp-mode-loading","mp-mode-launched","mp-mode-seeking","mp-mode-playing","mp-mode-paused","mp-mode-finished","mp-mode-error"];if(this.view.container.removeClass(e.join(" ")).addClass("mp-mode-"+t),"playing"===t){if(!this.view.container.hasClass("mp-expand")){if(this.view.container.addClass("mp-expand"),this._isNeedShowAnim&&(this.whiteAnim(),this._isNeedShowAnim=!1),this._isTouch&&"circle"!==this._curStyle){var i=Math.min(this._parent.width()-20,320);this.view.container.css("width",i+"px"),this.view.back.css("width",i+"px"),this.view.container.find(".mp-player").css("width",i+"px")}this.onExpand&&this.onExpand.call(this,!0)}}else this._isTouch&&(this.view.container.css("width",""),this.view.back.css("width","")),this.view.container.hasClass("mp-expand")&&(this.view.container.removeClass("mp-expand"),"itunes"!==this._trackService&&"soundcloud"!==this._trackService&&(this.whiteAnim2(),this._isNeedShowAnim=!0),this.onExpand&&this.onExpand.call(this,!1));this._curState=t},e.prototype._onButtonClick=function(t){t.stopPropagation(),"audio"===this._trackType?"playing"===this._curState?this.stop():"launched"===this._curState||"paused"===this._curState||"finished"===this._curState?this.play():"error"===this._curState&&this.initAudioPlayer():"video"===this._trackType&&("playing"===this._curState?this.stop():"launched"===this._curState||"paused"===this._curState||"finished"===this._curState?this.play():"error"===this._curState&&this.initVideoPlayer())},e.prototype.play=function(){"playing"!==this._curState&&("audio"===this._trackType?(this.setState("seeking"),this.player.utAudio("play")):(this.setState("playing"),this.player.utVideo("play")))},e.prototype.stop=function(){"playing"===this._curState&&("audio"===this._trackType?this.player.utAudio("pause"):this.player.utVideo("stop"))},e.prototype.setCoverUrl=function(t){t?this.view.artworkImage.css("background-image","url("+t+")"):this.view.artworkImage.css("background-image")},e.prototype.zeroPad=function(t,e,i){return i=i||"0",t+="",t.length>=e?t:Array(e-t.length+1).join(i)+t},e.prototype.setSourceLink=function(t){t?(this._sourceLink=t,this.view.container&&this.view.container.find(".source").attr("href",t)):(this._sourceLink="",this.view.container&&this.view.container.find(".source").removeAttr("href"))},e.prototype.showProgress=function(t,e){t=t>1?1:0>t?0:t;var i=2*Math.PI*t-Math.PI/2,n=25,s=25,r=24.5,o=Math.cos(i)*r,a=Math.sin(i)*r,u=this.view.buttonOverlay.find(e?".waitStatusLine":".playStatusLine"),l=u&&u[0]?u[0]:null;l&&(o>0?l.setAttribute("d","M"+n+","+(s-r)+" a"+r+","+r+" 0 0,1 "+o+","+(r+a)):l.setAttribute("d","M"+n+","+(s-r)+" a"+r+","+r+" 0 1,1 "+o+","+(r+a)))},e.prototype.whiteAnim=function(){var t=0,e=(new Date).getTime(),i=this;i.showProgress(1,!0),t=setInterval(function(){var n=(new Date).getTime();return n-e>200?(i.showProgress(0,!0),clearInterval(t),void 0):(i.showProgress(1-(n-e)/200,!0),void 0)},1)},e.prototype.whiteAnim2=function(){var t=0,e=(new Date).getTime(),i=this;i.showProgress(0,!0),t=setInterval(function(){var n=(new Date).getTime();if(!(200>n-e))return n-e>500?(i.showProgress(1,!0),clearInterval(t),void 0):(i.showProgress((n-e-200)/300,!0),void 0)},1)},t.MediaPlayer=e})(window)}function loadCutOut(){loadPaper(),function(t){"use strict";paper.install(window);var e={init:function(e){return this.each(function(){var i=new paper.Tool;i.activate();var n={UT:!1,imageData:{},segments:[],i18n:{back:"Back",edit:"Edit",done:"Done",pointTip:"Shift + Click to remove",doCutOut:"Cut-out your<br>sticker",fullImage:"Or use full image",reset:"Reset",doneEdit:"Done editing",pen:"PEN",addPoint:"Add point"},onCuted:function(){},onReady:function(){}},s=t(this),r={};this.utCut=r,r.options=t.extend(!0,n,e),r.isTouch="ontouchstart"in window||window.navigator.msMaxTouchPoints>0,-1!==navigator.userAgent.toLowerCase().indexOf("android")&&t("body").addClass("android-fix");var o={segments:!0,stroke:!0,fill:!0,tolerance:r.isTouch?21:15};r.hide=function(){s.hide()},r.show=function(){s.show()},r.pathBackup=[],r.resize=function(){r.pathBackup=r.getSegments();var t={width:m,height:v};L=u.width(),D=u.height(),m=Math.floor(B*(D/N)),v=Math.floor(N*(L/B)),D>=v?(m=B*(v/N),u.find(".ut-cut-canvas1, .ut-cut-canvas2, .ut-cut-bg, .ut-cut-bg-img").css({marginTop:-v/2+"px",marginLeft:-m/2+"px",top:"50%",left:"50%"})):(v=N*(m/B),u.find(".ut-cut-canvas1, .ut-cut-canvas2, .ut-cut-bg, .ut-cut-bg-img").css({marginTop:-v/2+"px",marginLeft:-m/2+"px",left:"50%",top:"50%"})),E.css({top:(D-v)/2+20,left:(L-m)/2+20}),P.css({width:m,height:v,marginLeft:-m/2+"px",marginTop:-v/2+"px"}),l.width=h.width=c.width=m,l.height=h.height=c.height=v,p.width(m).height(v),d.width(m).height(v),A.drawImage(O,0,0,m,v),paper.setup(h);var e=new paper.Raster(l);e.position=paper.view.center,g=new paper.Path.Circle(paper.view.center,50),g.style={fillColor:new paper.RgbColor(0,0,0,0),strokeColor:"black",strokeWidth:2},g.selected=!0,g.clipMask=!0,g.clipped=!0,g.removeSegments();for(var i={width:t.width/m,height:t.height/v},n=0;r.pathBackup.length>n;n++)r.pathBackup[n].point.x=r.pathBackup[n].point.x/i.width,r.pathBackup[n].point.y=r.pathBackup[n].point.y/i.height,r.pathBackup[n].handleIn.x=r.pathBackup[n].handleIn.x/i.width,r.pathBackup[n].handleIn.y=r.pathBackup[n].handleIn.y/i.height,r.pathBackup[n].handleOut.x=r.pathBackup[n].handleOut.x/i.width,r.pathBackup[n].handleOut.y=r.pathBackup[n].handleOut.y/i.height;if(r.restorePath(r.pathBackup),r.isTouch)a.removeClass("ut-cut-hide-all-controls"),x.css({left:"10px"});else{var s=v+(D-v)/2-47,o=(L-m)/2+10;b.css({top:s,left:o+x.width()+30}),_.css({top:s,left:"auto",right:o}),w.css({top:s+15,left:"auto",right:o}),window.editing_mode?x.css({top:s,left:o}):x.css({top:s,left:o})}v>m&&D/v>=5?E.addClass("landscape"):E.removeClass("landscape"),T.hide(),paper.view.draw()};var a=t('<div class="ut-cut-container"></div>').appendTo(t(this)),u=t('<div class="ut-cut-canvas"></div>').appendTo(a);
r.isTouch&&a.addClass("ut-cut-mobile");var l=document.createElement("canvas"),h=document.createElement("canvas"),c=document.createElement("canvas");u.append(l);var d=t('<div class="ut-cut-bg-img"></div>').appendTo(u),p=t('<div class="ut-cut-bg"></div>').appendTo(u);u.append(h),u.append(c),l.className="ut-cut-canvas1",h.className="ut-cut-canvas2",c.className="ut-cut-canvas3";var f=!1;t(h).on("mouseenter",function(){f=!0}),t(h).on("mouseleave",function(){f=!1});var g,m,v,y=t('<a class="ut-cut-cancel-button ut-edit-button icon_point_left"> '+r.options.i18n.back+"</a>").appendTo(a);y.on("click",function(){s.hide()});var _=t('<a class="ut-cut-save-button ut-edit-button icon_check"> '+r.options.i18n.done+"</a>").appendTo(a);_.on("click",function(){g.selected=!1,paper.view.draw();var t=h.getContext("2d").getImageData(0,0,m,v),e=g.bounds,i=-e.x,n=-e.y,s=e.width,o=e.height;e.x+e.width>m?0>e.x?(i=0,s=m):s=m-e.x:0>e.x&&(i=0,s=e.width+e.x),e.y+e.height>v?0>e.y?(n=0,o=v):o=v-e.y:0>e.y&&(n=0,o=e.height+e.y),l.width=s,l.height=o;var a=l.getContext("2d");a.putImageData(t,i,n);var u=l.toDataURL(),c=new r.options.UT.Image(u);l.width=m,l.height=v,a.drawImage(O,0,0,m,v),g.selected=!0,paper.view.draw(),r.options.onCuted({image:c,segments:r.getSegments()}),r.destroy()});var w=t('<a class="ut-cut-full-img-button">Or use full image <span class="icon_arrow_right"></span></a>').appendTo(a);w.on("click",function(){var t=l.toDataURL(),e=new r.options.UT.Image(t);r.options.onCuted({image:e,segments:[]}),P.hide(),s.hide()});var b=t('<a class="ut-cut-reset-button ut-edit-button icon_refresh"> '+r.options.i18n.reset+"</a>").appendTo(a);b.on("click",function(){if(w.show(),_.hide(),b.hide(),x.hide(),P.show(),g.removeSegments(),g.selected=!1,g.closed=!1,r.isTouch){paper.setup(h);var t=new paper.Raster(l);t.position=paper.view.center,g=new paper.Path.Circle(view.center,50),g.style={fillColor:new paper.RgbColor(0,0,0,0),strokeColor:"black",strokeWidth:2},g.selected=!0,g.clipMask=!0,g.clipped=!0,E.show()}else k="draw",window.drawmode=!0;window.editing_mode=!1,x.removeClass("icon_check").addClass("icon_edit").html("&nbsp;"+r.options.i18n.edit),paper.view.draw()}),window.editing_mode=!1;var x=t('<a class="ut-cut-rm-points-button ut-edit-button icon_edit"> '+r.options.i18n.edit+"</a>").appendTo(a);x.on("click",function(){var t=r.getSegments();g.removeSegments();var e=v+(D-v)/2-47,i=(L-m)/2+10;window.editing_mode?(window.editing_mode=!1,_.show(),b.hide(),x.removeClass("icon_check").addClass("icon_edit").html("&nbsp;"+r.options.i18n.edit)):(window.editing_mode=!0,_.hide(),b.show(),x.removeClass("icon_edit").addClass("icon_check").html("&nbsp;"+r.options.i18n.doneEdit)),r.isTouch?(x.css({left:"10px"}),b.css({left:"170px"})):(x.css({top:e,left:i}),b.css({top:e,left:i+x.width()+30})),r.restorePath(t),paper.view.draw()}),r.getSegments=function(){return g&&g.segments.length?g.segments.slice():[]},r.restorePath=function(t){g.closed=!0,k="static",window.drawmode=!1;for(var e=0;t.length>e;e++){var i=new paper.Point(t[e].point.x,t[e].point.y),n=new paper.Point(t[e].handleIn.x,t[e].handleIn.y),s=new paper.Point(t[e].handleOut.x,t[e].handleOut.y);g.add(new Segment(i,n,s))}paper.view.draw(),g.fullySelected=!1,g.selected=!0},r.destroy=function(){paper.project.remove(),i.remove(),s.remove()};var k="static",C=t('<button class="ut-cut-pen">'+r.options.i18n.pen+"</button>").appendTo(a);C.on("click",function(){k="draw",g.removeSegments(),g.selected=!1,g.closed=!1,paper.view.draw()});var S=t('<div class="ut-cut-tooltip">'+r.options.i18n.addPoint+"</div>").appendTo(a),P=t('<div class="ut-cut-tooltip-1"><span>'+r.options.i18n.doCutOut+"</span></div>").appendTo(u);P.on("click",function(){t(this).hide()});var E=t('<div class="ut-cut-mobile-tooltip"><span>'+r.options.i18n.doCutOut+"</span></div>").appendTo(u);E.on("click",function(){t(this).hide()});var T=t('<div class="ut-cut-rotate-tooltip"></div>').appendTo(u),I=t('<div class="ut-cut-rotate-tooltip-close icon_delete"></div>').appendTo(T);I.on("click",function(){T.hide(),a.removeClass("ut-cut-hide-all-controls")});var A=l.getContext("2d"),j=h.getContext("2d"),M=c.getContext("2d"),L=u.width(),D=u.height(),B=this.width,N=this.height,O=new Image;O.onload=function(){if(B=this.width,N=this.height,d.css("background-image","url("+this.src+")"),m=Math.floor(B*(D/N)),v=Math.floor(N*(L/B)),D>=v?(m=B*(v/N),u.find(".ut-cut-canvas1, .ut-cut-canvas2, .ut-cut-bg, .ut-cut-bg-img").css({marginTop:-v/2+"px",top:"50%"})):(v=N*(m/B),u.find(".ut-cut-canvas1, .ut-cut-canvas2, .ut-cut-bg, .ut-cut-bg-img").css({marginLeft:-m/2+"px",left:"50%"})),P.css({width:m,height:v,marginLeft:-m/2+"px",marginTop:-v/2+"px"}),P.show(),E.css({top:(D-v)/2+20,left:(L-m)/2+20}),v>m&&D/v>=5?E.addClass("landscape"):E.removeClass("landscape"),r.isTouch)x.css({left:"10px"});else{var e=v+(D-v)/2-47,n=(L-m)/2+10;b.css({top:e,left:n+x.width()+10}),_.css({top:e,left:"auto",right:n}),w.css({top:e+15,left:"auto",right:n}),window.editing_mode?x.css({top:e,left:n}):x.css({top:e,left:n})}l.width=h.width=c.width=m,l.height=h.height=c.height=v,p.width(m).height(v),d.width(m).height(v),A.drawImage(O,0,0,m,v),paper.setup(h);var y=new paper.Raster(l);y.position=paper.view.center;var T,I=!1;g=new paper.Path.Circle(paper.view.center,50),g.style={fillColor:new paper.RgbColor(0,0,0,0),strokeColor:"black",strokeWidth:2},g.selected=!0,g.clipMask=!0,g.clipped=!0,i.onMouseDown=function(t){if(E.hide(),a.addClass("ut-cut-hide-all-controls"),P.hide(),"static"===k){var e=j.getImageData(0,0,m,v);M.putImageData(e,0,0);var i=new paper.Raster(c),n=0!==i.getPixel(t.point).alpha;i.remove(),T=null;var s=paper.project.hitTest(t.point,o);if(t.modifiers.shift||window.editing_mode)return"segment"===s.type&&g.segments.length>3&&s.segment.remove(),void 0;if(s)if("Raster"!==s.item.type&&(g=s.item),"segment"===s.type)T=s.segment;else if("stroke"===s.type){var r=s.location;T=g.insert(r.index+1,t.point)}I=n&&!T,I&&paper.project.activeLayer.addChild(g)}paper.view.draw()},i.onMouseMove=function(t){if(g.selected=!0,g.clipMask=!0,g.clipped=!0,!r.isTouch&&"none"!==s.css("display")){var e=j.getImageData(0,0,m,v);M.putImageData(e,0,0);var i=new paper.Raster(c),n=0!==i.getPixel(t.point).alpha;if(i.remove(),"static"===k&&f&&!window.editing_mode){var a=paper.project.hitTest(t.point,o);if(!a)return;"segment"===a.type?(u.css("cursor","default"),S.css("width","auto"),S.html(r.options.i18n.pointTip),S.show().css({left:t.point.x+(L-m)/2-S.width()/2-5,top:t.point.y+(D-v)/2-S.height()/2-35})):"stroke"===a.type?(u.css("cursor","default"),S.width("width","auto"),S.html(r.options.i18n.addPoint),S.show().css({left:t.point.x+(L-m)/2-S.width()/2-5,top:t.point.y+(D-v)/2-S.height()/2-35})):(u.css("cursor",n?"move":"default"),S.hide())}else S.hide(),u.css("cursor","default")}},i.onMouseDrag=function(e){if(a.addClass("ut-cut-hide-all-controls"),"static"===k){if(S.hide(),T){var i=(T.next.point.x-T.previous.point.x)/2,n=(T.next.point.y-T.previous.point.y)/2,s=Math.sqrt(Math.pow(T.next.point.x-T.previous.point.x,2)+Math.pow(T.next.point.y-T.previous.point.y,2)),r=Math.sqrt(Math.pow(T.next.point.y-T.previous.point.y,2)),o=r/s,u=.5*(s/2),l=.5*(o*s/2),c=Math.sqrt(Math.pow(u,2)-Math.pow(l,2)),d=c,p=l,f=-c,m=-l;T.point=e.point,T.handleOut.x=i>0?d:-d,T.handleOut.y=n>0?p:-p,T.handleIn.x=i>0?f:-f,T.handleIn.y=n>0?m:-m}I&&(g.position=g.position.add(e.delta))}else window.drawmode=!0,g.add(e.point);t(h).css("opacity","0.99"),setTimeout(function(){t(h).css("opacity","1")},5)},i.onMouseUp=function(){a.removeClass("ut-cut-hide-all-controls"),"draw"===k?(g.simplify(10),g.closed=!0,g.fullySelected=!1,g.selected=!0,k="static",window.drawmode=!1,3>g.segments.length?(g.removeSegments(),g.selected=!1,g.closed=!1,k="draw",window.drawmode=!0):(w.hide(),_.show(),x.show()),paper.view.draw(),g.fullySelected=!1,g.selected=!0):r.isTouch&&(window.editing_mode||(_.show(),w.hide(),x.show())),t(h).css("opacity","0.99"),setTimeout(function(){t(h).css("opacity","1")},5)},r.update=function(){i.activate(),t(h).css("opacity","0.99"),setTimeout(function(){t(h).css("opacity","1")},5)},r.isTouch||C.trigger("click"),r.options.segments.length?(g.removeSegments(),r.restorePath(r.options.segments),w.hide(),_.show(),x.show(),P.hide()):r.isTouch&&E.show(),paper.view.draw(),r.options.onReady()},console.log("!!!--load:"+e.imageData.url),O.src=e.imageData.url}),this},update:function(){return this.each(function(){this.utCut&&this.utCut.update()}),this},hide:function(){return this.each(function(){this.utCut&&this.utCut.hide()}),this},show:function(){return this.each(function(){this.utCut&&this.utCut.show()}),this},resize:function(){return this.each(function(){this.utCut&&this.utCut.resize()}),this}};t.fn.utCut=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):("object"!=typeof i&&i?t.error("Method "+i+" does not exist on $.utCut"):e.init.apply(this,arguments),this)}}(window.jQuery||window.Zepto||window.jq)}function loadJqueryEx(){(function(t){window.console||(window.console={},window.console.log||(window.console.log=function(){}),window.console.error||(window.console.error=function(){})),t.isMouseLeave||(t.isMouseLeave=function(t){return"mouseout"!=t.type?!1:t.toElement&&t.currentTarget?!(t.currentTarget===t.toElement||t.currentTarget.contains(t.toElement)):!0}),t.fn.fullWidth||(t.fn.fullWidth=function(){return parseFloat(this.css("width"))+parseFloat(this.css("paddingLeft"))+parseInt(this.css("paddingRight"))+parseFloat(this.css("borderLeftWidth"))+parseInt(this.css("borderRightWidth"))}),t.fn.fullHeight||(t.fn.fullHeight=function(){return parseFloat(this.css("height"))+parseFloat(this.css("paddingTop"))+parseInt(this.css("paddingBottom"))+parseFloat(this.css("borderTopWidth"))+parseInt(this.css("borderBottomWidth"))}),t.fn.posLeft||(t.fn.posLeft=function(t){return t===void 0?parseFloat(this.css("left")):(this.css("left",parseFloat(t)+"px"),this)}),t.fn.posTop||(t.fn.posTop=function(t){return t===void 0?parseFloat(this.css("top")):(this.css("top",parseFloat(t)+"px"),this)}),t.fn.scrollWidth||(t.fn.scrollWidth=function(){return this[0]?this[0].scrollWidth:0}),t.fn.scrollHeight||(t.fn.scrollHeight=function(){return this[0]?this[0].scrollHeight:0}),t.fn.clientWidth||(t.fn.clientWidth=function(){return this[0]?this[0].clientWidth:0}),t.fn.clientHeight||(t.fn.clientHeight=function(){return this[0]?this[0].clientHeight:0}),t.fn.getBounds||(t.fn.getBounds=function(e,i){var n={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:Number.NaN,height:Number.NaN};if(0>=this.length)return{left:0,top:0,right:0,bottom:0,width:0,height:0};(e===void 0||null===e||e===!1)&&(e=this);for(var s,r,o,a=0,u=0,l=0;this.length>l;l++){var h=t(this[l]),c=h.offset();c.left+=a,c.top+=u;var d=h.width(),p=h.height();("border-box"==h.css("boxSizing")||"border-box"==h.css("WebkitBoxSizing")||"border-box"==h.css("OBoxSizing")||"border-box"==h.css("msBoxSizing")||"border-box"==h.css("MozBoxSizing"))&&(d+=parseInt(h.css("borderLeftWidth"))+parseInt(h.css("borderRightWidth"))+parseInt(h.css("paddingLeft"))+parseInt(h.css("paddingRight")),p+=parseInt(h.css("borderTopWidth"))+parseInt(h.css("borderBottomWidth"))+parseInt(h.css("paddingTop"))+parseInt(h.css("paddingBottom")));var f=t(e).css("transform");f&&""!==f&&"none"!==f||(f=t(e).css("OTtransform")),f&&""!==f&&"none"!==f||(f=t(e).css("msTransform")),f&&""!==f&&"none"!==f||(f=t(e).css("MozTransform")),f&&""!==f&&"none"!==f||(f=t(e).css("WebkitTransform")),f&&"none"!=f&&(o=f.match(/matrix\([0-9e\.\,\s\+\-]+\)/)),o?(o[0]&&(o=o[0]),o&&(o=o.substr(7,f.length-8)),o&&(o=o.split(",")),o?(s=Math.abs(d*parseFloat(o[0]))+Math.abs(p*parseFloat(o[1])),r=Math.abs(d*parseFloat(o[2]))+Math.abs(p*parseFloat(o[3]))):(s=d,r=p)):(o=f.match(/rotateZ\(([0-9\.\+\-]+)rad\)/),o&&o[1]?(s=Math.abs(d*Math.cos(parseFloat(o[1])))+Math.abs(p*Math.sin(parseFloat(o[1]))),r=Math.abs(d*Math.sin(parseFloat(o[1])))+Math.abs(p*Math.cos(parseFloat(o[1])))):(s=d,r=p)),c.right=c.left+s,c.bottom=c.top+r,n.left>c.left&&(n.left=c.left),n.top>c.top&&(n.top=c.top),n.right<c.right&&(n.right=c.right),n.bottom<c.bottom&&(n.bottom=c.bottom)}if(n.width=n.right-n.left,n.height=n.bottom-n.top,i){var g=t(i).offset();n.left-=g.left,n.right-=g.left,n.top-=g.top,n.bottom-=g.top}return n}),t.isHidden||(t.isHidden=function(e){var i=e.offsetWidth,n=e.offsetHeight;return 0===i&&0===n||"none"===(e.style&&e.style.display||t(e).css("display"))}),t.isVisible||(t.isVisible=function(e){return!t.isHidden(e)}),t.fn.filterByVisible||(t.fn.filterByVisible=function(){for(var e=t([]),i=0;this.length>i;i++)t.isVisible(this[i])&&e.push(this[i]);return e}),t.fn.onExClick||(t.fn.onExClick=function(e){if(t.browser.mobile){var i=function(){this.removeEventListener("touchmove",i),this.removeEventListener("touchend",n),this.removeEventListener("touchcancel",s)},n=function(t){this.removeEventListener("touchmove",i),this.removeEventListener("touchend",n),this.removeEventListener("touchcancel",s),e&&e.call(this,t)},s=function(){this.removeEventListener("touchmove",i),this.removeEventListener("touchend",n),this.removeEventListener("touchcancel",s)},r=function(){this.addEventListener("touchmove",i,!1),this.addEventListener("touchend",n,!1),this.addEventListener("touchcancel",s,!1)};e?this.each(function(){this.addEventListener("touchstart",r,!0)}):this.each(function(){this.removeEventListener("touchstart",r)})}else e?this.on("click",e):this.off("click")}),jQuery.browser={browserName:"",browserVersion:0,mozilla:!1,webkit:!1,msie:!1,safari:!1,opera:!1,iPhone:!1,iPod:!1,iPad:!1,Android:!1,mobile:!1,urMobileApp:!1,isTouchDevice:!1,detect:function(){var t,e,i=!1,n=[{name:"Chrome",key:"Chrome",ver:"Chrome/",check:6},{name:"Firefox",key:"Firefox",ver:"Firefox/",check:4},{name:"Opera",key:"Opera",ver:"Version/",check:10.6},{name:"MSIE",key:"MSIE",ver:"MSIE ",check:9},{name:"Safari",key:"Safari",ver:"Version/",check:5}];for(t=0;null!==n[t];t++)if(-1!=navigator.userAgent.indexOf(n[t].key)){this.browserName=n[t].name,this.msie="MSIE"==this.browserName,this.mozilla="Firefox"==this.browserName,this.safari="Safari"==this.browserName,this.webkit="Chrome"==this.browserName||this.safari,this.opera="Opera"==this.browserName,e=navigator.userAgent.indexOf(n[t].ver),e>=0&&(this.browserVersion=parseFloat(navigator.userAgent.substr(e+n[t].ver.length))),this.browserVersion>=n[t].check&&(i=!0);break}this.urMobileApp=/(urturn)/i.test(navigator.userAgent),this.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPod=-1!=navigator.userAgent.toLowerCase().indexOf("ipod"),this.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),this.Android=-1!=navigator.userAgent.toLowerCase().indexOf("android");var s=-1!=navigator.userAgent.toLowerCase().indexOf("mobile");this.isTouchDevice="ontouchstart"in document.documentElement,this.mobile=!!(this.iPhone||this.iPod||this.iPad||this.Android||s||this.isTouchDevice||this.urMobileApp)}},jQuery.browser.detect(),t.fn.alterClass||(t.fn.alterClass=function(t,e){var i=this;if(-1===t.indexOf("*"))return i.removeClass(t),e?i.addClass(e):i;var n=RegExp("\\s"+t.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");return i.each(function(t,e){for(var i=" "+e.className+" ";n.test(i);)i=i.replace(n," ");e.className=i.trim()}),e?i.addClass(e):i}),t.fn.has3d||(t.fn.has3d=function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var n in i)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[n]));return document.body.removeChild(e),void 0!==t&&t.length>0&&"none"!==t})})(window.jq||window.Zepto||window.jQuery)}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=te.type(t);return"function"===i||te.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(te.isFunction(e))return te.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return te.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ae.test(e))return te.filter(e,t,i);e=te.filter(e,t)}return te.grep(t,function(t){return G.call(e,t)>=0!==i})}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function r(t){var e=fe[t]={};return te.each(t.match(pe)||[],function(t,i){e[i]=!0}),e}function o(){Q.removeEventListener("DOMContentLoaded",o,!1),t.removeEventListener("load",o,!1),te.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=te.expando+Math.random()}function u(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(we,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:_e.test(i)?te.parseJSON(i):i}catch(s){}ye.set(t,e,i)}else i=void 0;return i}function l(){return!0}function h(){return!1}function c(){try{return Q.activeElement}catch(t){}}function d(t,e){return te.nodeName(t,"table")&&te.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Ne.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var i=0,n=t.length;n>i;i++)ve.set(t[i],"globalEval",!e||ve.get(e[i],"globalEval"))}function m(t,e){var i,n,s,r,o,a,u,l;if(1===e.nodeType){if(ve.hasData(t)&&(r=ve.access(t),o=ve.set(e,r),l=r.events)){delete o.handle,o.events={};for(s in l)for(i=0,n=l[s].length;n>i;i++)te.event.add(e,s,l[s][i])}ye.hasData(t)&&(a=ye.access(t),u=te.extend({},a),ye.set(e,u))}}function v(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&te.nodeName(t,e)?te.merge([t],i):i}function y(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Ce.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function _(e,i){var n=te(i.createElement(e)).appendTo(i.body),s=t.getDefaultComputedStyle?t.getDefaultComputedStyle(n[0]).display:te.css(n[0],"display");return n.detach(),s}function w(t){var e=Q,i=Re[t];return i||(i=_(t,e),"none"!==i&&i||(Fe=(Fe||te("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Fe[0].contentDocument,e.write(),e.close(),i=_(t,e),Fe.detach()),Re[t]=i),i}function b(t,e,i){var n,s,r,o,a=t.style;return i=i||He(t),i&&(o=i.getPropertyValue(e)||i[e]),i&&(""!==o||te.contains(t.ownerDocument,t)||(o=te.style(t,e)),qe.test(o)&&Ve.test(e)&&(n=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=s,a.maxWidth=r)),void 0!==o?o+"":o}function x(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,s=Je.length;s--;)if(e=Je[s]+i,e in t)return e;return n}function C(t,e,i){var n=We.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function S(t,e,i,n,s){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,o=0;4>r;r+=2)"margin"===i&&(o+=te.css(t,i+xe[r],!0,s)),n?("content"===i&&(o-=te.css(t,"padding"+xe[r],!0,s)),"margin"!==i&&(o-=te.css(t,"border"+xe[r]+"Width",!0,s))):(o+=te.css(t,"padding"+xe[r],!0,s),"padding"!==i&&(o+=te.css(t,"border"+xe[r]+"Width",!0,s)));return o}function P(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,r=He(t),o="border-box"===te.css(t,"boxSizing",!1,r);if(0>=s||null==s){if(s=b(t,e,r),(0>s||null==s)&&(s=t.style[e]),qe.test(s))return s;n=o&&(Z.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+S(t,e,i||(o?"border":"content"),n,r)+"px"}function E(t,e){for(var i,n,s,r=[],o=0,a=t.length;a>o;o++)n=t[o],n.style&&(r[o]=ve.get(n,"olddisplay"),i=n.style.display,e?(r[o]||"none"!==i||(n.style.display=""),""===n.style.display&&ke(n)&&(r[o]=ve.access(n,"olddisplay",w(n.nodeName)))):r[o]||(s=ke(n),(i&&"none"!==i||!s)&&ve.set(n,"olddisplay",s?i:te.css(n,"display"))));for(o=0;a>o;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[o]||"":"none"));return t}function T(t,e,i,n,s){return new T.prototype.init(t,e,i,n,s)}function I(){return setTimeout(function(){Ye=void 0}),Ye=te.now()}function A(t,e){var i,n=0,s={height:t};for(e=e?1:0;4>n;n+=2-e)i=xe[n],s["margin"+i]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function j(t,e,i){for(var n,s=(ii[e]||[]).concat(ii["*"]),r=0,o=s.length;o>r;r++)if(n=s[r].call(i,e,t))return n}function M(t,e,i){var n,s,r,o,a,u,l,h=this,c={},d=t.style,p=t.nodeType&&ke(t),f=ve.get(t,"fxshow");i.queue||(a=te._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,te.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],l=te.css(t,"display"),"none"===l&&(l=w(t.nodeName)),"inline"===l&&"none"===te.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],Qe.exec(s)){if(delete e[n],r=r||"toggle"===s,s===(p?"hide":"show")){if("show"!==s||!f||void 0===f[n])continue;p=!0}c[n]=f&&f[n]||te.style(t,n)}if(!te.isEmptyObject(c)){f?"hidden"in f&&(p=f.hidden):f=ve.access(t,"fxshow",{}),r&&(f.hidden=!p),p?te(t).show():h.done(function(){te(t).hide()}),h.done(function(){var e;ve.remove(t,"fxshow");for(e in c)te.style(t,e,c[e])});for(n in c)o=j(p?f[n]:0,n,h),n in f||(f[n]=o.start,p&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function L(t,e){var i,n,s,r,o;for(i in t)if(n=te.camelCase(i),s=e[n],r=t[i],te.isArray(r)&&(s=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),o=te.cssHooks[n],o&&"expand"in o){r=o.expand(r),delete t[n];for(i in r)i in t||(t[i]=r[i],e[i]=s)}else e[n]=s}function D(t,e,i){var n,s,r=0,o=ei.length,a=te.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var e=Ye||I(),i=Math.max(0,l.startTime+l.duration-e),n=i/l.duration||0,r=1-n,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(r);return a.notifyWith(t,[l,r,i]),1>r&&u?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:te.extend({},e),opts:te.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Ye||I(),duration:i.duration,tweens:[],createTween:function(e,i){var n=te.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)l.tweens[i].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),h=l.props;for(L(h,l.opts.specialEasing);o>r;r++)if(n=ei[r].call(l,t,h,l.opts))return n;return te.map(h,j,l),te.isFunction(l.opts.start)&&l.opts.start.call(t,l),te.fx.timer(te.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function B(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,r=e.toLowerCase().match(pe)||[];if(te.isFunction(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function N(t,e,i,n){function s(a){var u;return r[a]=!0,te.each(t[a]||[],function(t,a){var l=a(e,i,n);return"string"!=typeof l||o||r[l]?o?!(u=l):void 0:(e.dataTypes.unshift(l),s(l),!1)}),u}var r={},o=t===bi;return s(e.dataTypes[0])||!r["*"]&&s("*")}function O(t,e){var i,n,s=te.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&te.extend(!0,t,n),t}function z(t,e,i){for(var n,s,r,o,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){u.unshift(s);break}if(u[0]in i)r=u[0];else{for(s in i){if(!u[0]||t.converters[s+" "+u[0]]){r=s;break}o||(o=s)}r=r||o}return r?(r!==u[0]&&u.unshift(r),i[r]):void 0}function F(t,e,i,n){var s,r,o,a,u,l={},h=t.dataTypes.slice();if(h[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(r=h.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!u&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=r,r=h.shift())if("*"===r)r=u;else if("*"!==u&&u!==r){if(o=l[u+" "+r]||l["* "+r],!o)for(s in l)if(a=s.split(" "),a[1]===r&&(o=l[u+" "+a[0]]||l["* "+a[0]])){o===!0?o=l[s]:l[s]!==!0&&(r=a[0],h.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+u+" to "+r}}}return{state:"success",data:e}}function R(t,e,i,n){var s;if(te.isArray(e))te.each(e,function(e,s){i||Si.test(t)?n(t,s):R(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==te.type(e))n(t,e);else for(s in e)R(t+"["+s+"]",e[s],i,n)}function V(t){return te.isWindow(t)?t:9===t.nodeType&&t.defaultView}var q=[],H=q.slice,U=q.concat,W=q.push,G=q.indexOf,$={},X=$.toString,J=$.hasOwnProperty,Y="".trim,Z={},Q=t.document,K="2.1.0",te=function(t,e){return new te.fn.init(t,e)},ee=/^-ms-/,ie=/-([\da-z])/gi,ne=function(t,e){return e.toUpperCase()};te.fn=te.prototype={jquery:K,constructor:te,selector:"",length:0,toArray:function(){return H.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:H.call(this)},pushStack:function(t){var e=te.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return te.each(this,t,e)},map:function(t){return this.pushStack(te.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(H.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:q.sort,splice:q.splice},te.extend=te.fn.extend=function(){var t,e,i,n,s,r,o=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||te.isFunction(o)||(o={}),a===u&&(o=this,a--);u>a;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],n=t[e],o!==n&&(l&&n&&(te.isPlainObject(n)||(s=te.isArray(n)))?(s?(s=!1,r=i&&te.isArray(i)?i:[]):r=i&&te.isPlainObject(i)?i:{},o[e]=te.extend(l,r,n)):void 0!==n&&(o[e]=n));return o},te.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw Error(t)},noop:function(){},isFunction:function(t){return"function"===te.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isPlainObject:function(t){if("object"!==te.type(t)||t.nodeType||te.isWindow(t))return!1;try{if(t.constructor&&!J.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?$[X.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=te.trim(t),t&&(1===t.indexOf("use strict")?(e=Q.createElement("script"),e.text=t,Q.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ie,ne)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,r=0,o=t.length,a=i(t);if(n){if(a)for(;o>r&&(s=e.apply(t[r],n),s!==!1);r++);else for(r in t)if(s=e.apply(t[r],n),s===!1)break}else if(a)for(;o>r&&(s=e.call(t[r],r,t[r]),s!==!1);r++);else for(r in t)if(s=e.call(t[r],r,t[r]),s===!1)break;return t},trim:function(t){return null==t?"":Y.call(t)},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?te.merge(n,"string"==typeof t?[t]:t):W.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:G.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],r=0,o=t.length,a=!i;o>r;r++)n=!e(t[r],r),n!==a&&s.push(t[r]);return s},map:function(t,e,n){var s,r=0,o=t.length,a=i(t),u=[];if(a)for(;o>r;r++)s=e(t[r],r,n),null!=s&&u.push(s);else for(r in t)s=e(t[r],r,n),null!=s&&u.push(s);return U.apply([],u)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(i=t[e],e=t,t=i),te.isFunction(t)?(n=H.call(arguments,2),s=function(){return t.apply(e||this,n.concat(H.call(arguments)))},s.guid=t.guid=t.guid||te.guid++,s):void 0},now:Date.now,support:Z}),te.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){$["[object "+e+"]"]=e.toLowerCase()});var se=function(t){function e(t,e,i,n){var s,r,o,a,u,l,c,f,g,m;if((e?e.ownerDocument||e:R)!==M&&j(e),e=e||M,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(D&&!n){if(s=ye.exec(t))if(o=s[1]){if(9===a){if(r=e.getElementById(o),!r||!r.parentNode)return i;if(r.id===o)return i.push(r),i}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(o))&&z(e,r)&&r.id===o)return i.push(r),i}else{if(s[2])return K.apply(i,e.getElementsByTagName(t)),i;if((o=s[3])&&k.getElementsByClassName&&e.getElementsByClassName)return K.apply(i,e.getElementsByClassName(o)),i}if(k.qsa&&(!B||!B.test(t))){if(f=c=F,g=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=d(t),(c=e.getAttribute("id"))?f=c.replace(we,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",u=l.length;u--;)l[u]=f+p(l[u]);g=_e.test(t)&&h(e.parentNode)||e,m=l.join(",")}if(m)try{return K.apply(i,g.querySelectorAll(m)),i}catch(v){}finally{c||e.removeAttribute("id")}}}return b(t.replace(ue,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>C.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[F]=!0,t}function s(t){var e=M.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var i=t.split("|"),n=t.length;n--;)C.attrHandle[i[n]]=e}function o(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function u(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return n(function(e){return e=+e,n(function(i,n){for(var s,r=t([],i.length,e),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))})})}function h(t){return t&&typeof t.getElementsByTagName!==$&&t}function c(){}function d(t,i){var n,s,r,o,a,u,l,h=U[t+" "];if(h)return i?0:h.slice(0);for(a=t,u=[],l=C.preFilter;a;){(!n||(s=le.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),u.push(r=[])),n=!1,(s=he.exec(a))&&(n=s.shift(),r.push({value:n,type:s[0].replace(ue," ")}),a=a.slice(n.length));for(o in C.filter)!(s=fe[o].exec(a))||l[o]&&!(s=l[o](s))||(n=s.shift(),r.push({value:n,type:o,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):U(t,u).slice(0)}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,s=i&&"parentNode"===n,r=q++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r)}:function(e,i,o){var a,u,l=[V,r];if(o){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(u=e[F]||(e[F]={}),(a=u[n])&&a[0]===V&&a[1]===r)return l[2]=a[2];if(u[n]=l,l[2]=t(e,i,o))return!0}}}function g(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function m(t,e,i,n,s){for(var r,o=[],a=0,u=t.length,l=null!=e;u>a;a++)(r=t[a])&&(!i||i(r,n,s))&&(o.push(r),l&&e.push(a));
return o}function v(t,e,i,s,r,o){return s&&!s[F]&&(s=v(s)),r&&!r[F]&&(r=v(r,o)),n(function(n,o,a,u){var l,h,c,d=[],p=[],f=o.length,g=n||w(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?g:m(g,d,t,a,u),y=i?r||(n?t:f||s)?[]:o:v;if(i&&i(v,y,a,u),s)for(l=m(y,p),s(l,[],a,u),h=l.length;h--;)(c=l[h])&&(y[p[h]]=!(v[p[h]]=c));if(n){if(r||t){if(r){for(l=[],h=y.length;h--;)(c=y[h])&&l.push(v[h]=c);r(null,y=[],l,u)}for(h=y.length;h--;)(c=y[h])&&(l=r?ee.call(n,c):d[h])>-1&&(n[l]=!(o[l]=c))}}else y=m(y===o?y.splice(f,y.length):y),r?r(null,o,y,u):K.apply(o,y)})}function y(t){for(var e,i,n,s=t.length,r=C.relative[t[0].type],o=r||C.relative[" "],a=r?1:0,u=f(function(t){return t===e},o,!0),l=f(function(t){return ee.call(e,t)>-1},o,!0),h=[function(t,i,n){return!r&&(n||i!==T)||((e=i).nodeType?u(t,i,n):l(t,i,n))}];s>a;a++)if(i=C.relative[t[a].type])h=[f(g(h),i)];else{if(i=C.filter[t[a].type].apply(null,t[a].matches),i[F]){for(n=++a;s>n&&!C.relative[t[n].type];n++);return v(a>1&&g(h),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ue,"$1"),i,n>a&&y(t.slice(a,n)),s>n&&y(t=t.slice(n)),s>n&&p(t))}h.push(i)}return g(h)}function _(t,i){var s=i.length>0,r=t.length>0,o=function(n,o,a,u,l){var h,c,d,p=0,f="0",g=n&&[],v=[],y=T,_=n||r&&C.find.TAG("*",l),w=V+=null==y?1:Math.random()||.1,b=_.length;for(l&&(T=o!==M&&o);f!==b&&null!=(h=_[f]);f++){if(r&&h){for(c=0;d=t[c++];)if(d(h,o,a)){u.push(h);break}l&&(V=w)}s&&((h=!d&&h)&&p--,n&&g.push(h))}if(p+=f,s&&f!==p){for(c=0;d=i[c++];)d(g,v,o,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=Z.call(u));v=m(v)}K.apply(u,v),l&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(u)}return l&&(V=w,T=y),g};return s?n(o):o}function w(t,i,n){for(var s=0,r=i.length;r>s;s++)e(t,i[s],n);return n}function b(t,e,i,n){var s,r,o,a,u,l=d(t);if(!n&&1===l.length){if(r=l[0]=l[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&k.getById&&9===e.nodeType&&D&&C.relative[r[1].type]){if(e=(C.find.ID(o.matches[0].replace(be,xe),e)||[])[0],!e)return i;t=t.slice(r.shift().value.length)}for(s=fe.needsContext.test(t)?0:r.length;s--&&(o=r[s],!C.relative[a=o.type]);)if((u=C.find[a])&&(n=u(o.matches[0].replace(be,xe),_e.test(r[0].type)&&h(e.parentNode)||e))){if(r.splice(s,1),t=n.length&&p(r),!t)return K.apply(i,n),i;break}}return E(t,l)(n,e,!D,i,_e.test(t)&&h(e.parentNode)||e),i}var x,k,C,S,P,E,T,I,A,j,M,L,D,B,N,O,z,F="sizzle"+-new Date,R=t.document,V=0,q=0,H=i(),U=i(),W=i(),G=function(t,e){return t===e&&(A=!0),0},$="undefined",X=1<<31,J={}.hasOwnProperty,Y=[],Z=Y.pop,Q=Y.push,K=Y.push,te=Y.slice,ee=Y.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=se.replace("w","w#"),oe="\\["+ne+"*("+se+")"+ne+"*(?:([*^$|!~]?=)"+ne+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+re+")|)|)"+ne+"*\\]",ae=":("+se+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+oe.replace(3,8)+")*)|.*)\\)|)",ue=RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=RegExp("^"+ne+"*,"+ne+"*"),he=RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=RegExp(ae),pe=RegExp("^"+re+"$"),fe={ID:RegExp("^#("+se+")"),CLASS:RegExp("^\\.("+se+")"),TAG:RegExp("^("+se.replace("w","w*")+")"),ATTR:RegExp("^"+oe),PSEUDO:RegExp("^"+ae),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:RegExp("^(?:"+ie+")$","i"),needsContext:RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/[+~]/,we=/'|\\/g,be=RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),xe=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{K.apply(Y=te.call(R.childNodes),R.childNodes),Y[R.childNodes.length].nodeType}catch(ke){K={apply:Y.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}k=e.support={},P=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},j=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:R,n=i.defaultView;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,L=i.documentElement,D=!P(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){j()},!1):n.attachEvent&&n.attachEvent("onunload",function(){j()})),k.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),k.getElementsByTagName=s(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),k.getElementsByClassName=ve.test(i.getElementsByClassName)&&s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),k.getById=s(function(t){return L.appendChild(t).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),k.getById?(C.find.ID=function(t,e){if(typeof e.getElementById!==$&&D){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},C.filter.ID=function(t){var e=t.replace(be,xe);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(be,xe);return function(t){var i=typeof t.getAttributeNode!==$&&t.getAttributeNode("id");return i&&i.value===e}}),C.find.TAG=k.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==$?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},C.find.CLASS=k.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==$&&D?e.getElementsByClassName(t):void 0},N=[],B=[],(k.qsa=ve.test(i.querySelectorAll))&&(s(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&B.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||B.push("\\["+ne+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||B.push(":checked")}),s(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&B.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),B.push(",.*:")})),(k.matchesSelector=ve.test(O=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&s(function(t){k.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),N.push("!=",ae)}),B=B.length&&RegExp(B.join("|")),N=N.length&&RegExp(N.join("|")),e=ve.test(L.compareDocumentPosition),z=e||ve.test(L.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return A=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!k.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===R&&z(R,t)?-1:e===i||e.ownerDocument===R&&z(R,e)?1:I?ee.call(I,t)-ee.call(I,e):0:4&n?-1:1)}:function(t,e){if(t===e)return A=!0,0;var n,s=0,r=t.parentNode,a=e.parentNode,u=[t],l=[e];if(!r||!a)return t===i?-1:e===i?1:r?-1:a?1:I?ee.call(I,t)-ee.call(I,e):0;if(r===a)return o(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;u[s]===l[s];)s++;return s?o(u[s],l[s]):u[s]===R?-1:l[s]===R?1:0},i):M},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==M&&j(t),i=i.replace(ce,"='$1']"),!(!k.matchesSelector||!D||N&&N.test(i)||B&&B.test(i)))try{var n=O.call(t,i);if(n||k.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&j(t),z(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&j(t);var i=C.attrHandle[e.toLowerCase()],n=i&&J.call(C.attrHandle,e.toLowerCase())?i(t,e,!D):void 0;return void 0!==n?n:k.attributes||!D?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(A=!k.detectDuplicates,I=!k.sortStable&&t.slice(0),t.sort(G),A){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return I=null,t},S=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=S(e);return i},C=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(be,xe),t[3]=(t[4]||t[5]||"").replace(be,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:i&&de.test(i)&&(e=d(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(be,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==$&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var r=e.attr(s,t);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,u){var l,h,c,d,p,f,g=r!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!u&&!a;if(m){if(r){for(;g;){for(c=e;c=c[g];)if(a?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(h=m[F]||(m[F]={}),l=h[t]||[],p=l[0]===V&&l[1],d=l[0]===V&&l[2],c=p&&m.childNodes[p];c=++p&&c&&c[g]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){h[t]=[V,p,d];break}}else if(y&&(l=(e[F]||(e[F]={}))[t])&&l[0]===V)d=l[1];else for(;(c=++p&&c&&c[g]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++d||(y&&((c[F]||(c[F]={}))[t]=[V,d]),c!==e)););return d-=s,d===n||0===d%n&&d/n>=0}}},PSEUDO:function(t,i){var s,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[F]?r(i):r.length>1?(s=[t,t,"",i],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=r(t,i),o=s.length;o--;)n=ee.call(t,s[o]),t[n]=!(e[n]=s[o])}):function(t){return r(t,0,s)}):r}},pseudos:{not:n(function(t){var e=[],i=[],s=E(t.replace(ue,"$1"));return s[F]?n(function(t,e,i,n){for(var r,o=s(t,null,n,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,s(e,null,r,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:n(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(be,xe).toLowerCase(),function(e){var i;do if(i=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===L},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(6>t.nodeType)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[0>i?i+e:i]}),even:l(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:l(function(t,e,i){for(var n=0>i?i+e:i;e>++n;)t.push(n);return t})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=u(x);return c.prototype=C.filters=C.pseudos,C.setFilters=new c,E=e.compile=function(t,e){var i,n=[],s=[],r=W[t+" "];if(!r){for(e||(e=d(t)),i=e.length;i--;)r=y(e[i]),r[F]?n.push(r):s.push(r);r=W(t,_(s,n))}return r},k.sortStable=F.split("").sort(G).join("")===F,k.detectDuplicates=!!A,j(),k.sortDetached=s(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),k.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||r(ie,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);te.find=se,te.expr=se.selectors,te.expr[":"]=te.expr.pseudos,te.unique=se.uniqueSort,te.text=se.getText,te.isXMLDoc=se.isXML,te.contains=se.contains;var re=te.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;te.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?te.find.matchesSelector(n,t)?[n]:[]:te.find.matches(t,te.grep(e,function(t){return 1===t.nodeType}))},te.fn.extend({find:function(t){var e,i=this.length,n=[],s=this;if("string"!=typeof t)return this.pushStack(te(t).filter(function(){for(e=0;i>e;e++)if(te.contains(s[e],this))return!0}));for(e=0;i>e;e++)te.find(t,s[e],n);return n=this.pushStack(i>1?te.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&re.test(t)?te(t):t||[],!1).length}});var ue,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,he=te.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:le.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||ue).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof te?e[0]:e,te.merge(this,te.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:Q,!0)),oe.test(i[1])&&te.isPlainObject(e))for(i in e)te.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=Q.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):te.isFunction(t)?ue.ready!==void 0?ue.ready(t):t(te):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),te.makeArray(t,this))};he.prototype=te.fn,ue=te(Q);var ce=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};te.extend({dir:function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&te(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),te.fn.extend({has:function(t){var e=te(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(te.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,r=[],o=re.test(t)||"string"!=typeof t?te(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(11>i.nodeType&&(o?o.index(i)>-1:1===i.nodeType&&te.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?te.unique(r):r)},index:function(t){return t?"string"==typeof t?G.call(te(t),this[0]):G.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(te.unique(te.merge(this.get(),te(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),te.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return te.dir(t,"parentNode")},parentsUntil:function(t,e,i){return te.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return te.dir(t,"nextSibling")},prevAll:function(t){return te.dir(t,"previousSibling")},nextUntil:function(t,e,i){return te.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return te.dir(t,"previousSibling",i)},siblings:function(t){return te.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return te.sibling(t.firstChild)},contents:function(t){return t.contentDocument||te.merge([],t.childNodes)}},function(t,e){te.fn[t]=function(i,n){var s=te.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=te.filter(n,s)),this.length>1&&(de[t]||te.unique(s),ce.test(t)&&s.reverse()),this.pushStack(s)}});var pe=/\S+/g,fe={};te.Callbacks=function(t){t="string"==typeof t?fe[t]||r(t):te.extend({},t);var e,i,n,s,o,a,u=[],l=!t.once&&[],h=function(r){for(e=t.memory&&r,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(r[0],r[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,u&&(l?l.length&&h(l.shift()):e?u=[]:c.disable())},c={add:function(){if(u){var i=u.length;!function r(e){te.each(e,function(e,i){var n=te.type(i);"function"===n?t.unique&&c.has(i)||u.push(i):i&&i.length&&"string"!==n&&r(i)})}(arguments),n?o=u.length:e&&(s=i,h(e))}return this},remove:function(){return u&&te.each(arguments,function(t,e){for(var i;(i=te.inArray(e,u,i))>-1;)u.splice(i,1),n&&(o>=i&&o--,a>=i&&a--)}),this},has:function(t){return t?te.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],o=0,this},disable:function(){return u=l=e=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,e||c.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!u||i&&!l||(e=e||[],e=[t,e.slice?e.slice():e],n?l.push(e):h(e)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},te.extend({Deferred:function(t){var e=[["resolve","done",te.Callbacks("once memory"),"resolved"],["reject","fail",te.Callbacks("once memory"),"rejected"],["notify","progress",te.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return te.Deferred(function(i){te.each(e,function(e,r){var o=te.isFunction(t[e])&&t[e];s[r[1]](function(){var t=o&&o.apply(this,arguments);t&&te.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r[0]+"With"](this===n?i.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?te.extend(t,n):n}},s={};return n.pipe=n.then,te.each(e,function(t,r){var o=r[2],a=r[3];n[r[1]]=o.add,a&&o.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?n:this,arguments),this},s[r[0]+"With"]=o.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,r=H.call(arguments),o=r.length,a=1!==o||t&&te.isFunction(t.promise)?o:0,u=1===a?t:te.Deferred(),l=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?H.call(arguments):s,n===e?u.notifyWith(i,n):--a||u.resolveWith(i,n)}};if(o>1)for(e=Array(o),i=Array(o),n=Array(o);o>s;s++)r[s]&&te.isFunction(r[s].promise)?r[s].promise().done(l(s,n,r)).fail(u.reject).progress(l(s,i,e)):--a;return a||u.resolveWith(n,r),u.promise()}});var ge;te.fn.ready=function(t){return te.ready.promise().done(t),this},te.extend({isReady:!1,readyWait:1,holdReady:function(t){t?te.readyWait++:te.ready(!0)},ready:function(t){(t===!0?--te.readyWait:te.isReady)||(te.isReady=!0,t!==!0&&--te.readyWait>0||(ge.resolveWith(Q,[te]),te.fn.trigger&&te(Q).trigger("ready").off("ready")))}}),te.ready.promise=function(e){return ge||(ge=te.Deferred(),"complete"===Q.readyState?setTimeout(te.ready):(Q.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",o,!1))),ge.promise(e)},te.ready.promise();var me=te.access=function(t,e,i,n,s,r,o){var a=0,u=t.length,l=null==i;if("object"===te.type(i)){s=!0;for(a in i)te.access(t,e,a,i[a],!0,r,o)}else if(void 0!==n&&(s=!0,te.isFunction(n)||(o=!0),l&&(o?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(te(t),i)})),e))for(;u>a;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return s?t:l?e.call(t):u?e(t[0],i):r};te.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=te.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,te.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,s=this.key(t),r=this.cache[s];if("string"==typeof e)r[e]=i;else if(te.isEmptyObject(r))te.extend(this.cache[s],e);else for(n in e)r[n]=e[n];return r},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,te.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,s,r=this.key(t),o=this.cache[r];if(void 0===e)this.cache[r]={};else{te.isArray(e)?n=e.concat(e.map(te.camelCase)):(s=te.camelCase(e),e in o?n=[e,s]:(n=s,n=n in o?[n]:n.match(pe)||[])),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(t){return!te.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ve=new a,ye=new a,_e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;te.extend({hasData:function(t){return ye.hasData(t)||ve.hasData(t)},data:function(t,e,i){return ye.access(t,e,i)},removeData:function(t,e){ye.remove(t,e)},_data:function(t,e,i){return ve.access(t,e,i)},_removeData:function(t,e){ve.remove(t,e)}}),te.fn.extend({data:function(t,e){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(s=ye.get(r),1===r.nodeType&&!ve.get(r,"hasDataAttrs"))){for(i=o.length;i--;)n=o[i].name,0===n.indexOf("data-")&&(n=te.camelCase(n.slice(5)),u(r,n,s[n]));ve.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){ye.set(this,t)}):me(this,function(e){var i,n=te.camelCase(t);if(r&&void 0===e){if(i=ye.get(r,t),void 0!==i)return i;if(i=ye.get(r,n),void 0!==i)return i;if(i=u(r,n,void 0),void 0!==i)return i}else this.each(function(){var i=ye.get(this,n);ye.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&ye.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ye.remove(this,t)})}}),te.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=ve.get(t,e),i&&(!n||te.isArray(i)?n=ve.access(t,e,te.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=te.queue(t,e),n=i.length,s=i.shift(),r=te._queueHooks(t,e),o=function(){te.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete r.stop,s.call(t,o,r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ve.get(t,i)||ve.access(t,i,{empty:te.Callbacks("once memory").add(function(){ve.remove(t,[e+"queue",i])})})}}),te.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),i>arguments.length?te.queue(this[0],t):void 0===e?this:this.each(function(){var i=te.queue(this,t,e);te._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&te.dequeue(this,t)})},dequeue:function(t){return this.each(function(){te.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=te.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)i=ve.get(r[o],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=["Top","Right","Bottom","Left"],ke=function(t,e){return t=e||t,"none"===te.css(t,"display")||!te.contains(t.ownerDocument,t)},Ce=/^(?:checkbox|radio)$/i;!function(){var t=Q.createDocumentFragment(),e=t.appendChild(Q.createElement("div"));e.innerHTML="<input type='radio' checked='checked' name='t'/>",Z.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Se="undefined";Z.focusinBubbles="onfocusin"in t;var Pe=/^key/,Ee=/^(?:mouse|contextmenu)|click/,Te=/^(?:focusinfocus|focusoutblur)$/,Ie=/^([^.]*)(?:\.(.+)|)$/;te.event={global:{},add:function(t,e,i,n,s){var r,o,a,u,l,h,c,d,p,f,g,m=ve.get(t);if(m)for(i.handler&&(r=i,i=r.handler,s=r.selector),i.guid||(i.guid=te.guid++),(u=m.events)||(u=m.events={}),(o=m.handle)||(o=m.handle=function(e){return typeof te!==Se&&te.event.triggered!==e.type?te.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pe)||[""],l=e.length;l--;)a=Ie.exec(e[l])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(c=te.event.special[p]||{},p=(s?c.delegateType:c.bindType)||p,c=te.event.special[p]||{},h=te.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&te.expr.match.needsContext.test(s),namespace:f.join(".")},r),(d=u[p])||(d=u[p]=[],d.delegateCount=0,c.setup&&c.setup.call(t,n,f,o)!==!1||t.addEventListener&&t.addEventListener(p,o,!1)),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,h):d.push(h),te.event.global[p]=!0)},remove:function(t,e,i,n,s){var r,o,a,u,l,h,c,d,p,f,g,m=ve.hasData(t)&&ve.get(t);if(m&&(u=m.events)){for(e=(e||"").match(pe)||[""],l=e.length;l--;)if(a=Ie.exec(e[l])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(c=te.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,d=u[p]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=d.length;r--;)h=d[r],!s&&g!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(r,1),h.selector&&d.delegateCount--,c.remove&&c.remove.call(t,h));o&&!d.length&&(c.teardown&&c.teardown.call(t,f,m.handle)!==!1||te.removeEvent(t,p,m.handle),delete u[p])}else for(p in u)te.event.remove(t,p+e[l],i,n,!0);te.isEmptyObject(u)&&(delete m.handle,ve.remove(t,"events"))}},trigger:function(e,i,n,s){var r,o,a,u,l,h,c,d=[n||Q],p=J.call(e,"type")?e.type:e,f=J.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!Te.test(p+te.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),l=0>p.indexOf(":")&&"on"+p,e=e[te.expando]?e:new te.Event(p,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:te.makeArray(i,[e]),c=te.event.special[p]||{},s||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!s&&!c.noBubble&&!te.isWindow(n)){for(u=c.delegateType||p,Te.test(u+p)||(o=o.parentNode);o;o=o.parentNode)d.push(o),a=o;a===(n.ownerDocument||Q)&&d.push(a.defaultView||a.parentWindow||t)}for(r=0;(o=d[r++])&&!e.isPropagationStopped();)e.type=r>1?u:c.bindType||p,h=(ve.get(o,"events")||{})[e.type]&&ve.get(o,"handle"),h&&h.apply(o,i),h=l&&o[l],h&&h.apply&&te.acceptData(o)&&(e.result=h.apply(o,i),e.result===!1&&e.preventDefault());return e.type=p,s||e.isDefaultPrevented()||c._default&&c._default.apply(d.pop(),i)!==!1||!te.acceptData(n)||l&&te.isFunction(n[p])&&!te.isWindow(n)&&(a=n[l],a&&(n[l]=null),te.event.triggered=p,n[p](),te.event.triggered=void 0,a&&(n[l]=a)),e.result}},dispatch:function(t){t=te.event.fix(t);var e,i,n,s,r,o=[],a=H.call(arguments),u=(ve.get(this,"events")||{})[t.type]||[],l=te.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(o=te.event.handlers.call(this,t,u),e=0;(s=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,i=0;(r=s.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,n=((te.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,r,o=[],a=e.delegateCount,u=t.target;if(a&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(n=[],i=0;a>i;i++)r=e[i],s=r.selector+" ",void 0===n[s]&&(n[s]=r.needsContext?te(s,this).index(u)>=0:te.find(s,this,null,[u]).length),n[s]&&n.push(r);n.length&&o.push({elem:u,handlers:n})}return e.length>a&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,r=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||Q,n=i.documentElement,s=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[te.expando])return t;var e,i,n,s=t.type,r=t,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=Ee.test(s)?this.mouseHooks:Pe.test(s)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new te.Event(r),e=n.length;e--;)i=n[e],t[i]=r[i];return t.target||(t.target=Q),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&te.nodeName(this,"input")?(this.click(),!1):void 0
},_default:function(t){return te.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=te.extend(new te.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?te.event.trigger(s,null,e):te.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},te.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},te.Event=function(t,e){return this instanceof te.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.getPreventDefault&&t.getPreventDefault()?l:h):this.type=t,e&&te.extend(this,e),this.timeStamp=t&&t.timeStamp||te.now(),void(this[te.expando]=!0)):new te.Event(t,e)},te.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},te.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){te.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,r=t.handleObj;return(!s||s!==n&&!te.contains(n,s))&&(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),Z.focusinBubbles||te.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){te.event.simulate(e,t.target,te.event.fix(t),!0)};te.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=ve.access(n,e);s||n.addEventListener(t,i,!0),ve.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=ve.access(n,e)-1;s?ve.access(n,e,s):(n.removeEventListener(t,i,!0),ve.remove(n,e))}}}),te.fn.extend({on:function(t,e,i,n,s){var r,o;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=h;else if(!n)return this;return 1===s&&(r=n,n=function(t){return te().off(t),r.apply(this,arguments)},n.guid=r.guid||(r.guid=te.guid++)),this.each(function(){te.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,te(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=h),this.each(function(){te.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){te.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?te.event.trigger(t,e,i,!0):void 0}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,je=/<([\w:]+)/,Me=/<|&#?\w+;/,Le=/<(?:script|style|link)/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^$|\/(?:java|ecma)script/i,Ne=/^true\/(.*)/,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ze={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ze.optgroup=ze.option,ze.tbody=ze.tfoot=ze.colgroup=ze.caption=ze.thead,ze.th=ze.td,te.extend({clone:function(t,e,i){var n,s,r,o,a=t.cloneNode(!0),u=te.contains(t.ownerDocument,t);if(!(Z.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||te.isXMLDoc(t)))for(o=v(a),r=v(t),n=0,s=r.length;s>n;n++)y(r[n],o[n]);if(e)if(i)for(r=r||v(t),o=o||v(a),n=0,s=r.length;s>n;n++)m(r[n],o[n]);else m(t,a);return o=v(a,"script"),o.length>0&&g(o,!u&&v(t,"script")),a},buildFragment:function(t,e,i,n){for(var s,r,o,a,u,l,h=e.createDocumentFragment(),c=[],d=0,p=t.length;p>d;d++)if(s=t[d],s||0===s)if("object"===te.type(s))te.merge(c,s.nodeType?[s]:s);else if(Me.test(s)){for(r=r||h.appendChild(e.createElement("div")),o=(je.exec(s)||["",""])[1].toLowerCase(),a=ze[o]||ze._default,r.innerHTML=a[1]+s.replace(Ae,"<$1></$2>")+a[2],l=a[0];l--;)r=r.lastChild;te.merge(c,r.childNodes),r=h.firstChild,r.textContent=""}else c.push(e.createTextNode(s));for(h.textContent="",d=0;s=c[d++];)if((!n||-1===te.inArray(s,n))&&(u=te.contains(s.ownerDocument,s),r=v(h.appendChild(s),"script"),u&&g(r),i))for(l=0;s=r[l++];)Be.test(s.type||"")&&i.push(s);return h},cleanData:function(t){for(var e,i,n,s,r,o,a=te.event.special,u=0;void 0!==(i=t[u]);u++){if(te.acceptData(i)&&(r=i[ve.expando],r&&(e=ve.cache[r]))){if(n=Object.keys(e.events||{}),n.length)for(o=0;void 0!==(s=n[o]);o++)a[s]?te.event.remove(i,s):te.removeEvent(i,s,e.handle);ve.cache[r]&&delete ve.cache[r]}delete ye.cache[i[ye.expando]]}}}),te.fn.extend({text:function(t){return me(this,function(t){return void 0===t?te.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?te.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||te.cleanData(v(i)),i.parentNode&&(e&&te.contains(i.ownerDocument,i)&&g(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(te.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return te.clone(this,t,e)})},html:function(t){return me(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Le.test(t)&&!ze[(je.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ae,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(te.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,te.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=U.apply([],t);var i,n,s,r,o,a,u=0,l=this.length,h=this,c=l-1,d=t[0],g=te.isFunction(d);if(g||l>1&&"string"==typeof d&&!Z.checkClone&&De.test(d))return this.each(function(i){var n=h.eq(i);g&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(l&&(i=te.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(s=te.map(v(i,"script"),p),r=s.length;l>u;u++)o=i,u!==c&&(o=te.clone(o,!0,!0),r&&te.merge(s,v(o,"script"))),e.call(this[u],o,u);if(r)for(a=s[s.length-1].ownerDocument,te.map(s,f),u=0;r>u;u++)o=s[u],Be.test(o.type||"")&&!ve.access(o,"globalEval")&&te.contains(a,o)&&(o.src?te._evalUrl&&te._evalUrl(o.src):te.globalEval(o.textContent.replace(Oe,"")))}return this}}),te.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){te.fn[t]=function(t){for(var i,n=[],s=te(t),r=s.length-1,o=0;r>=o;o++)i=o===r?this:this.clone(!0),te(s[o])[e](i),W.apply(n,i.get());return this.pushStack(n)}});var Fe,Re={},Ve=/^margin/,qe=RegExp("^("+be+")(?!px)[a-z%]+$","i"),He=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",r.appendChild(o);var e=t.getComputedStyle(a,null);i="1%"!==e.top,n="4px"===e.width,r.removeChild(o)}var i,n,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",r=Q.documentElement,o=Q.createElement("div"),a=Q.createElement("div");a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(a),t.getComputedStyle&&te.extend(Z,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=a.appendChild(Q.createElement("div"));return i.style.cssText=a.style.cssText=s,i.style.marginRight=i.style.width="0",a.style.width="1px",r.appendChild(o),e=!parseFloat(t.getComputedStyle(i,null).marginRight),r.removeChild(o),a.innerHTML="",e}})}(),te.swap=function(t,e,i,n){var s,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];s=i.apply(t,n||[]);for(r in e)t.style[r]=o[r];return s};var Ue=/^(none|table(?!-c[ea]).+)/,We=RegExp("^("+be+")(.*)$","i"),Ge=RegExp("^([+-])=("+be+")","i"),$e={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:0,fontWeight:400},Je=["Webkit","O","Moz","ms"];te.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=b(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,o,a=te.camelCase(e),u=t.style;return e=te.cssProps[a]||(te.cssProps[a]=k(u,a)),o=te.cssHooks[e]||te.cssHooks[a],void 0===i?o&&"get"in o&&void 0!==(s=o.get(t,!1,n))?s:u[e]:(r=typeof i,"string"===r&&(s=Ge.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(te.css(t,e)),r="number"),null!=i&&i===i&&("number"!==r||te.cssNumber[a]||(i+="px"),Z.clearCloneStyle||""!==i||0!==e.indexOf("background")||(u[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(u[e]="",u[e]=i)),void 0)}},css:function(t,e,i,n){var s,r,o,a=te.camelCase(e);return e=te.cssProps[a]||(te.cssProps[a]=k(t.style,a)),o=te.cssHooks[e]||te.cssHooks[a],o&&"get"in o&&(s=o.get(t,!0,i)),void 0===s&&(s=b(t,e,n)),"normal"===s&&e in Xe&&(s=Xe[e]),""===i||i?(r=parseFloat(s),i===!0||te.isNumeric(r)?r||0:s):s}}),te.each(["height","width"],function(t,e){te.cssHooks[e]={get:function(t,i,n){return i?0===t.offsetWidth&&Ue.test(te.css(t,"display"))?te.swap(t,$e,function(){return P(t,e,n)}):P(t,e,n):void 0},set:function(t,i,n){var s=n&&He(t);return C(t,i,n?S(t,e,n,"border-box"===te.css(t,"boxSizing",!1,s),s):0)}}}),te.cssHooks.marginRight=x(Z.reliableMarginRight,function(t,e){return e?te.swap(t,{display:"inline-block"},b,[t,"marginRight"]):void 0}),te.each({margin:"",padding:"",border:"Width"},function(t,e){te.cssHooks[t+e]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+xe[n]+e]=r[n]||r[n-2]||r[0];return s}},Ve.test(t)||(te.cssHooks[t+e].set=C)}),te.fn.extend({css:function(t,e){return me(this,function(t,e,i){var n,s,r={},o=0;if(te.isArray(e)){for(n=He(t),s=e.length;s>o;o++)r[e[o]]=te.css(t,e[o],!1,n);return r}return void 0!==i?te.style(t,e,i):te.css(t,e)},t,e,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ke(this)?te(this).show():te(this).hide()})}}),te.Tween=T,T.prototype={constructor:T,init:function(t,e,i,n,s,r){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(te.cssNumber[i]?"":"px")},cur:function(){var t=T.propHooks[this.prop];return t&&t.get?t.get(this):T.propHooks._default.get(this)},run:function(t){var e,i=T.propHooks[this.prop];return this.pos=e=this.options.duration?te.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=te.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){te.fx.step[t.prop]?te.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[te.cssProps[t.prop]]||te.cssHooks[t.prop])?te.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},te.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},te.fx=T.prototype.init,te.fx.step={};var Ye,Ze,Qe=/^(?:toggle|show|hide)$/,Ke=RegExp("^(?:([+-])=|)("+be+")([a-z%]*)$","i"),ti=/queueHooks$/,ei=[M],ii={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=Ke.exec(e),r=s&&s[3]||(te.cssNumber[t]?"":"px"),o=(te.cssNumber[t]||"px"!==r&&+n)&&Ke.exec(te.css(i.elem,t)),a=1,u=20;if(o&&o[3]!==r){r=r||o[3],s=s||[],o=+n||1;do a=a||".5",o/=a,te.style(i.elem,t,o+r);while(a!==(a=i.cur()/n)&&1!==a&&--u)}return s&&(o=i.start=+o||+n||0,i.unit=r,i.end=s[1]?o+(s[1]+1)*s[2]:+s[2]),i}]};te.Animation=te.extend(D,{tweener:function(t,e){te.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],ii[i]=ii[i]||[],ii[i].unshift(e)},prefilter:function(t,e){e?ei.unshift(t):ei.push(t)}}),te.speed=function(t,e,i){var n=t&&"object"==typeof t?te.extend({},t):{complete:i||!i&&e||te.isFunction(t)&&t,duration:t,easing:i&&e||e&&!te.isFunction(e)&&e};return n.duration=te.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in te.fx.speeds?te.fx.speeds[n.duration]:te.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){te.isFunction(n.old)&&n.old.call(this),n.queue&&te.dequeue(this,n.queue)},n},te.fn.extend({fadeTo:function(t,e,i,n){return this.filter(ke).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=te.isEmptyObject(t),r=te.speed(e,i,n),o=function(){var e=D(this,te.extend({},t),r);(s||ve.get(this,"finish"))&&e.stop(!0)};return o.finish=o,s||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",r=te.timers,o=ve.get(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&ti.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=t&&r[s].queue!==t||(r[s].anim.stop(i),e=!1,r.splice(s,1));(e||!i)&&te.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ve.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],r=te.timers,o=n?n.length:0;for(i.finish=!0,te.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;o>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),te.each(["toggle","show","hide"],function(t,e){var i=te.fn[e];te.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(A(e,!0),t,n,s)}}),te.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){te.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),te.timers=[],te.fx.tick=function(){var t,e=0,i=te.timers;for(Ye=te.now();i.length>e;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||te.fx.stop(),Ye=void 0},te.fx.timer=function(t){te.timers.push(t),t()?te.fx.start():te.timers.pop()},te.fx.interval=13,te.fx.start=function(){Ze||(Ze=setInterval(te.fx.tick,te.fx.interval))},te.fx.stop=function(){clearInterval(Ze),Ze=null},te.fx.speeds={slow:600,fast:200,_default:400},te.fn.delay=function(t,e){return t=te.fx?te.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=Q.createElement("input"),e=Q.createElement("select"),i=e.appendChild(Q.createElement("option"));t.type="checkbox",Z.checkOn=""!==t.value,Z.optSelected=i.selected,e.disabled=!0,Z.optDisabled=!i.disabled,t=Q.createElement("input"),t.value="t",t.type="radio",Z.radioValue="t"===t.value}();var ni,si,ri=te.expr.attrHandle;te.fn.extend({attr:function(t,e){return me(this,te.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){te.removeAttr(this,t)})}}),te.extend({attr:function(t,e,i){var n,s,r=t.nodeType;return t&&3!==r&&8!==r&&2!==r?typeof t.getAttribute===Se?te.prop(t,e,i):(1===r&&te.isXMLDoc(t)||(e=e.toLowerCase(),n=te.attrHooks[e]||(te.expr.match.bool.test(e)?si:ni)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=te.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void te.removeAttr(t,e)):void 0},removeAttr:function(t,e){var i,n,s=0,r=e&&e.match(pe);if(r&&1===t.nodeType)for(;i=r[s++];)n=te.propFix[i]||i,te.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!Z.radioValue&&"radio"===e&&te.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),si={set:function(t,e,i){return e===!1?te.removeAttr(t,i):t.setAttribute(i,i),i}},te.each(te.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ri[e]||te.find.attr;ri[e]=function(t,e,n){var s,r;return n||(r=ri[e],ri[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,ri[e]=r),s}});var oi=/^(?:input|select|textarea|button)$/i;te.fn.extend({prop:function(t,e){return me(this,te.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[te.propFix[t]||t]})}}),te.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,r,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?(r=1!==o||!te.isXMLDoc(t),r&&(e=te.propFix[e]||e,s=te.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||oi.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Z.optSelected||(te.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),te.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){te.propFix[this.toLowerCase()]=this});var ai=/[\t\r\n\f]/g;te.fn.extend({addClass:function(t){var e,i,n,s,r,o,a="string"==typeof t&&t,u=0,l=this.length;if(te.isFunction(t))return this.each(function(e){te(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pe)||[];l>u;u++)if(i=this[u],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):" ")){for(r=0;s=e[r++];)0>n.indexOf(" "+s+" ")&&(n+=s+" ");o=te.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(t){var e,i,n,s,r,o,a=0===arguments.length||"string"==typeof t&&t,u=0,l=this.length;if(te.isFunction(t))return this.each(function(e){te(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pe)||[];l>u;u++)if(i=this[u],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):"")){for(r=0;s=e[r++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");o=t?te.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(te.isFunction(t)?function(i){te(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,s=te(this),r=t.match(pe)||[];e=r[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===Se||"boolean"===i)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ai," ").indexOf(e)>=0)return!0;return!1}});var ui=/\r/g;te.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=te.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,te(this).val()):t,null==s?s="":"number"==typeof s?s+="":te.isArray(s)&&(s=te.map(s,function(t){return null==t?"":t+""})),e=te.valHooks[this.type]||te.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=te.valHooks[s.type]||te.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(ui,""):null==i?"":i)):void 0}}),te.extend({valHooks:{select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,r="select-one"===t.type||0>s,o=r?null:[],a=r?s+1:n.length,u=0>s?a:r?s:0;a>u;u++)if(i=n[u],!(!i.selected&&u!==s||(Z.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&te.nodeName(i.parentNode,"optgroup"))){if(e=te(i).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var i,n,s=t.options,r=te.makeArray(e),o=s.length;o--;)n=s[o],(n.selected=te.inArray(te(n).val(),r)>=0)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),te.each(["radio","checkbox"],function(){te.valHooks[this]={set:function(t,e){return te.isArray(e)?t.checked=te.inArray(te(t).val(),e)>=0:void 0}},Z.checkOn||(te.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),te.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){te.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),te.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var li=te.now(),hi=/\?/;te.parseJSON=function(t){return JSON.parse(t+"")},te.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&te.error("Invalid XML: "+t),e};var ci,di,pi=/#.*$/,fi=/([?&])_=[^&]*/,gi=/^(.*?):[ \t]*([^\r\n]*)$/gm,mi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vi=/^(?:GET|HEAD)$/,yi=/^\/\//,_i=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wi={},bi={},xi="*/".concat("*");try{di=location.href}catch(ki){di=Q.createElement("a"),di.href="",di=di.href}ci=_i.exec(di.toLowerCase())||[],te.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:di,type:"GET",isLocal:mi.test(ci[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":te.parseJSON,"text xml":te.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?O(O(t,te.ajaxSettings),e):O(te.ajaxSettings,t)},ajaxPrefilter:B(wi),ajaxTransport:B(bi),ajax:function(t,e){function i(t,e,i,o){var u,h,v,y,w,x=e;2!==_&&(_=2,a&&clearTimeout(a),n=void 0,r=o||"",b.readyState=t>0?4:0,u=t>=200&&300>t||304===t,i&&(y=z(c,b,i)),y=F(c,y,b,u),u?(c.ifModified&&(w=b.getResponseHeader("Last-Modified"),w&&(te.lastModified[s]=w),w=b.getResponseHeader("etag"),w&&(te.etag[s]=w)),204===t||"HEAD"===c.type?x="nocontent":304===t?x="notmodified":(x=y.state,h=y.data,v=y.error,u=!v)):(v=x,(t||!x)&&(x="error",0>t&&(t=0))),b.status=t,b.statusText=(e||x)+"",u?f.resolveWith(d,[h,x,b]):f.rejectWith(d,[b,x,v]),b.statusCode(m),m=void 0,l&&p.trigger(u?"ajaxSuccess":"ajaxError",[b,c,u?h:v]),g.fireWith(d,[b,x]),l&&(p.trigger("ajaxComplete",[b,c]),--te.active||te.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,r,o,a,u,l,h,c=te.ajaxSetup({},e),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?te(d):te.event,f=te.Deferred(),g=te.Callbacks("once memory"),m=c.statusCode||{},v={},y={},_=0,w="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!o)for(o={};e=gi.exec(r);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=y[i]=y[i]||t,v[t]=e),this},overrideMimeType:function(t){return _||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)m[e]=[m[e],t[e]];else b.always(t[b.status]);return this},abort:function(t){var e=t||w;return n&&n.abort(e),i(0,e),this}};if(f.promise(b).complete=g.add,b.success=b.done,b.error=b.fail,c.url=((t||c.url||di)+"").replace(pi,"").replace(yi,ci[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=te.trim(c.dataType||"*").toLowerCase().match(pe)||[""],null==c.crossDomain&&(u=_i.exec(c.url.toLowerCase()),c.crossDomain=!(!u||u[1]===ci[1]&&u[2]===ci[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(ci[3]||("http:"===ci[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=te.param(c.data,c.traditional)),N(wi,c,e,b),2===_)return b;l=c.global,l&&0===te.active++&&te.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!vi.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(hi.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fi.test(s)?s.replace(fi,"$1_="+li++):s+(hi.test(s)?"&":"?")+"_="+li++)),c.ifModified&&(te.lastModified[s]&&b.setRequestHeader("If-Modified-Since",te.lastModified[s]),te.etag[s]&&b.setRequestHeader("If-None-Match",te.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&b.setRequestHeader("Content-Type",c.contentType),b.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+xi+"; q=0.01":""):c.accepts["*"]);for(h in c.headers)b.setRequestHeader(h,c.headers[h]);if(c.beforeSend&&(c.beforeSend.call(d,b,c)===!1||2===_))return b.abort();w="abort";for(h in{success:1,error:1,complete:1})b[h](c[h]);if(n=N(bi,c,e,b)){b.readyState=1,l&&p.trigger("ajaxSend",[b,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){b.abort("timeout")},c.timeout));try{_=1,n.send(v,i)}catch(x){if(!(2>_))throw x;i(-1,x)}}else i(-1,"No Transport");return b},getJSON:function(t,e,i){return te.get(t,e,i,"json")},getScript:function(t,e){return te.get(t,void 0,e,"script")}}),te.each(["get","post"],function(t,e){te[e]=function(t,i,n,s){return te.isFunction(i)&&(s=s||n,n=i,i=void 0),te.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),te.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){te.fn[e]=function(t){return this.on(e,t)}}),te._evalUrl=function(t){return te.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},te.fn.extend({wrapAll:function(t){var e;return te.isFunction(t)?this.each(function(e){te(this).wrapAll(t.call(this,e))}):(this[0]&&(e=te(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(te.isFunction(t)?function(e){te(this).wrapInner(t.call(this,e))}:function(){var e=te(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=te.isFunction(t);return this.each(function(i){te(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){te.nodeName(this,"body")||te(this).replaceWith(this.childNodes)}).end()}}),te.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},te.expr.filters.visible=function(t){return!te.expr.filters.hidden(t)};var Ci=/%20/g,Si=/\[\]$/,Pi=/\r?\n/g,Ei=/^(?:submit|button|image|reset|file)$/i,Ti=/^(?:input|select|textarea|keygen)/i;te.param=function(t,e){var i,n=[],s=function(t,e){e=te.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=te.ajaxSettings&&te.ajaxSettings.traditional),te.isArray(t)||t.jquery&&!te.isPlainObject(t))te.each(t,function(){s(this.name,this.value)});else for(i in t)R(i,t[i],e,s);return n.join("&").replace(Ci,"+")},te.fn.extend({serialize:function(){return te.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=te.prop(this,"elements");return t?te.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!te(this).is(":disabled")&&Ti.test(this.nodeName)&&!Ei.test(t)&&(this.checked||!Ce.test(t))}).map(function(t,e){var i=te(this).val();return null==i?null:te.isArray(i)?te.map(i,function(t){return{name:e.name,value:t.replace(Pi,"\r\n")}}):{name:e.name,value:i.replace(Pi,"\r\n")}}).get()}}),te.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ii=0,Ai={},ji={0:200,1223:204},Mi=te.ajaxSettings.xhr();t.ActiveXObject&&te(t).on("unload",function(){for(var t in Ai)Ai[t]()}),Z.cors=!!Mi&&"withCredentials"in Mi,Z.ajax=Mi=!!Mi,te.ajaxTransport(function(t){var e;return Z.cors||Mi&&!t.crossDomain?{send:function(i,n){var s,r=t.xhr(),o=++Ii;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)r[s]=t.xhrFields[s];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)r.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(delete Ai[o],e=r.onload=r.onerror=null,"abort"===t?r.abort():"error"===t?n(r.status,r.statusText):n(ji[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:void 0,r.getAllResponseHeaders()))}},r.onload=e(),r.onerror=e("error"),e=Ai[o]=e("abort"),r.send(t.hasContent&&t.data||null)},abort:function(){e&&e()}}:void 0}),te.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return te.globalEval(t),t}}}),te.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),te.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,s){e=te("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),Q.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Li=[],Di=/(=)\?(?=&|$)|\?\?/;te.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Li.pop()||te.expando+"_"+li++;return this[t]=!0,t}}),te.ajaxPrefilter("json jsonp",function(e,i,n){var s,r,o,a=e.jsonp!==!1&&(Di.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Di.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=te.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Di,"$1"+s):e.jsonp!==!1&&(e.url+=(hi.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||te.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=t[s],t[s]=function(){o=arguments},n.always(function(){t[s]=r,e[s]&&(e.jsonpCallback=i.jsonpCallback,Li.push(s)),o&&te.isFunction(r)&&r(o[0]),o=r=void 0
}),"script"):void 0}),te.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||Q;var n=oe.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=te.buildFragment([t],e,s),s&&s.length&&te(s).remove(),te.merge([],n.childNodes))};var Bi=te.fn.load;te.fn.load=function(t,e,i){if("string"!=typeof t&&Bi)return Bi.apply(this,arguments);var n,s,r,o=this,a=t.indexOf(" ");return a>=0&&(n=t.slice(a),t=t.slice(0,a)),te.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&te.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){r=arguments,o.html(n?te("<div>").append(te.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){o.each(i,r||[t.responseText,e,t])}),this},te.expr.filters.animated=function(t){return te.grep(te.timers,function(e){return t===e.elem}).length};var Ni=t.document.documentElement;te.offset={setOffset:function(t,e,i){var n,s,r,o,a,u,l,h=te.css(t,"position"),c=te(t),d={};"static"===h&&(t.style.position="relative"),a=c.offset(),r=te.css(t,"top"),u=te.css(t,"left"),l=("absolute"===h||"fixed"===h)&&(r+u).indexOf("auto")>-1,l?(n=c.position(),o=n.top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(u)||0),te.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+s),"using"in e?e.using.call(t,d):c.css(d)}},te.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){te.offset.setOffset(this,t,e)});var e,i,n=this[0],s={top:0,left:0},r=n&&n.ownerDocument;return r?(e=r.documentElement,te.contains(e,n)?(typeof n.getBoundingClientRect!==Se&&(s=n.getBoundingClientRect()),i=V(r),{top:s.top+i.pageYOffset-e.clientTop,left:s.left+i.pageXOffset-e.clientLeft}):s):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===te.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),te.nodeName(t[0],"html")||(n=t.offset()),n.top+=te.css(t[0],"borderTopWidth",!0),n.left+=te.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-te.css(i,"marginTop",!0),left:e.left-n.left-te.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ni;t&&!te.nodeName(t,"html")&&"static"===te.css(t,"position");)t=t.offsetParent;return t||Ni})}}),te.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;te.fn[e]=function(s){return me(this,function(e,s,r){var o=V(e);return void 0===r?o?o[i]:e[s]:void(o?o.scrollTo(n?t.pageXOffset:r,n?r:t.pageYOffset):e[s]=r)},e,s,arguments.length,null)}}),te.each(["top","left"],function(t,e){te.cssHooks[e]=x(Z.pixelPosition,function(t,i){return i?(i=b(t,e),qe.test(i)?te(t).position()[e]+"px":i):void 0})}),te.each({Height:"height",Width:"width"},function(t,e){te.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){te.fn[n]=function(n,s){var r=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||s===!0?"margin":"border");return me(this,function(e,i,n){var s;return te.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?te.css(e,i,o):te.style(e,i,n,o)},e,r?n:void 0,r,null)}})}),te.fn.size=function(){return this.length},te.fn.andSelf=te.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return te});var Oi=t.jQuery,zi=t.$;return te.noConflict=function(e){return t.$===te&&(t.$=zi),e&&t.jQuery===te&&(t.jQuery=Oi),te},typeof e===Se&&(t.jQuery=t.$=te),te}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,e){"use strict";var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},FastClick.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},FastClick.prototype.updateScrollParent=function(t){"use strict";var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){"use strict";var e,i,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,200>t.timeStamp-this.lastClickTime&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},FastClick.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){"use strict";var e,i,n,s,r,o=this.targetElement;if(this.touchHasMoved(t)&&(this.trackingClick=!1,this.targetElement=null),!this.trackingClick)return!0;if(200>t.timeStamp-this.lastClickTime)return this.cancelNextClick=!0,!0;if(this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(r=t.changedTouches[0],o=document.elementFromPoint(r.pageX-window.pageXOffset,r.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=o.tagName.toLowerCase(),"label"===n){if(e=this.findControl(o)){if(this.focus(o),this.deviceIsAndroid)return!1;o=e}}else if(this.needsFocus(o))return t.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(o),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,t.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(s=o.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(o)||(t.preventDefault(),this.sendClick(o,t)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){"use strict";return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){"use strict";var e;if(window.ontouchstart===void 0)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]"),e&&-1!==e.content.indexOf("user-scalable=no"))return!0}return"none"===t.style.msTouchAction?!0:!1},FastClick.attach=function(t){"use strict";return new FastClick(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,fontdetect=function(){function t(){e||(e=!0,$("body > :first-child").before('<div id="fontdetectHelper"><span>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</span></div>'),$("#fontdetectHelper").css({position:"absolute",visibility:"hidden",top:"-200px",left:"-100000px",width:"100000px",height:"200px","font-size":"100px"}))}var e=!1,i=["serif","sans-serif","monospace","cursive","fantasy"];return{onFontLoaded:function(i,n,s,r){if(i){var o=r&&r.msInterval?r.msInterval:100,a=r&&r.msTimeout?r.msTimeout:2e3;if(n||s){if(e||t(),this.isFontLoaded(i))return n&&n(i),void 0;var u=this,l=(new Date).getTime(),h=setInterval(function(){if(u.isFontLoaded(i))return clearInterval(h),n(i),void 0;var t=(new Date).getTime();t-l>a&&(clearInterval(h),s&&s(i))},o)}}},isFontLoaded:function(n){var s=0,r=0;e||t();for(var o=0;i.length>o;++o){var a=$("#fontdetectHelper > SPAN");if(a.css("font-family",n+","+i[o]),s=a.width(),o>0&&s!=r)return!1;r=s}return!0},whichFont:function(t){for(var e=$(t).css("font-family"),i=e.split(","),n=i.shift();n;){if(n=n.replace(/^\s*['"]?\s*([^'"]*)\s*['"]?\s*$/,"$1"),this.isFontLoaded(n))return n;n=i.shift()}return null}}}(),function(t){t.fn.textfill=function(e){function i(t,e,i,n,s,r,o,a){for(;a-1>o;){var u=Math.floor((o+a)/2);if(e.css("font-size",u),n>=i.call(e)){if(o=u,i.call(e)==n)break}else a=u}return e.css("font-size",a),n>=i.call(e)&&(o=a),o}var n={debug:!1,maxFontPixels:40,minFontPixels:4,innerTag:"span",widthOnly:!1,success:null,callback:null,fail:null,complete:null,explicitWidth:null,explicitHeight:null},s=t.extend(n,e);return this.each(function(){var e=t(s.innerTag+":visible:first",this),n=s.explicitHeight||t(this).height(),r=s.explicitWidth||t(this).width(),o=e.css("font-size"),a=s.minFontPixels,u=0>=s.maxFontPixels?n:s.maxFontPixels,l=void 0;s.widthOnly||(l=i("H",e,t.fn.height,n,n,r,a,u));var h=i("W",e,t.fn.width,r,n,r,a,u);s.widthOnly?e.css("font-size",h):e.css("font-size",Math.min(l,h)),e.width()>r||e.height()>n&&!s.widthOnly?(e.css("font-size",o),s.fail&&s.fail(this)):s.success?s.success(this):s.callback&&s.callback(this)}),s.complete&&s.complete(this),this}}(window.jQuery);var UT={},WD=UT;i18n=window.i18n||{},__I18N__DEFAULT="en",i18n.load=function(t,e){this.data=this.data||{};var i=this.data[t];if(i)for(var n in i)e[n]||(e[n]=i[n]);this.data[t]=e},i18n.getLocale=function(){return this.locale||__I18N__DEFAULT},i18n.setLocale=function(t){this.locale=t},i18n.get=function(t){var e=this.getLocale();return this.data[e]&&this.data[e][t]?this.data[e][t]:this.data[__I18N__DEFAULT]&&this.data[__I18N__DEFAULT][t]?this.data[__I18N__DEFAULT][t]:t},i18n.load("ar",{add_image:" ",add_sound:"  ",add_video:"  ",edit:"",remove:"",rotate:"",resize:" ",error:" ",error_timeout_sound:"     ",error_nolibrary_sound:"    "}),i18n.load("de",{add_image:"Bild hinzufgen",add_sound:"Sound hinzufgen",add_video:"Video hinzufgen",edit:"Bearbeiten",remove:"Entfernen",rotate:"Drehen",resize:"Grsse verndern",error:"Fehler aufgetreten",error_timeout_sound:"Sorry, dieser Sound ist nicht verfgbar",error_nolibrary_sound:"Sorry, die Bibliothek ist nicht verfgbar"}),i18n.load("en",{add_image:"Add image",add_sound:"Add sound",add_video:"Add video",edit:"Edit",remove:"Remove",rotate:"Rotate",resize:"Resize",error:"Error occurred",error_timeout_sound:"We can't get data to play this track in 15 sec",error_nolibrary_sound:"Sound Player !!! The library not found."}),i18n.load("es",{add_image:"Agregar imagen",add_sound:"Agregar sonido",add_video:"Agregar video",edit:"Editar",remove:"Eliminar",rotate:"Rotar",resize:"Cambiar tamao",error:"Ocurri un error",error_timeout_sound:"Lo siento, este sonido no est disponible",error_nolibrary_sound:"Lo siento, la librera no est disponible"}),i18n.load("fr",{add_image:"Ajouter une image",add_sound:"Ajouter un son",add_video:"Ajouter une vido",edit:"Modifier",remove:"Supprimer",rotate:"Rotation",resize:"Redimensionner",error:"Une erreur est survenue",error_timeout_sound:"Dsol, ce son nest pas disponible",error_nolibrary_sound:"Dsol, la librairie nest pas disponible"}),i18n.load("hi",{add_image:" ",add_sound:" ",add_video:" ",edit:" ",remove:"",rotate:"",resize:" ",error:"    ",error_timeout_sound:" ,     ",error_nolibrary_sound:" ,     "}),i18n.load("it",{add_image:"Aggiungi immagine",add_sound:"Aggiungi suono",add_video:"Aggiungi video",edit:"Modifica",remove:"Rimuovi",rotate:"Ruota",resize:"Ridimensiona",error:"Si  verificato un errore",error_timeout_sound:"Spiacenti, questo suono non  disponibile",error_nolibrary_sound:"Spiacenti, la libreria non  disponibile"}),i18n.load("nl",{add_image:"Afbeelding toevoegen",add_sound:"Geluid toevoegen",add_video:"Video toevoegen",edit:"Bewerken",remove:"Verwijderen",rotate:"Roteren",resize:"Formaat wijzigen",error:"Fout opgetreden",error_timeout_sound:"Sorry, dit geluid is niet beschikbaar",error_nolibrary_sound:"Sorry, deze bibliotheek is niet beschikbaar"}),i18n.load("pt",{add_image:"Adicionar imagem",add_sound:"Adicionar som",add_video:"Adicionar vdeo",edit:"Editar",remove:"Remover",rotate:"Rotacionar",resize:"Redimensionar",error:"Um erro ocorreu",error_timeout_sound:"Desculpe, esse som est indisponvel",error_nolibrary_sound:"Desculpe, a biblioteca est indisponvel"}),i18n.load("ru",{add_image:" ",add_sound:" ",add_video:" ",edit:"",remove:"",rotate:"",resize:" ",error:" ",error_timeout_sound:" ,    ",error_nolibrary_sound:" ,   "}),i18n.load("th",{add_image:"",add_sound:"",add_video:"",edit:"",remove:"",rotate:"",resize:"",error:"",error_timeout_sound:" ",error_nolibrary_sound:" "}),i18n.load("zh",{add_image:"",add_sound:"",add_video:"",edit:"",remove:"",rotate:"",resize:"",error:"",error_timeout_sound:",",error_nolibrary_sound:","}),UT.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),i="x"==t?e:8|3&e;return i.toString(16)})},UT.UUID=UT.uuid,function(){"use strict";try{!Object.prototype.__defineGetter__&&Object.defineProperty({},"x",{get:function(){return!0}}).x&&(Object.defineProperty(Object.prototype,"__defineGetter__",{enumerable:!1,configurable:!0,value:function(t,e){Object.defineProperty(this,t,{get:e,enumerable:!0,configurable:!0})}}),Object.defineProperty(Object.prototype,"__defineSetter__",{enumerable:!1,configurable:!0,value:function(t,e){Object.defineProperty(this,t,{set:e,enumerable:!0,configurable:!0})}}))}catch(t){throw Error("Simple Storage API not Supported")}}(),UT.touchEventFix=function(t,e){"use strict";function i(){var i=function(){var t=arguments[0],i=arguments[1],n=!0;"touchstart"!==t&&"touchend"!==t&&"touchcancel"!==t&&"touchmove"!==t&&"touchleave"!==t||"function"!=typeof i||(m?(this.__UT__uuid=this.__UT__uuid||l(),g[this.__UT__uuid]=g[this.__UT__uuid]||{},g[this.__UT__uuid][t]={node:this,callback:i}):n=!1),y("_"),y("->> Called addEventListener, type: "+t+", in iframe: "+e+", will be added: "+n),n&&d.apply(this,arguments)},n=function(){var t=arguments[0],e=arguments[1];"touchstart"!==t&&"touchend"!==t&&"touchcancel"!==t&&"touchmove"!==t&&"touchleave"!==t||"function"!=typeof e||g[this.__UT__uuid]&&g[this.__UT__uuid][t]&&delete g[this.__UT__uuid][t],p.apply(this,arguments)};t.Element.prototype.addEventListener=i,t.Element.prototype.removeEventListener=n,t.document.addEventListener=i,t.document.removeEventListener=n}function n(){("TEXTAREA"==t.document.activeElement.nodeName||"INPUT"==t.document.activeElement.nodeName||t.document.activeElement.getAttribute("contenteditable"))&&r()}function s(){var i,n,s,r,o;m=!0,y("->> enableTouchEvents"),e&&t.top.postMessage('"touchevents-enable"',"*");for(var a in g)g.hasOwnProperty(a)&&(i=g[a].touchstart,n=g[a].touchend,s=g[a].touchcancel,r=g[a].touchmove,o=g[a].touchleave,i&&d.call(i.node,"touchstart",i.callback,!1),n&&d.call(n.node,"touchend",n.callback,!1),s&&d.call(s.node,"touchcancel",s.callback,!1),r&&d.call(r.node,"touchmove",r.callback,!1),o&&d.call(o.node,"touchleave",o.callback,!1))}function r(){var i,n,s,r,o;m=!1,y("->> disableTouchEvents"),e&&t.top.postMessage('"touchevents-disable"',"*");for(var a in g)g.hasOwnProperty(a)&&(i=g[a].touchstart,n=g[a].touchend,s=g[a].touchcancel,r=g[a].touchmove,o=g[a].touchleave,i&&p.call(i.node,"touchstart",i.callback,!1),n&&p.call(n.node,"touchend",n.callback,!1),s&&p.call(s.node,"touchcancel",s.callback,!1),r&&p.call(r.node,"touchmove",r.callback,!1),o&&p.call(o.node,"touchleave",o.callback,!1))}function o(){e&&(d.call(t.document,"focus",n,!0),d.call(t.document,"blur",s,!0)),t.addEventListener("message",u,!0)}function a(){e&&(p.call(t.document,"focus",n,!0),p.call(t.document,"blur",s,!0)),t.removeEventListener("message",u,!0)}function u(t){y("didReceiveMessage "+t.data),"touchevents-enable"===t.data?s():"touchevents-disable"===t.data&&r()}function l(){return parseInt(f++,10)}function h(){console.group("EventListeners description:");for(var t in g)console.group("%s:",t),g.hasOwnProperty(t)&&y(g[t]),console.groupEnd();console.groupEnd()}if(!/(iPad|iPhone|iPod)/g.test(t.navigator.userAgent)||!Element.prototype.addEventListener)return null;var c,d=t.Element.prototype.addEventListener,p=t.Element.prototype.removeEventListener,f=0,g={},m=!0,v=!1;i(),o();var y=function(t){v&&console.log(t)};return c={enableCapture:o,disableCapture:a,enableTouchEvents:s,disableTouchEvents:r,getEventListenersDescription:h,didReceiveMessage:u}}(window,!0),__STACK_JQUERY_JS=null,function(t,e,i,n){"use strict";t.Collection=function(e){var i,s,r,o,a,u,l,h,c,d,p=this;this.length=0,this.name=null,this.isPublic=function(){return!1};var f=this.setItem=function(e,i){if(!e)throw Error("InvalidKey",e);if(t.Collection.isReservedKey(e))throw Error("ReservedKey",e);var s=o[e],r=v(e,i);return r||o[e]?(!s||null!==r&&r!==n?!s&&r?(c++,u.push(e),o[e]=r):o[e]=r:(u.splice(u.indexOf(e),1),c--,delete o[e]),-1==l.indexOf(e)&&l.push(e),p.length=u.length,a[e]=i,i):r},g=function(t){return-1===h.indexOf(t)&&p[t]!==n?p[t]:n},m=this.getItem=function(e,i){if(!e)return null;var s=a[e];return s||(s=t.Collection.buildItem(o[e]),s===n&&(s=g(e)),s===n&&(s=i),a[e]=s),s};this.key=function(t){return t>=u.length?null:u[t]},this.count=function(){return c},this.toString=function(){return'<Collection @name="'+p.name+'">'},this.save=function(){k(),x();var e={};if(l.length>0){for(var i=0;l.length>i;i++)e[l[i]]=t.Collection.marshallItem(o[l[i]]);s.save(p.name,e),l=[]}},this.getCurrentData=function(){var t={name:p.name,count:c,definition:r.definition,operations:[],items:[],"public":!1};if(r.operations)for(var e=0;r.operations.length>e;e++){var i={operation:r.operations[e].operation,field:r.operations[e].field};opsToolbox[i.operation].toJsonData(d[i.field],i),t.operations.push(i)}for(var n in o){var s=o[n];s._key=n,t.items.push(s)}return t},this.refresh=function(t){y.call(p,{currentUserId:i,delegate:s,data:t})};var v=t.Collection.sanitizeItem,y=function(e){t.Collection.validateOptions(e),d={},u=[],l=[],h=[],i=e.currentUserId,s=e.delegate,r=e.data,p.name=r.name,c=r.count,_(r.items)},_=function(t){if(o={},a={},t){for(var e=0;t.length>e;e++){var i=t[e],n=i._key;o[n]=i,w(n,i),u.push(n)}p.length=u.length}},w=function(e){-1!=h.indexOf(e)||t.Collection.isReservedKey(e)||(h.push(e),p.__defineGetter__(e,function(){return m.call(p,e)}),p.__defineSetter__(e,function(t){return f.call(p,e,t)}))},b=function(e){for(var i=Object.keys(p),n=i.length-1;n>=0;n--){var s=i[n];t.Collection.isReservedKey(s)||e(s,p[s])}},x=function(){for(var t=p.length-1;t>=0;t--){var e=p.key(t),i=p.getItem(e);i&&i.hasOwnProperty("_dirty")&&i._dirty&&-1===l.indexOf(e)&&(delete i._dirty,p.setItem(e,i))}},k=function(){b(function(t,e){-1===h.indexOf(t)&&(f(t,e),w(t,e))})};y(e)},t.Collection.RESERVED_KEYS=["refresh","setItem","getItem","count","sum","key","isPublic","getUserItem","setUserItem","average","toString","size","length","name","save","fieldDefs","sanitizedItem","getCurrentData"],t.Collection.isReservedKey=function(e){return t.Collection.RESERVED_KEYS.indexOf(e)>=0},t.Collection.validateOptions=function(t){if(!t.data)throw Error("ArgumentError","missing data");if(!t.data.name)throw Error("ArgumentError","no name in data");if(t.data.count===n)throw Error("ArgumentError","no count in data")},t.Collection.marshallItem=function(t){return t&&t.toJSON?t.toJSON():t!==n&&null!==t?t:null},t.Collection.sanitizeItem=function(e,i){if("function"==typeof i)throw Error("ArgumentError cannot serialize function");var n=t.Collection.marshallItem(i);if(null!==n){if(("object"!=typeof n||[].constructor===n.constructor)&&(n={_type:"literal",value:n}),n._key=e,!n||n.constructor!=={}.constructor)throw Error("Unserialisable object");return JSON.parse(JSON.stringify(n))}return null},t.Collection.buildItem=function(e){return e&&e._type&&t.Collection.ItemBuilders[e._type]?t.Collection.ItemBuilders[e._type](e):e},t.Collection.ItemBuilders={image:function(e){return new t.Image(e)},sound:function(e){return new t.Sound(e)},video:function(e){return new t.Video(e)},literal:function(t){return t.value}}}(UT,window,document,void 0),UT.CollectionStore=function(t){this.data=t.data;var e=t.delegate;e.store=this;for(var i={},n=0;this.data.length>n;n++){var s=this.data[n],r=s.name;if(!r)throw Error("ArgumentError","data contains unamed collections.");i[r]=s.public?new UT.PublicCollection({data:s,postMessageApi:t.postMessageApi,currentUserId:t.currentUserId,delegate:e}):new UT.Collection({data:s,postMessageApi:t.postMessageApi,currentUserId:t.currentUserId,delegate:e})}this.get=function(t){return i[t]},this.set=function(t){i[t.name]=t},this.each=function(t){for(var e in i)t(i[e])},this.flush=function(){e.flush()},this.getCurrentData=function(){s=[];for(var t in i)s.push(i[t].getCurrentData());return s},this.refresh=function(t,i){e.refreshCollections(t,i)}},function(t,e,i,n){"use strict";var s=["recent","friends"];t.PublicCollection=function(e){this.length=0,this.name=null;var i=null,r=!1;this.isPublic=function(){return!0},this.setUserItem=function(t){if(!u)throw l.authenticate(),Error("ArgumentError","No currentUserId defined");var e=u,s=a(e,t),o=i;return s||o?(f(o,s),!o||null!==s&&s!==n?!o&&s?(d++,i=s):i=s:(d--,i=null),r=!0,i):s};var o=this.getUserItem=function(){return u?i:n};this.average=function(t){return c[t]?c[t].average:n},this.sum=function(t){return c[t]?c[t].sum:n};var a=function(e,i){var s=t.Collection.sanitizeItem(e,i),r=h.definition.fields;if(i&&r&&r.length>0){for(var o=!1,a=0;r.length>a;a++){var u=r[a];if(i[u.name]!==n)if(o=!0,"string"==u.type)s[u.name]=i[u.name];else if("number"==u.type){var l=parseFloat(i[u.name]);if(isNaN(l)||!isFinite(i[u.name]))throw Error("TypeError","Wrong value for field note");s[u.name]=l}else{if("boolean"!=u.type)throw Error("TypeError","Unknown type "+u.type);s[u.name]=!!i[u.name]}}if(!o)throw Error("InvalidItemError no valid field specified")}return s};this.count=function(t){if(!t)return d;if(c[t])return c[t]?c[t].count:n},this.toString=function(){return'<PublicCollection @name="'+this.name+'">'},this.save=function(){if(r){var e={};e[u]=t.Collection.marshallItem(i),l.save(this.name,e),r=!1}},this.getCurrentData=function(){var t={name:this.name,count:d,definition:h.definition,operations:[],items:[],"public":!0};if(h.operations)for(var e=0;h.operations.length>e;e++){var n={operation:h.operations[e].operation,field:h.operations[e].field};p[n.operation].toJsonData(c[n.field],n),t.operations.push(n)}o()&&(i._key=u,t.items.push(o()));for(var s=0;h.items.length>s;s++)h.items[s]._key&&h.items[s]._key!=u&&t.items.push(h.items[s]);return t},this.find=function(t,e){if("function"==typeof t&&(e=t,t={filters:{recent:!0}}),"string"==typeof t){if(-1===s.indexOf(t))throw Error("invalid filter ("+t+")");var i={};i[t]=!0,t={filters:i}}if(!e||"function"!=typeof e)throw Error("missing callback argument");l.find(this.name,t,e)},this.refresh=function(t){g.call(this,{currentUserId:u,delegate:l,data:t})};var u,l,h,c,d,p={_transfer:function(t,e){for(var i=Array.prototype.slice.call(arguments,2),n=i.length-1;n>=0;n--)e[i[n]]=t[i[n]]},average:{fromJsonData:function(t,e){e.average===n||e.average_count===n?(t.average=-1,t.average_count=0):p._transfer(e,t,"average","average_count")},toJsonData:function(t,e){p._transfer(t,e,"average","average_count")},recompute:function(t,e,i,s){var r=t.average_count;i&&i[e.field]!==n&&(t.average=1===r?-1:(t.average*r-i[e.field])/parseFloat(r-1),r--),s&&s[e.field]!==n&&(t.average=(t.average*r+s[e.field])/parseFloat(r+1),r++),t.average_count=r}},count:{fromJsonData:function(t,e){e.count===n?t.count=0:p._transfer(e,t,"count")},toJsonData:function(t,e){p._transfer(t,e,"count")},recompute:function(t,e,i,s){i&&i[e.field]&&i[e.field]!==n&&(t.count=t.count-1),s&&s[e.field]&&s[e.field]!==n&&t.count++}},sum:{fromJsonData:function(t,e){e.sum===n?t.sum=0:p._transfer(e,t,"sum")},toJsonData:function(t,e){p._transfer(t,e,"sum")},recompute:function(t,e,i,s){i&&i[e.field]&&i[e.field]!==n&&(t.sum=t.sum-i[e.field]),s&&s[e.field]&&s[e.field]!==n&&(t.sum=t.sum+s[e.field])}}},f=function(t,e){if(h.operations)for(var i=0;h.operations.length>i;i++){var s=h.operations[i];(e&&e[s.field]!==n||t&&t[s.field]!==n)&&p[s.operation].recompute(c[s.field],s,t,e)}},g=function(e){if(t.Collection.validateOptions(e),c={},u=e.currentUserId,l=e.delegate,h=e.data,this.name=h.name,d=h.count,h.operations)for(var i=0;h.operations.length>i;i++){var n=h.operations[i];c[n.field]=c[n.field]||{},p[n.operation].fromJsonData(c[n.field],n)}m.call(this,h.items)},m=function(t){if(t)for(var e=0;t.length>e;e++){var n=t[e],s=n._key;s==u&&(i=n)}};g.call(this,e)}}(UT,window,document,void 0),function(t,e){"use strict";var i,n,s=[],r={},o=!1;t.Expression=function(){throw Error("StaticClass")},t.Expression.ready=function(t){o?(t.call(this,i),a("changeCurrentState",["initialized"])):-1===s.indexOf(t)&&s.push(t)},t.Expression.apiVersion=function(){return n&&n.apiVersion||"1.3.4-alpha2"},t.Expression.version=function(){return n&&n.version||null};var a=t.Expression._callAPI=function(s,o,a){if("collections.save"==s&&!i.isDisplay())return u.push({methodName:s,args:o,callback:function(){}}),a&&a(),undefined;var l={type:"ExpAPICall",methodName:s,args:o,expToken:n?n.expToken:null};if(a){var h=""+t.uuid();r[h]=a,l.callbackId=h}var c=JSON.stringify(l);e.parent.postMessage(c,"*")},u=[];t.Expression._resolveCallAPIStack=function(){for(var t=0;u.length>t;)a(u[t].methodName,u[t].args,u[t].callback),++t;u=[]};var l=function(t,i){var n=r[t];n&&(i&&i instanceof Array||e.console&&console.error&&console.error("received result is not an array.",i),n.apply(this,i),delete r[t])},h=function(e){n=e,o=!0,n.readyToPost=!1,i=new t.Post(n),i.on("scroll",function(t){n.scrollValues=t});for(var r=0;s.length>r;r++)s[r].call(i,i);s=[],a("changeCurrentState",["initialized"])},c=function(){i.fire("publish"),a("posted")},d=function(){i.fire("pause")};t.Expression._dispatch=function(t){switch(t.type){case"ready":h(t.options);break;case"triggerEvent":i.fire.apply(i,[t.eventName].concat(t.eventArgs));break;case"callback":l(t.callbackId,t.result);break;case"post":c();break;case"pause":d();break;case"media":i.fire("media",t.eventArgs[0])}},t.Expression._reset=function(){s=[],r=[],i=null,o=!1,n=null},t.Expression._postInstance=function(){return i=i}}(UT,window,document,void 0),function(t){"use strict";t.User=function(t){this.username=t.username,this.avatar=function(){return t.avatar},this.uuid=t.uuid,this.numberOfPost=t.numberOfPost,this.numberOfUse=t.numberOfUse},t.User.prototype.toJSON=function(){return{_type:"user",uuid:this.uuid}}}(UT),function(t,e,i,n){"use strict";t.Post=function(s){if(!s||!s.collections)throw Error("ArgumentError","Missing collections in state arguments");var r,o=this,a={height:0,width:0},u={scrollTop:0,scrollBottom:0},l={},h={},c=(/(urturn)/i.test(navigator.userAgent),new t.CollectionStore({data:s.collections,currentUserId:s.currentUserId,delegate:{save:function(e,i,n){t.Expression._callAPI("collections.save",[e,i],n)},authenticate:function(){t.Expression._callAPI("authenticate")},find:function(e,i,n){t.Expression._callAPI("collections.find",[e,i],n)}}}));if(s.parentData){var d=[];for(var p in s.parentData){try{s.parentData[p]._key=p}catch(f){e.console&&console.log&&console.log("Unexpected Error: "+f)}d.push(s.parentData[p])}r=new t.Collection({data:{name:"parent",items:d,count:d.length},delegate:{save:function(){throw Error("ReadOnly collection")},authenticate:function(){throw Error("ReadOnly collection")}},currentUserId:s.currentUserId})}var g=this.language=s.locale;i18n&&i18n.setLocale(g);var m=this.parameters=s.parameters;m&&m.filter&&"string"==typeof m.filter&&(m.filter=JSON.parse(m.filter));var v=function(e){return s.note=e,t.Expression._callAPI("document.setNote",[s.note]),o.fire("noteUpdated"),e};this.__defineGetter__("note",function(){return s.note}),this.__defineSetter__("note",function(t){return v(t)});var y=this.context={player:!1,editor:!1,sandbox:!1,thumbnail:!1,privacy:null,mediaFirst:!1};"edit"==s.mode?y.editor=!0:"view"==s.mode&&(y.player=!0),s.sandbox===!0&&(y.sandbox=!0),y.privacy=s.documentPrivacy,s.mediaFirst===!0&&(y.mediaFirst=!0),y.player&&(__STACK_JQUERY_JS=[]),this.url=s.documentURL;var _=this.node=i.querySelector(".webdoc_expression_wrapper");if(!_)throw Error("Missing wrapper node");var w=function(e,i){"function"==typeof e&&(i=e,e={}),t.Expression._callAPI("document.textInput",[e.value||null,e.max||null,e.multiline||!1],i)},b=function(e,i,s){i&&t.Expression._callAPI("medias.openImageChooser",[e],function(e){if(null===e&&2===arguments.length&&"cameraNotFound"===arguments[1])return s?s({type:"cameraNotFound",message:"User camera can not be found."}):i(null),n;if(null===e)return s?s({type:"userQuitDialog",message:"User quit the dialog without selecting a media."}):i(null),n;var r=new t.Image;r.init(e),i.call(o,r)})},x=function(e,i,s){i&&t.Expression._callAPI("medias.openSoundChooser",[e],function(e){if(null===e)return s?s({type:"userQuitDialog",message:"User quit the dialog without selecting a media."}):i(null),n;var r=new t.Sound(e);i.call(o,r)})},k=function(e,i,s){t.Expression._callAPI("medias.openVideoChooser",[e],function(e){if(null===e)return s?s({type:"userQuitDialog",message:"User quit the dialog without selecting a media."}):i(null),n;
var r=new t.Video(e);i.call(o,r)})},C=function(e,i,s){e.image.descriptor&&(e.image=e.image.descriptor),t.Expression._callAPI("medias.crop",[e],function(r){if(null===r)return s?s({type:"userQuitDialog",message:"User quit the dialog without selecting a media."}):i(null),n;var a=null;e.image.init?(e.image.init(r),a=e.image):(a=new t.Image,a.init(r)),i.call(o,a)})},S=function(e,i){if("function"==typeof e&&(i=e,e={}),e.items){e.users=e.users||[];for(var n=0;e.items.length>n;n++)e.users.push(e.items[n]._key);delete e.items}e.title&&(e.label=e.title,delete e.title),o.context.player&&e.users&&0!==e.users.length?t.Expression._callAPI("dialog.users",[e],function(){i.apply(o)}):i.apply(o)},P={text:w,image:b,sound:x,video:k,crop:C,users:S},E=function(e){t.Expression._callAPI("dialog.suggestRotation",[e],function(){})},T={suggestRotation:E};this.notification=function(t,e){if(!T[t])throw Error("InvalidArgument","unknown notification type "+t);T[t](e)};var I=this.fire=function(e){"scrollChanged"===e&&(e="scroll");var i,n,s,r,a,l,c=h[e],d=[];if("scroll"==e&&(c=c?c.concat(h.scrollChanged):h.scrollChanged),c){switch(r=Array.prototype.slice.call(arguments,1),a=0!==r.length?r[0]:o,e){case"scroll":u.scrollTop=r[0].scrollTop,u.scrollBottom=r[0].scrollBottom;break;case"image":var p=new t.Image;p.init(r[0]),r[0]=p}for(c=c.slice(0),i=c.length,n=-1;i>++n;)s=c[n],s&&(l=s.apply(a,r),l&&"function"==typeof l.then&&d.push(l));var f="after"+e.charAt(0).toUpperCase()+e.slice(1);d.length>0?when.all(d).then(function(){I(f)}):I(f)}},A=this.on=function(t,e){var i=h[t]||(h[t]=[]);"function"==typeof e&&i.push(e)};this.off=function(t,e){var i,s=h[t];if(s){if(!e)return delete h[t],n;for(i=s?s.indexOf(e):-1;-1!==i;)s.splice(i,1),i=s.indexOf(e)}},this.valid=function(e){return e!==n&&e!=s.readyToPost&&(s.readyToPost=!!e,t.Expression._callAPI("document.readyToPost",[s.readyToPost])),s.readyToPost},this.imageAdded=function(t){A("imageAdded",t)};var j=function(){o.node.style.display="block"},M=function(){};this.dialog=function(t,e,i){i===n&&"function"==typeof e&&(i=e,e={});var s=null;4==arguments.length&&"function"==typeof arguments[3]&&(s=arguments[3]),M();var r=u.scrollTop,o=u.scrollBottom,a=this,l=function(){j(),i&&("text"!==t?a.scroll({scrollTop:r,scrollBottom:o},function(){}):setTimeout(function(){a.scroll({scrollTop:-1e3,scrollBottom:0},function(){})},1),i.apply(this,arguments))},h=null;if(s&&(h=function(){j(),s&&("text"!==t?a.scroll({scrollTop:r,scrollBottom:o},function(){}):setTimeout(function(){a.scroll({scrollTop:-1e3,scrollBottom:0},function(){})},1),s.apply(this,arguments))}),!P[t])throw Error("InvalidArgument","unknown dialog type "+t);P[t](e,l,h)},this.size=function(e,i){if("function"==typeof e&&(i=e,e=null),e){var n;"number"==typeof e?n=e:e&&"auto"==e?n=_.offsetHeight:e&&e.height&&(n="string"==typeof e.height&&e.height.match&&e.height.match(/^[0-9]+px$/)?e.height.substring(0,e.height.length-2):e.height);var s=null;return i&&(s=function(){i(new t.ResizeEvent(a.width,a.height))}),t.Expression._callAPI("container.resizeHeight",[n,!0],s),this}var r=new t.ResizeEvent(a.width,a.height);return i?(i(r),this):r};var L=!1;this.isDisplay=function(){return L},this.display=function(){L=!0,t.Expression._resolveCallAPIStack(),t.Expression._callAPI("container.display",[],function(){})},this.stopAllOther=function(){t.Expression._callAPI("document.stopAllOther",[],function(){})},this.scroll=function(e,i){if("function"==typeof e&&(i=e,e=null),e)return t.Expression._callAPI("container.scroll",[e.scrollTop||e.scrollBottom,e.scrollTop?"top":"bottom"],function(e){u.scrollTop=e.scrollTop,u.scrollBottom=e.scrollBottom,i&&i(new t.ScrollEvent(e.scrollTop,e.scrollBottom))}),this;var n=new t.ScrollEvent(u.scrollTop,u.scrollBottom);return i?(i(n),this):n},this.pushNavigation=function(e,i){t.Expression._callAPI("container.pushNavigation",[e],i)},this.popNavigation=function(){t.Expression._callAPI("container.popNavigation")},this.queueUp=function(e,i){return i?l[e]!==n?(i(l[e]),this):(l[e]=-1,t.Expression._callAPI("document.queueUp",[e],function(t){l[e]=t,i(t)}),this):this},this.navigate=function(i){var n={};arguments.length>=2?n=arguments[1]:1===arguments.length&&(n=i,i="browse");var r={app:i,parameters:n};"browse"===i&&"blank"===s.behaviors.navigate.browseStrategy?e.open(n,"_blank"):t.Expression._callAPI("container.navigate",[r])},this.isNativeApp=function(){return"api"===s.behaviors.navigate.browseStrategy?!0:!1};var D=this.collection=function(t){return"parent"==t?r||null:c.get(t)};this.save=function(){c.each(function(t){(y.editor||t.isPublic())&&t.save()})},this.enableRotation=function(e){t.Expression._callAPI("container.enableRotation",[e],function(){})},this.urturn=function(e){t.Expression._callAPI("document.urturn",[e],function(){})},this.post=function(e){t.Expression._callAPI("document.post",[e],function(){})},this.geoLocation=function(e){t.Expression._callAPI("document.geoLocation",[],function(t,i){e(t,i)})};var B=!1;this.isStatic=function(e){return e!==n&&this.context.editor&&(B=e,t.Expression._callAPI("document.isStatic",[e],function(){})),e||B},this.setInteractionMap=function(e){t.Expression._callAPI("document.setInteractionMap",[e],function(){})},this.autoLink=function(t){var e=/(^|\s|<br\/>|\.)#([A-Za-z0-9_\-]+)/g,i=/(^|\s|<br\/>|\.)@([A-Za-z0-9_\-.]+)/g,n='$1<a href="search:#$2" class="ut-navigate-hashtag">#$2</a>',s='$1<a href="user:$2" class="ut-navigate-mention">@$2</a>';return t=t.replace(e,n),t=t.replace(i,s),t=t.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(t){var e=t;return e.match("^https?://")||(e="http://"+e),'<a href="'+e+'" class="ut-navigate-url">'+t+"</a>"})},this.follow=function(e,i,n){t.Expression._callAPI("dialog.follow",[e,i],function(){n()})},this.getFollowers=function(e,i){1==arguments.length&&" function"==typeof arguments[0]&&(i=e,e=0),t.Expression._callAPI("document.followship",["follower",e],function(t){i(t)})},this.getFollowing=function(e,i){1==arguments.length&&" function"==typeof arguments[0]&&(i=e,e=0),t.Expression._callAPI("document.followship",["following",e],function(t){i(t)})},this.users=function(e,i){if("function"==typeof e&&(i=e,e="current"),i)if("current"===e)t.Expression._callAPI("document.getUserData",[],function(e){var n=e?new t.User(e):null;i(n,null)});else if("[object Array]"===Object.prototype.toString.call(e)){for(var n=[],s=0;e.length>s;s++)e[s]._key&&n.push(e[s]._key);t.Expression._callAPI("document.users",[n],function(n){for(var s=[],r=[],o=0;e.length>o;o++)for(var a=0;n.length>a;a++)if(e[o]._key==n[a].uuid){s.push(new t.User(n[a])),r.push(e[o]);break}i(s,r)})}else t.Expression._callAPI("document.users",[[e._key]],function(n){var s=n[0];s?i(new t.User(s),e):i(null,null)})},this.isOwner=function(t){return t.uuid==s.postUserId},this.isCurrentUser=function(t){return t.uuid==s.currentUserId};var N=function(){a.width=e.innerWidth,a.height=e.innerHeight},O=null,z=null;t.touchEventFix&&(O=t.touchEventFix.enableTouchEvents,z=t.touchEventFix.disableTouchEvents),this.on("enabletouchevents",O),this.on("disabletouchevents",z),this.on("shouldUpdateNote",function(t){s.note=t,o.fire("noteUpdated")}),this.storage=D("default"),e.addEventListener("resize",function(){N(),o.fire("resize",new t.ResizeEvent(a.width,a.height))},!1),N(),e.addEventListener("click",function(t){var e=t.target.getAttribute("href");if(e&&e.match(/^(search|user|http)/gi)){var i=e.split(":")[0],n=e.substring(e.indexOf(":")+1);("http"==i||"https"==i)&&(i="browse",n=e),t.preventDefault(),o.navigate(i,n)}},!1)}}(UT,window,document,void 0),function(t,e){var i=/^((?:[\w\s#,.<>]|(?:\[[\w\:]+\=[\w\:'"]+\]))*)(?:\[([\w\:]+)\])?$/,n=/data\:image\/svg\+xml;/,s="http://www.w3.org/1999/xlink";UT.Image=function(r){this.url="",this.rasterUrl=null,this.info={},this.type="image",this.crop=function(t,e){UT.Expression._callAPI("medias.recrop",[{size:t,image:this.descriptor}],function(t){this.init(t),e.call(this,this)}.bind(this))},this.autocrop=function(t,e,i){UT.Expression._callAPI("medias.crop",[{size:{width:t,height:e,auto:!0},image:this.descriptor}],function(t){this.init(t),i.call(this,this)}.bind(this))},this.filter=function(t,e){UT.Expression._callAPI("medias.applyFilter",[{filter:t,image:this.descriptor}],function(t){this.init(t),e.call(this,this)}.bind(this))},this.editable=function(t){UT.Expression._callAPI("medias.getEditableImage",[this.url],function(e){console.log("editable image URL:",e),this.url=e,t.call(this,this)}.bind(this))},this.toJSON=function(){return this.descriptor._type="image",this.svgTemplate&&(this.descriptor.svgTemplate=this._svgTemplateString(),this.descriptor.svgCssSelector=this.svgCssSelector),this.descriptor};var o=function(t,e){var i=new Image;i.onload=function(){e.call(this,i)},i.onerror=function(){e.call(this,null,Error("Unable to load image"))},i.src=t};this.node=function(t,e){e||(e=t,t="img");try{return{img:function(t){this.rasterUrl?o(this.rasterUrl,t):this.svgTemplate?t(null,Error("No Raster Image")):o(this.url,t)},svg:function(t){this.svg(t)}}[t].call(this,e)}catch(i){e(null,Error("Invalid node type given: "+t))}},this.svg=function(){var e=this,i=function(){return e.url&&!!e.url.match(n)},s=function(){return e.url.substring(19)},r=function(n){var r=t.createElement("div");return i()?(r.innerHTML=s(),n(r.children[0]),undefined):(e.editable(function(){o.call(e,e.url,function(i,s){if(s)return n.call(e,null,s);var o;e.svgTemplate?("string"==typeof e.svgTemplate&&(r=t.createElement("div"),r.innerHTML=e.svgTemplate,e.svgTemplate=r.children[0]),o=e.svgTemplate,e._injectImage(o),n.call(e,o)):n.call(e,null,Error("No SVG Template"))})}),undefined)},a=function(t,i){e.svgTemplate=t,e.svgCssSelector=i||"image[xlink:href]","string"!=typeof e.svgTemplate&&e._injectImage(e.svgTemplate)};return arguments[0]&&"function"==typeof arguments[0]?r.apply(this,arguments):a.apply(this,arguments),this._dirty=!0,this},this._svgTemplateString=function(){if("string"==typeof this.svgTemplate)return this.svgTemplate;this.svgTemplate.parentNode,c=t.createElement("div"),this._removeInjectedImage(this.svgTemplate),c.appendChild(this.svgTemplate);var e=c.innerHTML;return this._injectImage(this.svgTemplate),e},this._injectImage=function(t){if(this.svgCssSelector){var n=this.svgCssSelector.match(i);if(!n&&e.console&&console.log)console.log("InvalidSelector:",this.svgCssSelector);else{var r=n[1]&&t.querySelector(n[1])||t,o=n[2];if(o)switch(o){case"xlink:href":r.setAttributeNS(s,"xlink:href",this.absoluteUrl());break;default:console.log("unsupported attribute",o)}else r.appendChild(_buildImage(this.absoluteUrl()))}}},this.absoluteUrl=function(){if(this.url&&this.url.match(/^((https?|data):|\/\/)/))return this.url;if(this.url&&"/"!=this.url[0]){var t=e.location.pathname.split("/");return t.pop(),e.location.protocol+"//"+e.location.host+t.join("/")+"/"+this.url}return e.location.protocol+"//"+e.location.host+this.url},this._removeInjectedImage=function(t){if(this.svgCssSelector){var n=this.svgCssSelector.match(i);if(!n&&e.console&&console.log)console.log("InvalidSelector:",this.svgCssSelector);else{var s=n[1]&&t.querySelector(n[1])||t,r=n[2];r?s.removeAttribute(r,this.url):s.removeChild(s.querySelector('image[xlink:href="'+this.url+'"]'))}}},this.init=function(e){if(e)if("string"==typeof e)this.url=e,this.descriptor={},this.descriptor.url=e,this.descriptor._type="image";else{if(e.url)this.url=e.url;else if(e.svg){if("string"!=typeof e.svg){var i=t.createElement("div");i.appendChild(e.svg),e.svg=i.innerHTML}this.url="data:image/svg+xml;utf8,"+e.svg,e.svg=null}e.svgTemplate&&this.svg(e.svgTemplate,e.svgCssSelector||"image[xlink:href]"),this.rasterUrl=e.rasterUrl,this.descriptor=e,this.info=e.info,e.center&&(this.info.crop=e.center)}},this.descriptor={},r&&this.init(r)}}(document,window),UT.Video=function(t){function e(t){this.url=t.url,this.appData=t.appData,i=t}this.url="",this.type="video",this.toJSON=function(){return i.url=this.url,i._type="video",i.appData=this.appData,i};var i={};e.call(this,t)},UT.Sound=function(t){function e(t){i=t,this.service=t.service,this.url=t.url,this.title=t.title,this.artist=t.artist,this.cover=t.cover,this.artistCover=t.artistCover,this.soundCover=t.soundCover,this.waveFormImage=t.waveFormImage,this.link=t.link,this.appData=t.appData}this.service="",this.url="",this.title="",this.artist="",this.cover="",this.artistCover="",this.soundCover="",this.waveFormImage="",this.link="",this.appData={},this.toJSON=function(){return{_type:"sound",service:this.service,url:this.url,title:this.title,artist:this.artist,cover:this.cover,artistCover:this.artistCover,soundCover:this.soundCover,waveFormImage:this.waveFormImage,link:this.link,appData:this.appData}};var i={};e.call(this,t)},function(t){t.ResizeEvent=function(t,e){this.height=e,this.width=t},t.ScrollEvent=function(t,e){this.scrollTop=t,this.scrollBottom=e}}(UT),("ontouchstart"in window||"onmsgesturechange"in window)&&(document.querySelector("html").className=document.querySelector("html").className+" touch",FastClick!==void 0&&window.addEventListener("load",function(){new FastClick(document.body)},!1)),window.addEventListener("message",function(t){try{msgObj=JSON.parse(t.data)}catch(e){console&&console.error&&console.error("received invalid message",t.data,e.message),msgObj={}}UT.Expression._dispatch(msgObj)},!1),function(t){"use strict";t.preloader={},t.preloader.waitFor=function(t,e){e===undefined&&(e=!1);var i={keys:{},callback:{loadstart:function(){},progress:function(){},load:function(){}}},n=function(){return(new Date).getTime()},s=function(t){t.map(function(t){i.keys[t]={ready:!1,startTime:n()}})},r=function(t){var s=this;if(!i.keys[t])return console.error("wrong key, that was not defined for waitFor"),undefined;i.keys[t].ready=!0,i.keys[t].endTime=n(),i.keys[t].delay=i.keys[t].endTime-i.keys[t].startTime,e&&console&&console.log&&console.log(" -- waitFor:progress: key:"+t),i.callback.progress.call(s,i.keys);for(var r in i.keys)if(!i.keys[r].ready)return;if(e&&console&&console.group){console.group(" -- waitFor:load",i.keys);for(var o in i.keys)console.log(o," = ",i.keys[o].delay+"ms");console.groupEnd()}i.callback.load.call(s,i.keys)},o=function(t,e){if(!e)return r(t),console&&console.warn&&console.warn("You have to specify image url as a second parameter of readyImage(key, url).. currently url="+name),undefined;var s=new Image;s.onload=function(){r(t)},s.onerror=function(){r(t)},i.keys[t].startTime=n(),i.keys[t].url=e,s.src=e},a=function(t,s){return s?(i.keys[t].startTime=n(),i.keys[t].fontName=s,fontdetect.onFontLoaded(s,function(){r(t)},function(){e&&console.error('We was not able to load the font "'+s+'" in 5 sec...'),r(t)},{msInterval:30,msTimeout:5e3}),undefined):(r(t),console&&console.warn&&console.warn("You have to specify font name as a second parameter of readyFont(key, fontName).. currently fontname="+s),undefined)};return i.on=function(t,e){return i.callback[t]=e,i},i.ready=function(t){return r(t),i},i.readyImage=function(t,e){return o(t,e),i},i.readyFont=function(t,e){return a(t,e),i},s(t),i}}(UT,window,document,void 0);